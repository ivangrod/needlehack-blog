



<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>AI agents for the smart home - Home Assistant</title>
    <meta name="author" content="Paulus Schoutsen">
    <meta name="description" content="AI is all the hype and everyone is adding it to everything. We did our research and decided to focus on enabling experimentation.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://www.home-assistant.io/blog/2024/06/07/ai-agents-for-the-smart-home/">

    <meta property="fb:app_id" content="338291289691179">
    <meta property="og:title" content="AI agents for the smart home">
    <meta property="og:site_name" content="Home Assistant">
    <meta property="og:url" content="https://www.home-assistant.io/blog/2024/06/07/ai-agents-for-the-smart-home/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="AI is all the hype and everyone is adding it to everything. We did our research and decided to focus on enabling experimentation.">
    <meta property="og:image" content="https://ivangrod.github.io/images/blog/2024-06-ai-agents-for-the-smart-home/art.jpg">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@home_assistant">
    
    <meta name="twitter:title" content="AI agents for the smart home">
    <meta name="twitter:description" content="AI is all the hype and everyone is adding it to everything. We did our research and decided to focus on enabling experimentation.">
    <meta name="twitter:image" content="https://ivangrod.github.io/images/blog/2024-06-ai-agents-for-the-smart-home/art.jpg">
    <link rel="me" href="https://fosstodon.org/@homeassistant">

    <link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3/dist/style.min.css" rel="stylesheet" />
    <link href="/stylesheets/prism.css?8acb84bc0387c9548a63998fcfea0139" rel="stylesheet">
    <link href="/stylesheets/screen.css?3d79f9acc1b3464b313d68cd5a171ca1" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Home Assistant" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&amp;family=Instrument+Sans:ital,wdth,wght@0,99,400..700;1,99,400..700&amp;" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/2.1.0/iconify-icon.min.js"></script>
  </head>

  <body  class="   blog-post ">
    <header class='site-header '>
      



<div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/needlehack-blog/" class="site-title">
        <div class="logo"></div>
      </a>
      <a class="release-date" href="/blog/2025/09/03/release-20259/" title="Latest version 2025.9.4 released September 19, 2025">
        2025.9.4
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle" />
        <label
          for="toggle"
          class="toggle"
          data-open="Main Menu"
          data-close="â¨‰"
        ></label>
        <ul class="menu pull-right">
          <li><a  href="/needlehack-blog/installation/">Getting started</a></li>
          <li>
            <a  href="/needlehack-blog/docs/">Documentation <iconify-icon inline icon='mdi:chevron-down' title='Chevron down'></iconify-icon></a>
            <ul>
              <li><a href="/needlehack-blog/installation/"><iconify-icon inline icon='simple-icons:homeassistant' title='Homeassistant'></iconify-icon> Installation</a></li>
              <li><a href="/needlehack-blog/docs/automation/"><iconify-icon inline icon='mdi:robot-happy' title='Robot happy'></iconify-icon> Automations</a></li>
              <li><a href="/needlehack-blog/dashboards/"><iconify-icon inline icon='mdi:gauge' title='Gauge'></iconify-icon> Dashboards</a></li>
              <li><a href="/needlehack-blog/voice_control/"><iconify-icon inline icon='mdi:comment-processing-outline' title='Comment processing outline'></iconify-icon> Voice assistants</a></li>
              <li><a href="/needlehack-blog/docs/organizing/"><iconify-icon inline icon='mdi:view-grid' title='View grid'></iconify-icon> Device organization</a></li>
              <li><a href="/needlehack-blog/docs/energy/"><iconify-icon inline icon='mdi:solar-power-variant' title='Solar power variant'></iconify-icon> Energy management</a></li>
              <li><a href="/needlehack-blog/docs/configuration/"><iconify-icon inline icon='mdi:cog' title='Cog'></iconify-icon> Advanced configuration</a></li>
            </ul>
          </li>
          <li><a  href="/needlehack-blog/integrations/">Integrations</a></li>
          <li><a class="active" href="/needlehack-blog/blog/">Blog</a></li>
          <li><a  href="/needlehack-blog/help/">Need help?</a></li>
          <li>
            <div class="docsearch" id="docsearch"></div>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>

    </header>

    <div class="page-content">

      

      <div class="grid-wrapper">
        <div class="grid grid-center">

          <aside id="toc-bar" class="grid__item desk-wide-one-sixth">
                <section class="aside-module grid__item one-whole">
                  <div class='section'>
                    <h1 class="title epsilon"><iconify-icon inline icon='mdi:toc' title='Toc'></iconify-icon> On this page</h1>
                    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#the-foundation-for-ai-experimentation-in-the-smart-home">The foundation for AI experimentation in the smart home</a></li>
<li class="toc-entry toc-h2"><a href="#cloud-versus-local">Cloud versus local</a></li>
<li class="toc-entry toc-h2"><a href="#what-is-ai">What is AI?</a></li>
<li class="toc-entry toc-h2"><a href="#ai-agents">AI Agents</a></li>
<li class="toc-entry toc-h2"><a href="#defining-ai-agents">Defining AI Agents</a></li>
<li class="toc-entry toc-h2"><a href="#researching-ai">Researching AI</a></li>
<li class="toc-entry toc-h2"><a href="#defining-the-api-for-llms">Defining the API for LLMs</a>
<ul>
<li class="toc-entry toc-h3"><a href="#custom-integrations-providing-their-own-llm-apis">Custom integrations providing their own LLM APIs</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#future-research">Future research</a></li>
<li class="toc-entry toc-h2"><a href="#join-us">Join us</a></li>
</ul>
                  </div>
                </section>
              </aside> 

          
          <div class="grid__item two-thirds desk-wide-seven-twelfths lap-one-whole palm-one-whole">
          

            
              <article class="post">
  
  <header>
  
  <h1>AI agents for the smart home</h1>
  

  
  <div class="meta clearfix">
    

  
  
    <span class="byline author vcard">
      <a href="https://github.com/balloob" target="_blank" rel="external nofollow"><img class="author-avatar" src="https://avatars.githubusercontent.com/balloob?size=64" alt="Paulus Schoutsen"> Paulus Schoutsen<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>
    </span>
  


    









<time datetime="2024-06-07T00:00:01+00:00" pubdate data-updated="true"><iconify-icon inline icon="mdi:calendar" title="Calendar"></iconify-icon> June 7, 2024</time>
    

  <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class="category" href="/blog/categories/assist/">Assist</a></li>
      
    
    </ul>
  </span>

    
      <a class="comments" href="#post-comments">Comments</a>
    
  </div>
  
</header>


  <img src="/images/blog/2024-06-ai-agents-for-the-smart-home/art.jpg" alt="Art generated by Clelia with Midjourney" style="border: 0;box-shadow: none;">
<p>Back in the day, the saying was <em>computers donâ€™t lie</em>. They were deterministic, zeros and ones executing the rules we gave them. With AI, this is the opposite. AI models hallucinate and their output cannot be completely trusted â€“ yet the current hype is to infuse AI into every product imaginable. Home Assistant doesnâ€™t jump on the latest hype, instead we focus on building a lasting and sustainable smart home. We do have thoughts on the subject, so letâ€™s talk about AI in the smart home.</p>
<p>Home Assistant is uniquely positioned to be the smart home platform for AI. As part of <a href="https://www.openhomefoundation.org/">our Open Home values<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>, we believe users own their own data (a novel concept, we know) and that they can choose what happens with it. Thatâ€™s why Home Assistant stores all user data locally, including rich history, and it offers powerful APIs for anyone to build anything on top â€“ no constraints. Empowering our users with real control of their homes <a href="/blog/2016/01/19/perfect-home-automation/#limit-the-impact-of-false-positives-and-negatives">is part of our DNA</a>, and helps reduce the impact of false positives caused by hallucinations. All this makes Home Assistant the perfect foundation for anyone looking to build powerful AI-powered solutions for the smart home - something that is not possible with any of the other big platforms.</p>
<p>As we have researched AI (<a href="#the-foundation-for-ai-experimentation-in-the-smart-home">more about that below</a>), we concluded that there are currently no AI-powered solutions <em>yet</em> that are worth it. Would you want a summary of your home at the top of your dashboard if it could be wrong, cost you money, or even <a href="https://www.theguardian.com/commentisfree/article/2024/may/30/ugly-truth-ai-chatgpt-guzzling-resources-environment" rel="external nofollow">harm the planet<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>?</p>
<p>Instead, we are focussing our efforts on allowing anyone to play with AI in Home Assistant by making it easier to integrate it into existing workflows and run the models locally. To experiment with AI today, the latest release of Home Assistant allows you to connect and control devices with OpenAI or Google AI. For the local AI solutions of the future, we are working with NVIDIA, who have made amazing progress already. This will unleash the power of our community, our collective intelligence, to come up with creative use cases.</p>
<p>Read more about our approach, how you can use AI today, and what the future holds. Or jump straight in and add <a href="/integrations/google_generative_ai_conversation/">Google AI</a>, <a href="/integrations/openai_conversation/">OpenAI</a> to your Home Assistant installation (or <a href="/integrations/ollama">Ollama</a> for local AI without the ability to control HA yet).</p>
<p><em>Huge thanks for contributing: <a href="https://github.com/Shulyaka" rel="external nofollow">@shulyaka<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>, <a href="https://github.com/tronikos" rel="external nofollow">@tronikos<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>, <a href="https://github.com/allenporter" rel="external nofollow">@allenporter<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>, <a href="https://github.com/synesthesiam" rel="external nofollow">@synesthesiam<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>, <a href="https://github.com/jlpouffier" rel="external nofollow">@jlpouffier<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> and <a href="https://github.com/balloob" rel="external nofollow">@balloob<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</em></p>
<a name="read-more"></a>
<h2>The foundation for AI experimentation in the smart home <a class="title-link" name="the-foundation-for-ai-experimentation-in-the-smart-home" href="#the-foundation-for-ai-experimentation-in-the-smart-home"></a>
</h2>
<p>We want it to be easy to use LLMs together with Home Assistant. Until now, Home Assistant has allowed you to configure <a href="#ai-agents">AI agents</a> powered by LLMs that you could talk with, but the LLM could not control Home Assistant. That changed this week with the release of <a href="/blog/2024/06/05/release-20246/">Home Assistant 2024.6</a>, which empowered AI agents from Google Gemini and OpenAI ChatGPT to interact with your home. You can use this in Assist (<a href="/voice_control/">our voice assistant</a>) or interact with agents in scripts and automations to make decisions or annotate data.</p>
<p>Using agents in Assist allows you to tell Home Assistant what to do, without having to worry if that exact command sentence is understood. Even combining commands and referencing previous commands will work!</p>
<p>And because this is <em>just</em> Assist, it works on <a href="/blog/2023/07/20/year-of-the-voice-chapter-3/">Android</a>, <a href="/blog/2024/05/22/companion-app-for-ios-20245-assist/#assist-on-ios">iOS</a>, <a href="/voice_control/worlds-most-private-voice-assistant/">classic landline phones</a>, and <a href="/voice_control/thirteen-usd-voice-remote/">$13 voice satellites</a> ğŸ˜</p>
<p class="img"><img src="/images/blog/2024-06-ai-agents-for-the-smart-home/01-assist.png" alt="Assist interface showing LLM command processing">LLMs allow Assist to understand a wider variety of commands.</p>
<p>The architecture that allows LLMs to control Home Assistant is, as one expects from us, fully customizable. The default API is based on Assist, focuses on voice control, and can be extended using intents <a href="/integrations/intent_script/">defined in YAML</a> or <a href="https://developers.home-assistant.io/docs/intent_handling">written in Python</a> (<a href="#defining-the-api-for-llms">examples below</a>).</p>
<p>The current API that we offer is just one approach, and depending on the LLM model used, it might not be the best one. Thatâ€™s why it is architected to allow custom integrations to <a href="https://developers.home-assistant.io/docs/core/llm/">provide their own LLM APIs</a>. This allows experimentation with different types of tasks, like creating automations. All LLM integrations in Home Assistant can be configured using any registered custom APIs.</p>
<p class="img"><img src="/images/blog/2024-06-ai-agents-for-the-smart-home/02-options.png" alt="Options screen for AI agent configuration">The options screen for an AI agent allows you to pick the Home Assistant API that it has access to.</p>
<p>The options screen for an AI agent allows you to pick the Home Assistant API that it has access to.</p>
<h2>Cloud versus local <a class="title-link" name="cloud-versus-local" href="#cloud-versus-local"></a>
</h2>
<p>Home Assistant currently offers two cloud LLM providers with various model options: Google and OpenAI. Both integrations ship with a recommended model that balances price, accuracy, and speed. Our recommended model for OpenAI is better at non-home related questions but Googleâ€™s model is 14x cheaper, yet has similar voice assistant performance.</p>
<p>We see the best results with cloud-based LLMs, as they are currently more powerful and easier to run compared to open source options. But local and open source LLMs are improving at a staggering rate. This is important because local AI is better for your privacy and, in the long term, your wallet. Local models also tend to be a lot smaller, which means a lot less electricity is used to run them.</p>
<p>To improve local AI options for Home Assistant, we have been collaborating with NVIDIAâ€™s <a href="https://www.jetson-ai-lab.com/research.html" rel="external nofollow">Jetson AI Lab Research Group<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>, and there has been tremendous progress. They have published text-to-speech and speech-to-text engines with <a href="https://github.com/dusty-nv/jetson-containers/tree/78159ca37d3195afdade81688e22a34cd7a89dbc/packages/smart-home/wyoming" rel="external nofollow">support for our Wyoming Protocol<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>, added <a href="https://github.com/dusty-nv/jetson-containers/tree/dev/packages/llm/ollama" rel="external nofollow">support for Ollama to their Jetson platform<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> and just last week showed their progress on making a local Llama 3 model control Home Assistant:</p>
<p><lite-youtube videoid="aq7QS9AtwE8" videotitle="The first 5 minutes Dustin shows his prototype of controlling Home Assistant using a local LLM."></lite-youtube></p>
<p style="text-align: center;"><i>The first 5 minutes, Dustin shows his prototype of controlling Home Assistant using a local LLM.</i></p>
<h2>What is AI? <a class="title-link" name="what-is-ai" href="#what-is-ai"></a>
</h2>
<p>The current wave of AI hype evolves around large language models (LLMs), which are created by ingesting huge amounts of data. When you run these models, you give it text and it will predict the next words. If you give it a question as input, the generated next words will be the answer. To make it a bit smarter, AI companies will layer API access to other services on top, allowing the LLM to do mathematics or integrate web searches.</p>
<p>One of the biggest benefits of large language models is that because it is trained on human language, you control it with human language. Want it to answer in the style of Super Mario? Just add â€œAnswer like Super Marioâ€ to your input text and it will work.</p>
<p>There is a big downside to LLMs: because it works by predicting the next word, that prediction can be wrong and it will â€œhallucinateâ€. Because it doesnâ€™t know any better, it will present its hallucination as the truth and it is up to the user to determine if that is correct. Until this problem is solved, any solution that we create needs to deal with this.</p>
<p>Another downside is that depending on the AI model and where it runs, it can be very slow to generate an answer. This means that using an LLM to generate voice responses is currently either expensive or terribly slow. We cannot expect a user to wait 8 seconds for the light to be turned on when using their voice.</p>
<h2>AI Agents <a class="title-link" name="ai-agents" href="#ai-agents"></a>
</h2>
<p>Last January, the most upvoted article on HackerNews was about controlling Home Assistant using an LLM. <a href="https://news.ycombinator.com/item?id=38985152" rel="external nofollow">I commented on the story<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> to share our excitement for LLMs and the things we plan to do with it. In response to that comment, Nigel Nelson and Sean Huver, two ML engineers from the NVIDIA Holoscan team, reached out to share some of their experience to help Home Assistant. It evolved around AI agents.</p>
<p>AI agents are programs that run independently. Users or other programs can interact with them to ask them to describe an image, answer a question, or control your home. In this case, the agents are powered by LLM models, and the way the agent responds is steered by instructions in natural language (English!).</p>
<p>Nigel and Sean had experimented with AI being responsible for multiple tasks. Their tests showed that giving a single agent complicated instructions so it could handle multiple tasks confused the AI model. One didnâ€™t cut it, you need multiple AI agents responsible for one task each to do things right. If an incoming query can be handled by multiple agents, a selector agent approach ensures the query is sent to the right agent.</p>
<p class="img"><img src="/images/blog/2024-06-ai-agents-for-the-smart-home/03-agents.png" alt="Diagram of AI agent framework">High level overview of the described agent framework.</p>
<p>The NVIDIA engineers, as one expects from a company selling GPUs to run AI, were all about running LLMs locally. But they had a point: running LLMs locally removes the constraint on what one can do with LLMs. You start to consider different approaches if you donâ€™t have to be concerned about raking up a cloud bill in the thousands of dollars.</p>
<p>For example, imagine we passed every state change in your house to an LLM. If the front door opens at night while everyone is home, is that suspicious? Creating a rule-based system for this is hard to get right for everyone, but an LLM might just do the trick.</p>
<p>It was this conversation that led us to our current approach: In Home Assistant we want AI agents. Many AI agents.</p>
<h2>Defining AI Agents <a class="title-link" name="defining-ai-agents" href="#defining-ai-agents"></a>
</h2>
<p>As part of last yearâ€™s <a href="/blog/2022/12/20/year-of-voice/">Year of the Voice</a>, we developed a conversation integration that allowed users to chat and talk with Home Assistant via conversation agents. Next to Home Assistantâ€™s conversation engine, which uses string matching, users could also pick LLM providers to talk to. These were our first AI agents.</p>
<p>Set up <a href="/integrations/google_generative_ai_conversation/">Google Generative AI</a>, <a href="/integrations/openai_conversation/">OpenAI</a>, or <a href="/integrations/ollama/">Ollama</a> and you end up with an AI agent represented as a conversation entity in Home Assistant. For each agent, the user is able to configure the LLM model and the instructions prompt. The prompt can be set to a template that is rendered on the fly, allowing users to share realtime information about their house with the LLM.</p>
<p>The conversation entities can be included in an Assist Pipeline, our voice assistants. Or you can directly interact with them via services inside your automations and scripts.</p>
<p class="img"><img src="/images/blog/2024-06-ai-agents-for-the-smart-home/04-setup.png" alt="Instructions screen for AI agents"></p>
<p>As a user, you are in control when your agents are invoked. This is possible by leveraging the beating heart of Home Assistant: the automation engine. You can write an automation, listen for a specific trigger, and then feed that information to the AI agent.</p>
<p>The following example is based on an automation <a href="https://www.reddit.com/r/homeautomation/comments/1at0re0/out_of_my_42_automations_this_is_my_best_one_by/" rel="external nofollow">originally shared by /u/Detz on the Home Assistant subreddit<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>. Every time the song changes on their media player, it will check if the band is a country band and if so, skip the song. The impact of hallucinations here is low, the user might end up listening to a country song or a non-country song is skipped.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="python"><span class="n">trigger</span><span class="p">:</span>
<span class="err">Â Â </span><span class="o">-</span> <span class="n">platform</span><span class="p">:</span> <span class="n">state</span>
<span class="err">Â Â Â Â </span><span class="n">entity_id</span><span class="p">:</span> <span class="n">media_player</span><span class="p">.</span><span class="n">sonos_roam</span>
<span class="n">condition</span><span class="p">:</span> <span class="sh">'</span><span class="s">{{ trigger.to_state.state == </span><span class="sh">"</span><span class="s">playing</span><span class="sh">"</span><span class="s"> }}</span><span class="sh">'</span>
<span class="n">action</span><span class="p">:</span>
<span class="err">Â Â </span><span class="o">-</span> <span class="n">service</span><span class="p">:</span> <span class="n">conversation</span><span class="p">.</span><span class="n">process</span>
<span class="err">Â Â Â Â </span><span class="n">data</span><span class="p">:</span>
<span class="err">Â Â Â Â Â Â </span><span class="n">agent_id</span><span class="p">:</span> <span class="n">conversation</span><span class="p">.</span><span class="n">openai_mario_en</span>
<span class="err">Â Â Â Â Â Â </span><span class="n">text</span><span class="p">:</span> <span class="o">&gt;-</span>
<span class="err">Â Â Â Â Â Â Â Â </span><span class="n">You</span> <span class="n">are</span> <span class="n">passed</span> <span class="n">the</span> <span class="n">state</span> <span class="n">of</span> <span class="n">a</span> <span class="n">media</span> <span class="n">player</span> <span class="ow">and</span> <span class="n">have</span> <span class="n">to</span> <span class="n">answer</span> <span class="sh">"</span><span class="s">yes</span><span class="sh">"</span> <span class="k">if</span>
<span class="err">Â Â Â Â Â Â Â Â </span><span class="n">the</span> <span class="n">song</span> <span class="ow">is</span> <span class="n">country</span><span class="p">:</span>
<span class="err">Â Â Â Â Â Â Â Â </span><span class="p">{{</span> <span class="n">trigger</span><span class="p">.</span><span class="n">to_state</span> <span class="p">}}</span>
<span class="err">Â Â Â Â </span><span class="n">response_variable</span><span class="p">:</span> <span class="n">response</span>
<span class="err">Â Â </span><span class="o">-</span> <span class="k">if</span><span class="p">:</span>
<span class="err">Â Â Â Â Â Â </span><span class="o">-</span> <span class="n">condition</span><span class="p">:</span> <span class="n">template</span>
<span class="err">Â Â Â Â Â Â Â Â </span><span class="n">value_template</span><span class="p">:</span> <span class="sh">'</span><span class="s">{{ response.response.speech.plain.speech.lower().startswith(</span><span class="sh">"</span><span class="s">yes</span><span class="sh">"</span><span class="s">) }}</span><span class="sh">'</span>
<span class="err">Â Â Â Â </span><span class="n">then</span><span class="p">:</span>
<span class="err">Â Â Â Â Â Â </span><span class="o">-</span> <span class="n">service</span><span class="p">:</span> <span class="n">media_player</span><span class="p">.</span><span class="n">media_next_track</span>
<span class="err">Â Â Â Â Â Â Â Â </span><span class="n">target</span><span class="p">:</span>
<span class="err">Â Â Â Â Â Â Â Â Â Â </span><span class="n">entity_id</span><span class="p">:</span> <span class="sh">'</span><span class="s">{{ trigger.entity_id }}</span><span class="sh">'</span>
</code></pre></div></div>
<p>Weâ€™ve turned this automation into a blueprint that you can try yourself. It allows you to configure the criteria on when to skip the song.</p>
<p><a href="https://my.home-assistant.io/redirect/blueprint_import?blueprint_url=https%3A%2F%2Fcommunity.home-assistant.io%2Ft%2Fautomatically-skip-songs-that-match-criteria%2F736522" class="my badge" target="_blank"><img src="https://my.home-assistant.io/badges/blueprint_import.svg"></a></p>
<h2>Researching AI <a class="title-link" name="researching-ai" href="#researching-ai"></a>
</h2>
<p>One of the weird things about LLMs is that itâ€™s opaque how they exactly work and their usefulness can differ greatly per task. Even the creators of the models need to run tests to understand what their new models are capable of. Given that our tasks are quite unique, we had to create our own reproducible benchmark to compare LLMs.</p>
<p>To make this possible, Allen Porter created a <a href="https://github.com/allenporter/home-assistant-datasets?tab=readme-ov-file#home-assistant-datasets" rel="external nofollow">set of evaluation tools<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> including a new integration called <a href="https://github.com/allenporter/home-assistant-synthetic-home/tree/main" rel="external nofollow">â€œSynthetic homeâ€<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>. This integration allows us to launch a Home Assistant instance based on a definition in a YAML file. The file specifies the areas, the devices (including manufacturer/model) and their state. This allows us to test each LLM against the exact same Home Assistant state.</p>
<p class="img"><img src="/images/blog/2024-06-ai-agents-for-the-smart-home/05-testing.png" alt="Graph showing accuracy between different assist options">Results comparing a set of difficult sentences to control Home Assistant between Home Assistant's sentence matching, Google Gemini 1.5 Flash and OpenAI GPT-4o.</p>
<p>Weâ€™ve used these tools extensively to fine tune the prompt and API that we give to LLMs to control Home Assistant. The reproducibility of these studies allows us to change something and repeat the test to see if we can generate better results. We are able to use this to test different prompts, different AI models and any other aspect.</p>
<h2>Defining the API for LLMs <a class="title-link" name="defining-the-api-for-llms" href="#defining-the-api-for-llms"></a>
</h2>
<p>Home Assistant has different API interfaces. We have the Home Assistant Python object, a WebSocket API, a REST API, and intents. We decided to base our LLM API on the intent system because it is our smallest API. Intents are used by our sentence-matching voice assistant and are limited to controlling devices and querying information. They donâ€™t bother with creating automations, managing devices, or other administrative tasks.</p>
<p>Leveraging intents also meant that we already have a place in the UI where you can configure what entities are accessible, a test suite in many languages matching sentences to intent, and a baseline of what the LLM should be able to achieve with the API.</p>
<img src="/images/blog/2024-06-ai-agents-for-the-smart-home/06-expose.png" alt="Exposing devices to Assist to limit control" class="no-shadow">
<p>Home Assistant already has different ways for you to define your own intents, allowing you to extend the Assist API to which LLMs have access. The first one is the <a href="/integrations/intent_script/">intent script integration</a>. Using YAML, users can define a script to run when the intent is invoked and use a template to define the response.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="python"><span class="n">intent_script</span><span class="p">:</span>
<span class="err">Â Â </span><span class="n">EventCountToday</span><span class="p">:</span>
<span class="err">Â Â Â Â </span><span class="n">action</span><span class="p">:</span>
<span class="err">Â Â Â Â Â Â </span><span class="o">-</span> <span class="n">service</span><span class="p">:</span> <span class="n">calendar</span><span class="p">.</span><span class="n">get_events</span>
<span class="err">Â Â Â Â Â Â Â Â </span><span class="n">target</span><span class="p">:</span>
<span class="err">Â Â Â Â Â Â Â Â Â Â </span><span class="n">entity_id</span><span class="p">:</span> <span class="n">calendar</span><span class="p">.</span><span class="n">my_calendar</span>
<span class="err">Â Â Â Â Â Â Â Â </span><span class="n">data_template</span><span class="p">:</span>
<span class="err">Â Â Â Â Â Â Â Â Â Â </span><span class="n">start_date_time</span><span class="p">:</span> <span class="sh">"</span><span class="s">{{ today_at(</span><span class="sh">'</span><span class="s">00:00</span><span class="sh">'</span><span class="s">) }}</span><span class="sh">"</span>
<span class="err">Â Â Â Â Â Â Â Â Â Â </span><span class="n">duration</span><span class="p">:</span> <span class="p">{</span> <span class="sh">"</span><span class="s">hours</span><span class="sh">"</span><span class="p">:</span> <span class="mi">24</span> <span class="p">}</span>
<span class="err">Â Â Â Â Â Â Â Â </span><span class="n">response_variable</span><span class="p">:</span> <span class="n">result</span>
<span class="err">Â Â Â Â Â Â </span><span class="o">-</span> <span class="n">stop</span><span class="p">:</span> <span class="sh">""</span>
<span class="err">Â Â Â Â Â Â Â Â </span><span class="n">response_variable</span><span class="p">:</span> <span class="n">result</span>
<span class="err">Â Â Â Â </span><span class="n">speech</span><span class="p">:</span>
<span class="err">Â Â Â Â Â Â </span><span class="n">text</span><span class="p">:</span> <span class="sh">"</span><span class="s">{{ action_response[</span><span class="sh">'</span><span class="s">calendar.my_calendar</span><span class="sh">'</span><span class="s">].events | length }} events</span><span class="sh">"</span>
</code></pre></div></div>
<p>We havenâ€™t forgotten about custom components either. They can <a href="https://developers.home-assistant.io/docs/intent_handling">register their own intents</a> or, even better, define their own API.</p>
<h3>Custom integrations providing their own LLM APIs <a class="title-link" name="custom-integrations-providing-their-own-llm-apis" href="#custom-integrations-providing-their-own-llm-apis"></a>
</h3>
<p>The built-in LLM API is focused on simplicity and being good at the things that it does. The larger the API surface, the easier AI models, especially the smaller ones, can get confused and invoke them incorrectly.</p>
<p>Instead of one large API, we are aiming for many focused APIs. To ensure a higher success rate, an AI agent will only have access to one API at a time. Figuring out the best API for creating automations, querying the history, and maybe even creating dashboards will require experimentation. When all those APIs are in place, we can start playing with a selector agent that routes incoming requests to the right agent and API.</p>
<p>To find out what APIs work best is a task we need to do as a community. Thatâ€™s why we have designed our API system in a way that <a href="https://developers.home-assistant.io/docs/core/llm/">any custom component can provide them</a>. When configuring an LLM that supports control of Home Assistant, users can pick any of the available APIs.</p>
<p>Custom LLM APIs are written in Python. When a user talks to an LLM, the API is asked to give a collection of tools for the LLM to access, and a partial prompt that will be appended to the user prompt. The partial prompt can provide extra instructions for the LLM on when and how to use the tools.</p>
<h2>Future research <a class="title-link" name="future-research" href="#future-research"></a>
</h2>
<p>One thing we can do to improve AI in Home Assistant is wait. LLMs, both local and remotely accessible ones, are improving rapidly and new ones are released regularly (fun fact, I started writing this post before GPT4o and Gemini 1.5 were announced). Wait a couple of months and the new Llama, Gemini, or GPT release might unlock many new possibilities.</p>
<p>Weâ€™ll continue to collaborate with NVIDIA to enable more local AI functionalities. High on our list is making local LLM with function calling easily accessible to all Home Assistant users.</p>
<p>There is also room for us to improve the local models we use. We want to explore fine-tuning a model for specific tasks like voice commands or area summarization. This would allow us to get away with much smaller models with better performance and reliability. And the best thing about our community? <a href="https://github.com/acon96/home-llm" rel="external nofollow">People are already working on this<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</p>
<p>We also want to see if we can use RAG to allow users to teach LLMs about personal items or people that they care about. Wouldnâ€™t it be great if Home Assistant could help you find your glasses?</p>
<h2>Join us <a class="title-link" name="join-us" href="#join-us"></a>
</h2>
<p>We hope that youâ€™re going to give our new AI tools a try and join us on <a href="https://community.home-assistant.io/c/configuration/voice-assistant/49">the forums</a> and in the #voice-assistants channel on <a href="/join-chat/">our Discord server</a>. If you find something cool, share it with the community and letâ€™s find that killer use case!</p>



</article>

<div id="post-comments"></div>


<div id="discourse-comments"></div>

<script type="text/javascript">
  DiscourseEmbed = { discourseUrl: 'https://community.home-assistant.io/',
                     discourseEmbedUrl: 'https://www.home-assistant.io/blog/2024/06/07/ai-agents-for-the-smart-home/' };

  (function() {
    var d = document.createElement('script'); d.type = 'text/javascript'; d.async = true;
    d.src = DiscourseEmbed.discourseUrl + 'javascripts/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(d);
  })();
</script>

            
          </div>


          
            
              <aside id="sidebar" class="grid__item one-third desk-wide-one-quarter lap-one-whole palm-one-whole">
            
            <div class="grid">
  




  
    
      <section class="sharing aside-module grid__item one-whole lap-one-half">
  <h1 class="title epsilon"><iconify-icon inline icon='mdi:ios-share' title='Ios share'></iconify-icon> Share this post</h1>
  <ul class="divided">
  
    <li>
      <a
        target="_blank"
        href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fwww.home-assistant.io%2Fblog%2F2024%2F06%2F07%2Fai-agents-for-the-smart-home%2F&text=AI+agents+for+the+smart+home+via+%40home_assistant"
      >Tweet</a>
    </li>
  
  
    <li>
      <a
        target="_blank"
        href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fwww.home-assistant.io%2Fblog%2F2024%2F06%2F07%2Fai-agents-for-the-smart-home%2F"
      >Share on Facebook</a>
    </li>
  
  </ul>
</section>

      

<section class="recent-posts aside-module grid__item one-whole lap-one-half">
  <h1 class="title epsilon"><iconify-icon inline icon='mdi:newspaper-variant-multiple' title='Newspaper variant multiple'></iconify-icon> Recent Posts</h1>
  <ul class="divided">
    
      
        <li class="post">
          <a href="/blog/2025/09/17/home-assistant-turns-12/">Happy 12th Birthday, Home Assistant!</a>
        </li>
      
    
      
        <li class="post">
          <a href="/blog/2025/09/11/ai-in-home-assistant/">Building the AI-powered local smart home</a>
        </li>
      
    
      
        <li class="post">
          <a href="/blog/2025/09/03/release-20259/">2025.9: Features for tiles and automations for miles</a>
        </li>
      
    
      
        <li class="post">
          <a href="/blog/2025/09/02/frient-joins-works-with-home-assistant/">Frient joins Works with Home Assistant</a>
        </li>
      
    
      
        <li class="post">
          <a href="/blog/2025/08/21/airgradient-joins-works-with-home-assistant/">AirGradient joins Works with Home Assistant</a>
        </li>
      
    
  </ul>
</section>

    
  



  <section id="toc-module" class="aside-module grid__item one-whole lap-one-half">
        <div class='section'>
          <h1 class="title epsilon"><iconify-icon inline icon='mdi:toc' title='Toc'></iconify-icon> On this page</h1>
          <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#the-foundation-for-ai-experimentation-in-the-smart-home">The foundation for AI experimentation in the smart home</a></li>
<li class="toc-entry toc-h2"><a href="#cloud-versus-local">Cloud versus local</a></li>
<li class="toc-entry toc-h2"><a href="#what-is-ai">What is AI?</a></li>
<li class="toc-entry toc-h2"><a href="#ai-agents">AI Agents</a></li>
<li class="toc-entry toc-h2"><a href="#defining-ai-agents">Defining AI Agents</a></li>
<li class="toc-entry toc-h2"><a href="#researching-ai">Researching AI</a></li>
<li class="toc-entry toc-h2"><a href="#defining-the-api-for-llms">Defining the API for LLMs</a>
<ul>
<li class="toc-entry toc-h3"><a href="#custom-integrations-providing-their-own-llm-apis">Custom integrations providing their own LLM APIs</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#future-research">Future research</a></li>
<li class="toc-entry toc-h2"><a href="#join-us">Join us</a></li>
</ul>
        </div>
      </section></div>

          </aside>
          
        </div>
      </div>

      <footer>
        <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="skyline grid">
        <div class="skyline grid__item one-whole">
          <div class="footer-skyline">
          </div>
        </div>
      </div>
      <div class="footer-nav grid">
        <div class="company grid__item one-quarter lap-one-half palm-one-whole">
          <div class="title">
            <img
              src="/needlehack-blog/images/footer-logo-text.svg"
              height="72"
              alt="Home Assistant"
            />
          </div>
          <p>
            Home Assistant is a project from the <a href="https://www.openhomefoundation.org/">Open Home Foundation</a>, sponsored by <a href="https://www.nabucasa.com/">Nabu Casa</a>.
          </p>
        </div>

        <div class="grid__item one-quarter lap-one-half palm-one-whole">
          <h3>Join us and contribute!</h3>
          <ul>
            <li><a class="external-link" href="https://github.com/home-assistant/">GitHub repo <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://developers.home-assistant.io">Developers Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://design.home-assistant.io">Design Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://data.home-assistant.io">Data Science Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://community.home-assistant.io">Community Forum <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://creators.home-assistant.io/">Creator Network <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://works-with.home-assistant.io/">Works With Home Assistant <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a href="/needlehack-blog/community">Our community</li>
            <li><a href="/needlehack-blog/help/reporting_issues/">Reporting issues</a></li>
          </ul>
          <h3>System status</h3>
          <ul>
            <li>
              <a class="external-link"  href="https://alerts.home-assistant.io">Integration Alerts <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a>
            </li>
            <li><a href="/needlehack-blog/security/">Security Alerts</a></li>
            <li>
              <a class="external-link" href="https://status.home-assistant.io">System Status <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a>
            </li>
          </ul>
        </div>

        <div class="grid__item one-quarter lap-one-half palm-one-whole">
          <h3>Companion apps</h3>
          <ul>
            <li><a class="external-link" href="https://apps.apple.com/us/app/home-assistant/id1099568401">iOS and Apple devices</a></li>
            <li><a class="external-link" href="https://play.google.com/store/apps/details?id=io.homeassistant.companion.android">Android and Wear OS</a></li>
            <li><a class="external-link" href="https://companion.home-assistant.io/">...and more!</a></li>
          </ul>
          <h3>Governance</h3>
          <ul>
            <li><a href="/needlehack-blog/privacy/">Privacy Notices</a></li>
            <li><a href="/needlehack-blog/developers/cla/">Contributor License Agreement</a></li>
            <li><a href="/needlehack-blog/tos/">Terms of Service</a></li>
            <li><a href="/needlehack-blog/code_of_conduct/">Code of Conduct</a></li>
            <li><a href="/needlehack-blog/developers/credits/">Credits</a></li>
            <li><a href="/needlehack-blog/developers/license/">License</a></li>
          </ul>
        </div>

        <div class="socials grid__item one-quarter lap-one-half palm-one-whole">

          <h3>Follow us</h3>
          <p><a class="external-link" href='https://newsletter.openhomefoundation.org/#/portal'>Sign up for our newsletter <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></p>
          <div class="icons">
            <a
              rel="me"
              href="https://youtube.com/@home_assistant"
              title="YouTube"
              target="_blank"
              ><iconify-icon icon="simple-icons:youtube"></iconify-icon></a>
            <a
              rel="me"
              href="https://reddit.com/r/homeassistant"
              title="Reddit"
              target="_blank"
              ><iconify-icon icon="simple-icons:reddit"></iconify-icon></a>
            <a
              rel="me"
              href="https://github.com/home-assistant/home-assistant"
              title="GitHub"
              target="_blank"
              ><iconify-icon icon="simple-icons:github"></iconify-icon></a>
            <br />
            <a
              rel="me"
              href="https://fosstodon.org/@homeassistant"
              title="Mastodon"
              target="_blank"
              ><iconify-icon icon="simple-icons:mastodon"></iconify-icon></a>
            <a
              rel="me"
              href="https://bsky.app/profile/home-assistant.io"
              title="Bluesky"
              target="_blank"
             ><iconify-icon icon="simple-icons:bluesky"></iconify-icon></a>
            <a
              rel="me"
              href="https://x.com/home_assistant"
              title="X"
              target="_blank"
             ><iconify-icon icon="simple-icons:x"></iconify-icon></a>
            <br />
            <a
              rel="me"
              href="https://www.facebook.com/homeassistantio"
              title="Facebook"
              target="_blank"
              ><iconify-icon icon="simple-icons:facebook"></iconify-icon></a>
            <a
              rel="me"
              href="https://www.instagram.com/homeassistant/"
              title="Instagram"
              target="_blank"
              ><iconify-icon icon="simple-icons:instagram"></iconify-icon></a>
            <a
              rel="me"
              href="https://www.linkedin.com/company/home-assistant"
              title="LinkedIn"
              target="_blank"
              ><iconify-icon icon="simple-icons:linkedin"></iconify-icon></a>
          </div>

          <div class="web-notice">
            <p>
              For partnership inquiries please check out <a href="https://works-with.home-assistant.io/">Works With Home Assistant</a>. For media, get in touch <a href="mailto:media@openhomefoundation.org">here</a>. For other questions, you can contact us <a href="mailto:hello@home-assistant.io">here</a> (No technical support!)
            </p>
            <p>
              Website powered by <a href="https://jekyllrb.com/">Jekyll</a><br />
              Originally based on the <a href="https://github.com/coogie/oscailte">Oscailte theme</a>
            </p>
            <a href="https://www.netlify.com">
              <img
                src="/needlehack-blog/images/frontpage/netlify.svg"
                alt="Deploys by Netlify Badge"
              />
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

      </footer>

    </div>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@justinribeiro/lite-youtube@1.3.1/lite-youtube.js"></script>

<script src="/javascripts/terminology_tooltip.js?274cec0734bc752f0e5ea3d4e2e59858" type="text/javascript" defer></script>

<script src="/javascripts/prism.js?5d6619066a1fc5cd819a93c132b539ac" type="text/javascript" defer></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@3/dist/umd/index.min.js"></script>
<script type="text/javascript">
  docsearch({
    container: '#docsearch',
    appId: 'FBHBYS3J0U',
    indexName: 'home-assistant',
    apiKey: "ba6f7e6d97b3d3d2f778978c742a47c6",
  });
  document.querySelector('.site-title').addEventListener('contextmenu', function (ev) {
    ev.preventDefault();
    document.location.assign("https://design.home-assistant.io/#brand/logo")
  });
</script>




<script type="text/javascript">
  {
    const article = document.querySelector("article.post");
    if (article) {
      const iframes = article.querySelectorAll("iframe[data-src]");
      let loaded = false;
      if (iframes) {
        document.addEventListener('mousemove', loadLazyFrames, { passive: true, once: true });
        document.addEventListener('touchmove', loadLazyFrames, { passive: true, once: true });
        document.addEventListener('scroll', loadLazyFrames, { passive: true, once: true });
  
        function loadLazyFrames() {
          if (loaded) return;
          loaded = true;
  
          iframes.forEach((iframe) => {
            const src = iframe.getAttribute("data-src");
            if (src) {
              iframe.setAttribute("src", src);
              iframe.removeAttribute("data-src");
            }
          });
        }
      }
    }
  }
</script>

  </body>
</html>
