



<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Amazon Alexa Smart Home Skill - Home Assistant</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Instructions on how to build Smart Home skill to connect Amazon Alexa with Home Assistant.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://www.home-assistant.io/integrations/alexa.smart_home/">

    <meta property="fb:app_id" content="338291289691179">
    <meta property="og:title" content="Amazon Alexa Smart Home Skill">
    <meta property="og:site_name" content="Home Assistant">
    <meta property="og:url" content="https://www.home-assistant.io/integrations/alexa.smart_home/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Instructions on how to build Smart Home skill to connect Amazon Alexa with Home Assistant.">
    <meta property="og:image" content="https://ivangrod.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@home_assistant">
    
    <meta name="twitter:title" content="Amazon Alexa Smart Home Skill">
    <meta name="twitter:description" content="Instructions on how to build Smart Home skill to connect Amazon Alexa with Home Assistant.">
    <meta name="twitter:image" content="https://ivangrod.github.io/images/default-social.png">
    <link rel="me" href="https://fosstodon.org/@homeassistant">

    <link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3/dist/style.min.css" rel="stylesheet" />
    <link href="/needlehack-blog/stylesheets/prism.css | cache_buster" rel="stylesheet">
    <link href="/needlehack-blog/stylesheets/screen.css' | cache_buster" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Home Assistant" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&amp;family=Instrument+Sans:ital,wdth,wght@0,99,400..700;1,99,400..700&amp;" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/2.1.0/iconify-icon.min.js"></script>
  </head>

  <body  class=" integration-page  ">
    <header class='site-header '>
      



<div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/needlehack-blog/" class="site-title">
        <div class="logo"></div>
      </a>
      <a class="release-date" href="/blog/2025/09/03/release-20259/" title="Latest version 2025.9.4 released September 19, 2025">
        2025.9.4
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle" />
        <label
          for="toggle"
          class="toggle"
          data-open="Main Menu"
          data-close="⨉"
        ></label>
        <ul class="menu pull-right">
          <li><a  href="/needlehack-blog/installation/">Getting started</a></li>
          <li>
            <a  href="/needlehack-blog/docs/">Documentation <iconify-icon inline icon='mdi:chevron-down' title='Chevron down'></iconify-icon></a>
            <ul>
              <li><a href="/needlehack-blog/installation/"><iconify-icon inline icon='simple-icons:homeassistant' title='Homeassistant'></iconify-icon> Installation</a></li>
              <li><a href="/needlehack-blog/docs/automation/"><iconify-icon inline icon='mdi:robot-happy' title='Robot happy'></iconify-icon> Automations</a></li>
              <li><a href="/needlehack-blog/dashboards/"><iconify-icon inline icon='mdi:gauge' title='Gauge'></iconify-icon> Dashboards</a></li>
              <li><a href="/needlehack-blog/voice_control/"><iconify-icon inline icon='mdi:comment-processing-outline' title='Comment processing outline'></iconify-icon> Voice assistants</a></li>
              <li><a href="/needlehack-blog/docs/organizing/"><iconify-icon inline icon='mdi:view-grid' title='View grid'></iconify-icon> Device organization</a></li>
              <li><a href="/needlehack-blog/docs/energy/"><iconify-icon inline icon='mdi:solar-power-variant' title='Solar power variant'></iconify-icon> Energy management</a></li>
              <li><a href="/needlehack-blog/docs/configuration/"><iconify-icon inline icon='mdi:cog' title='Cog'></iconify-icon> Advanced configuration</a></li>
            </ul>
          </li>
          <li><a class="active" href="/needlehack-blog/integrations/">Integrations</a></li>
          <li><a  href="/needlehack-blog/blog/">Blog</a></li>
          <li><a  href="/needlehack-blog/help/">Need help?</a></li>
          <li>
            <div class="docsearch" id="docsearch"></div>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>

    </header>

    <div class="page-content">

      

      <div class="grid-wrapper">
        <div class="grid grid-center">

          <aside id="toc-bar" class="grid__item desk-wide-one-sixth">
                <section class="aside-module grid__item one-whole">
                  <div class='section'>
                    <h1 class="title epsilon"><iconify-icon inline icon='mdi:toc' title='Toc'></iconify-icon> On this page</h1>
                    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#requirements">Requirements</a></li>
<li class="toc-entry toc-h2"><a href="#create-an-amazon-alexa-smart-home-skill">Create an Amazon Alexa Smart Home Skill</a></li>
<li class="toc-entry toc-h2"><a href="#create-an-aws-lambda-function">Create an AWS Lambda Function</a>
<ul>
<li class="toc-entry toc-h3"><a href="#create-an-iam-role-for-lambda">Create an IAM Role for Lambda</a></li>
<li class="toc-entry toc-h3"><a href="#add-code-to-the-lambda-function">Add Code to the Lambda Function</a></li>
<li class="toc-entry toc-h3"><a href="#test-the-lambda-function">Test the Lambda Function</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#configure-the-smart-home-service-endpoint">Configure the Smart Home Service Endpoint</a></li>
<li class="toc-entry toc-h2"><a href="#account-linking">Account linking</a></li>
<li class="toc-entry toc-h2"><a href="#alexa-smart-home-integration-configuration">Alexa Smart Home Integration Configuration</a>
<ul>
<li class="toc-entry toc-h3"><a href="#alexa-locale">Alexa locale</a></li>
<li class="toc-entry toc-h3"><a href="#proactive-events">Proactive events</a></li>
<li class="toc-entry toc-h3"><a href="#configure-filter">Configure filter</a></li>
<li class="toc-entry toc-h3"><a href="#alexa-display-categories">Alexa Display Categories</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#supported-platforms">Supported platforms</a>
<ul>
<li class="toc-entry toc-h3"><a href="#alarm-control-panel">Alarm control panel</a></li>
<li class="toc-entry toc-h3"><a href="#alert-automation-group">Alert, Automation, Group</a></li>
<li class="toc-entry toc-h3"><a href="#binary-sensor">Binary sensor</a></li>
<li class="toc-entry toc-h3"><a href="#button-input-button">Button, Input Button</a></li>
<li class="toc-entry toc-h3"><a href="#camera">Camera</a></li>
<li class="toc-entry toc-h3"><a href="#climate">Climate</a></li>
<li class="toc-entry toc-h3"><a href="#cover">Cover</a></li>
<li class="toc-entry toc-h3"><a href="#event-entities">Event entities</a></li>
<li class="toc-entry toc-h3"><a href="#fan">Fan</a></li>
<li class="toc-entry toc-h3"><a href="#humidifier">Humidifier</a></li>
<li class="toc-entry toc-h3"><a href="#image-processing">Image Processing</a></li>
<li class="toc-entry toc-h3"><a href="#input-number-and-number">Input Number and Number</a></li>
<li class="toc-entry toc-h3"><a href="#light">Light</a></li>
<li class="toc-entry toc-h3"><a href="#lock">Lock</a></li>
<li class="toc-entry toc-h3"><a href="#media-player">Media Player</a></li>
<li class="toc-entry toc-h3"><a href="#remote">Remote</a></li>
<li class="toc-entry toc-h3"><a href="#scene">Scene</a></li>
<li class="toc-entry toc-h3"><a href="#script">Script</a></li>
<li class="toc-entry toc-h3"><a href="#sensor">Sensor</a></li>
<li class="toc-entry toc-h3"><a href="#switch-input-boolean">Switch, Input Boolean</a></li>
<li class="toc-entry toc-h3"><a href="#timer">Timer</a></li>
<li class="toc-entry toc-h3"><a href="#vacuum">Vacuum</a></li>
<li class="toc-entry toc-h3"><a href="#valve">Valve</a></li>
<li class="toc-entry toc-h3"><a href="#water-heater">Water heater</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#troubleshooting">Troubleshooting</a>
<ul>
<li class="toc-entry toc-h3"><a href="#binary-sensor-not-available-in-routine-trigger">Binary Sensor not available in Routine Trigger</a></li>
<li class="toc-entry toc-h3"><a href="#token-invalid-and-no-refresh-token-available">Token Invalid and no Refresh Token Available</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#debugging">Debugging</a></li>
</ul>
                  </div>
                </section>
              </aside> 

          
          <div class="grid__item two-thirds desk-wide-seven-twelfths lap-one-whole palm-one-whole">
          

            
              <article class="page">
  
  <header>
    
    
      <div class="breadcrumbs">
        <a href="/needlehack-blog/">Home</a>
        
          
            
            ▸ <a href="/integrations/">Integrations</a>
          
        
          
            ▸ 
          
        
      </div>
    
    <h1 class="title indent">
      
        Amazon Alexa Smart Home Skill
      
    </h1>
  </header>
  
    
    
    
  
  
  <p>Amazon Alexa provides a Smart Home API for richer home automation control without requiring the user to say the skill name, such as:</p>
<ul>
<li><em>“Alexa, turn off the light.”</em></li>
<li><em>“Alexa, set the thermostat to cool.”</em></li>
<li><em>“Alexa, is the garage door open?”</em></li>
</ul>
<p>It takes considerable effort to configure. Your Home Assistant instance must be accessible from the Internet, and you need to create an Amazon Developer account and an Amazon Web Services (AWS) account. An easier solution is to use <a href="/integrations/cloud/">Home Assistant Cloud</a>.</p>
<p>The <a href="/integrations/emulated_hue/">Emulated Hue integration</a> provides a simpler alternative to use utterances such as <em>“Alexa, turn on the kitchen light”</em>. However, it has some limitations since everything looks like a light bulb.</p>
<div class="alert alert-note">
  <p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
  <div class="alert-content">
<p>With <a href="/cloud/">Home Assistant Cloud</a>, you can connect your Home Assistant instance in a few simple clicks to Amazon Alexa. With Home Assistant Cloud you don’t have to deal with dynamic DNS, SSL certificates or opening ports on your router. Just log in via the user interface and a secure connection with the cloud will be established. Home Assistant Cloud requires a paid subscription after a 30-day free trial.
<br>
<br>
For Home Assistant Cloud Users, documentation can be found <a href="https://www.nabucasa.com/config/amazon_alexa/">here<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</p>
  </div>
</div>
<p>Steps to Integrate an Amazon Alexa Smart Home Skill with Home Assistant:</p>
<ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#create-an-amazon-alexa-smart-home-skill">Create an Amazon Alexa Smart Home Skill</a></li>
<li>
<a href="#create-an-aws-lambda-function">Create an AWS Lambda Function</a>
<ul>
<li><a href="#create-an-iam-role-for-lambda">Create an IAM Role for Lambda</a></li>
<li><a href="#add-code-to-the-lambda-function">Add Code to the Lambda Function</a></li>
<li><a href="#test-the-lambda-function">Test the Lambda Function</a></li>
</ul>
</li>
<li><a href="#configure-the-smart-home-service-endpoint">Configure the Smart Home Service Endpoint</a></li>
<li><a href="#account-linking">Account linking</a></li>
<li><a href="#alexa-smart-home-integration-configuration">Alexa Smart Home Integration Configuration</a></li>
<li>
<a href="#supported-platforms">Supported platforms</a>
<ul>
<li>
<a href="#alarm-control-panel">Alarm control panel</a>
<ul>
<li><a href="#arming">Arming</a></li>
<li><a href="#disarming">Disarming</a></li>
</ul>
</li>
<li><a href="#alert-automation-group">Alert, Automation, Group</a></li>
<li>
<a href="#binary-sensor">Binary sensor</a>
<ul>
<li><a href="#routines">Routines</a></li>
</ul>
</li>
<li>
<a href="#button-input-button">Button, Input Button</a>
<ul>
<li><a href="#routines-1">Routines</a></li>
<li><a href="#doorbell-announcement-with-binary_sensor">Doorbell announcement with binary_sensor</a></li>
<li><a href="#presence-detection-with-binary-sensor">Presence Detection with Binary Sensor</a></li>
</ul>
</li>
<li><a href="#camera">Camera</a></li>
<li>
<a href="#climate">Climate</a>
<ul>
<li><a href="#set-thermostat-temperature">Set Thermostat Temperature</a></li>
<li><a href="#thermostat-mode">Thermostat Mode</a></li>
</ul>
</li>
<li>
<a href="#cover">Cover</a>
<ul>
<li><a href="#opencloseraiselower">Open/Close/Raise/Lower</a></li>
<li><a href="#set-cover-position">Set Cover Position</a></li>
<li><a href="#set-cover-tilt">Set Cover Tilt</a></li>
<li><a href="#stop-the-covers-operation">Stop the Covers operation</a></li>
<li><a href="#garage-doors">Garage doors</a></li>
</ul>
</li>
<li>
<a href="#event-entities">Event entities</a>
<ul>
<li><a href="#doorbell-events">Doorbell events</a></li>
</ul>
</li>
<li>
<a href="#fan">Fan</a>
<ul>
<li><a href="#fan-speed">Fan speed</a></li>
<li><a href="#fan-preset-mode">Fan Preset Mode</a></li>
<li><a href="#fan-direction">Fan Direction</a></li>
<li><a href="#fan-oscillation">Fan Oscillation</a></li>
</ul>
</li>
<li>
<a href="#humidifier">Humidifier</a>
<ul>
<li><a href="#humidifier-target-humidity">Humidifier target humidity</a></li>
<li><a href="#humidifier-mode">Humidifier Mode</a></li>
</ul>
</li>
<li>
<a href="#image-processing">Image Processing</a>
<ul>
<li><a href="#presence-detection-notification">Presence Detection Notification</a></li>
</ul>
</li>
<li><a href="#input-number-and-number">Input Number and Number</a></li>
<li>
<a href="#light">Light</a>
<ul>
<li><a href="#brightness">Brightness</a></li>
<li><a href="#color-temperature">Color Temperature</a></li>
<li><a href="#color">Color</a></li>
</ul>
</li>
<li>
<a href="#lock">Lock</a>
<ul>
<li><a href="#unlocking">Unlocking</a></li>
</ul>
</li>
<li>
<a href="#media-player">Media Player</a>
<ul>
<li><a href="#change-channel">Change Channel</a></li>
<li><a href="#speaker-volume">Speaker Volume</a></li>
<li><a href="#equalizer-mode">Equalizer Mode</a></li>
<li><a href="#inputs">Inputs</a></li>
<li><a href="#playback-state">Playback State</a></li>
</ul>
</li>
<li><a href="#remote">Remote</a></li>
<li><a href="#scene">Scene</a></li>
<li><a href="#script">Script</a></li>
<li><a href="#sensor">Sensor</a></li>
<li>
<a href="#switch-input-boolean">Switch, Input Boolean</a>
<ul>
<li><a href="#routines-2">Routines</a></li>
</ul>
</li>
<li><a href="#timer">Timer</a></li>
<li><a href="#vacuum">Vacuum</a></li>
<li>
<a href="#valve">Valve</a>
<ul>
<li><a href="#openclose">Open/close</a></li>
<li><a href="#set-valve-position">Set valve position</a></li>
<li><a href="#stop-the-valve">Stop the valve</a></li>
</ul>
</li>
<li>
<a href="#water-heater">Water heater</a>
<ul>
<li><a href="#set-target-temperature">Set target temperature</a></li>
<li><a href="#operation-mode">Operation Mode</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#debugging">Debugging</a></li>
</ul>
<h2>Requirements <a class="title-link" name="requirements" href="#requirements"></a>
</h2>
<ul>
<li>The Alexa Smart Home API requires your Home Assistant instance to be accessible from the internet via HTTPS on port 443 using an SSL/TLS certificate. A self-signed certificate will not work, but a public trusted certificate or a certificate signed by <a href="https://ccadb-public.secure.force.com/mozilla/IncludedCACertificateReport" rel="external nofollow">an Amazon approved certificate authority<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> should work. Read more on <a href="/blog/2015/12/13/setup-encryption-using-lets-encrypt/">our blog</a> about how to set up encryption for Home Assistant. When running Home Assistant, using the <a href="/addons/duckdns/">Duck DNS</a> add-on is the easiest method.</li>
<li>An Amazon Developer Account. Sign up <a href="https://developer.amazon.com" rel="external nofollow">here<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</li>
<li>An <a href="https://aws.amazon.com/free/" rel="external nofollow">Amazon Web Services (AWS)<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> account is required to host the Lambda function for your Alexa Smart Home Skill. <a href="https://aws.amazon.com/lambda/pricing/" rel="external nofollow">AWS Lambda<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> is free to use for up to 1-million requests and 1GB outbound data transfer per month.</li>
</ul>
<h2>Create an Amazon Alexa Smart Home Skill <a class="title-link" name="create-an-amazon-alexa-smart-home-skill" href="#create-an-amazon-alexa-smart-home-skill"></a>
</h2>
<ul>
<li>Sign into the <a href="https://developer.amazon.com/alexa/console/ask" rel="external nofollow">Alexa Developer Console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>, you can create your free account on the sign-in page. Note this <em>must</em> be created with the same Amazon account you use on your Alexa devices and app.</li>
<li>Go to <code>Alexa Skills</code> page if you are not, then click the <code>Create Skill</code> button to start the process.</li>
<li>Input <code>Skill name</code> as you like, then select your skill’s <code>Default language</code>.</li>
<li>Select <code>Smart Home</code> and <code>Provision your own</code>, then click <code>Create skill</code> button at top right corner.</li>
</ul>
<p class="img">
  <img src="/images/integrations/alexa/create_a_new_skill.png" alt="Screenshot: Create Smart Home skill">
</p>
<ul>
<li>In next screen, make sure <em>v3</em> is selected in <code>Payload version</code> and take note of your <code>Skill ID</code>
</li>
<li>Now, you have created a skeleton of Smart Home skill. In the next step we will do some “real” developer work. Keep Alexa Developer Console open, we will need to change the skill configuration later.</li>
</ul>
<h2>Create an AWS Lambda Function <a class="title-link" name="create-an-aws-lambda-function" href="#create-an-aws-lambda-function"></a>
</h2>
<p>We will write a small piece of code hosted as an AWS Lambda function that will redirect requests from the Alexa Smart Home skill to your Home Assistant instance, then the Alexa integration in Home Assistant will process the request and send back the response. The Lambda function will then deliver the response back to the Alexa Smart Home skill.</p>
<p>OK, let’s go. You first need to sign in to your <a href="https://console.aws.amazon.com/" rel="external nofollow">AWS console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>, if you don’t have an AWS account yet, you can create a new user <a href="https://aws.amazon.com/free/" rel="external nofollow">here<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> with 12-month free tier benefit. You don’t need to worry about the cost if your account has already passed the first 12 months, as AWS provides up to 1 million Lambda requests, 1GB of outbound data and all inbound data for free, every month, for all users. See <a href="https://aws.amazon.com/lambda/pricing/" rel="external nofollow">Lambda pricing<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> for more details.</p>
<h3>Create an IAM Role for Lambda <a class="title-link" name="create-an-iam-role-for-lambda" href="#create-an-iam-role-for-lambda"></a>
</h3>
<p>The first thing you need to do after signing into the <a href="https://console.aws.amazon.com/" rel="external nofollow">AWS console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> is to create an IAM Role for Lambda execution. AWS has very strict access control, so you have to specifically define and assign the required permissions.</p>
<ul>
<li>Click <code>Services</code> in the top navigation bar, expand the menu to display all AWS services, then under the <code>Security, Identity, &amp; Compliance</code> section click <code>IAM</code> to navigate to the IAM console. Or you may use this <a href="https://console.aws.amazon.com/iam/home" rel="external nofollow">link<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>
</li>
<li>Click <code>Roles</code> in the left panel, then click <code>Create role</code>, select <code>AWS Service</code> -&gt; <code>Lambda</code> in the first page of the wizard, then click <code>Next: Permissions</code>
</li>
<li>Select <code>AWSLambdaBasicExecutionRole</code> policy, then click <code>Next: Tags</code>. (Tips: you can use the search box to filter the policy)</li>
</ul>
<p class="img">
  <img src="/images/integrations/alexa/create_iam_role_attach_permission.png" alt="Screenshot: Attach permission policy to IAM role">
</p>
<ul>
<li>Give your new role a name, such as <code>AWSLambdaBasicExecutionRole-SmartHome</code>, then click the <code>Create role</code> button at the bottom of the page. You should be able to find your new role in the roles list now.</li>
</ul>
<h3>Add Code to the Lambda Function <a class="title-link" name="add-code-to-the-lambda-function" href="#add-code-to-the-lambda-function"></a>
</h3>
<p>Next you need create a Lambda function.</p>
<ul>
<li>
<p>Click <code>Services</code> in top navigation bar, expand the menu to display all AWS services, then under <code>Compute</code> section click <code>Lambda</code> to navigate to Lambda console. Or you may use this <a href="https://console.aws.amazon.com/lambda/home" rel="external nofollow">link<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>
<strong>IMPORTANT - Alexa Skills are only supported in specific AWS regions.</strong> Your current server location will be displayed in the top-right corner (for example, Ohio). Select an available server from the list below (<a href="https://developer.amazon.com/en-US/docs/alexa/smarthome/develop-smart-home-skills-in-multiple-languages.html#deploy" rel="external nofollow">reference<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>) based on your Amazon account’s locale, not your physical location. <strong>Alexa Lambda functions created in other regions will not work properly and may prevent account linking! For example, if your locale is set to English (US) and you live in California, you must use US East (N.Virginia), not US West (Oregon). While the setup process will complete with an incorrect region, the skill will not function, and there will be no clear error messages indicating the cause.</strong></p>
<ul>
<li>
<strong>US East (N.Virginia)</strong> region for English (US), English (CA) or Portuguese (BR) skills</li>
<li>
<strong>EU (Ireland)</strong> region for English (UK), English (IN), German (DE), Spanish (ES) or French (FR) skills</li>
<li>
<strong>US West (Oregon)</strong> region for Japanese and English (AU) skills.</li>
</ul>
</li>
<li>
<p>Click <code>Functions</code> in the left navigation bar, to display the list of your Lambda functions.</p>
</li>
<li>
<p>Click <code>Create function</code>, select <code>Author from scratch</code>, then input a <code>Function name</code>.</p>
</li>
<li>
<p>Select <code>Python 3.x</code> as the <code>Runtime</code> (choose the latest available Python 3 version).</p>
</li>
<li>
<p>Expand the <code>Change default execution role</code> dropdown and make sure to select <em>Use an existing role</em> as <code>Execution role</code>, then select the role you just created from <code>Existing role</code> list.</p>
</li>
<li>
<p>Click <code>Create function</code>, then you can configure the details of Lambda function.</p>
</li>
<li>
<p>Expand the <code>Function overview</code> (if it isn’t already expanded), then click <code>+ Add trigger</code> in the left part of the panel, then click <code>Alexa Smart Home</code> from the drop down list to add an Alexa Smart Home trigger to your Lambda function.</p>
</li>
<li>
<p>You will then be prompted to input the <code>Skill ID</code> from the skill you created in previous step. (Tip: you may need switch back to Alexa Developer Console to copy the <code>Skill ID</code>.) Then click <code>Add</code>.</p>
</li>
<li>
<p>Scroll down to <code>Code source</code>, then, if it isn’t already open the <code>lambda_function.py</code>.</p>
</li>
<li>
<p>Clear the example code, and copy the Python script from: <a href="https://gist.github.com/matt2005/744b5ef548cc13d88d0569eea65f5e5b" rel="external nofollow">https://gist.github.com/matt2005/744b5ef548cc13d88d0569eea65f5e5b<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> (modified code to support Alexa’s proactive mode, see details below)</p>
</li>
<li>
<p>Click the <code>Deploy</code> button to publish updated code.</p>
</li>
<li>
<p>Navigate to the <code>Configuration</code> tab, then select <code>Environment variables</code>. You need to add 1 environment variable and, if needed, 3 optional variables. This is done by selecting <code>Edit</code> then adding the following:</p>
<ul>
<li>
<em>(required)</em> Key = BASE_URL, Value = your Home Assistant instance’s Internet accessible URL. <em>Do not include the trailing <code>/</code></em>.</li>
<li>
<em>(optional)</em> Key = NOT_VERIFY_SSL, Value = <em>True</em>. You can set this to <em>True</em> to ignore SSL issues, for example if you don’t have a valid SSL certificate or you are using a self-signed certificate.</li>
<li>
<em>(optional)</em> Key = DEBUG, Value = <em>True</em>. Set this variable to log the debug message and to allow the LONG_LIVED_ACCESS_TOKEN</li>
<li>
<em>(optional, not recommend)</em> Key = LONG_LIVED_ACCESS_TOKEN, Value = your Home Assistant Long-Lived Access Token. To avoid the use of a long-lived access token you will connect your Alexa Smart Home skill with your Home Assistant user account in the later steps, meaning you don’t need to add it here. However, the access token you got from login flow is only valid for 30 minutes. It will be hard for you to test lambda function with the access token in test data. So for your convenience, you can remove the access token from the test data, <a href="https://developers.home-assistant.io/docs/auth_api/#long-lived-access-token">generate a long-lived access token</a> put here, then the function will fall back to read token from environment variables. (tips: You did not enable the security storage for your environment variables, so your token saved here is not that safe. You should only use it for debugging and testing purpose. You should remove and delete the long-lived access token after you finish the debugging.)</li>
</ul>
</li>
</ul>
<p class="img">
  <img src="/images/integrations/alexa/lambda_function_env_var.png" alt="Screenshot: Environment variables in Lambda function">
</p>
<ul>
<li>Now click the <code>Save</code> button in the bottom right hand corner.</li>
<li>Next you need to copy the ARN displayed in the top of the page, which is the identity of this Lambda function. You will need this ARN to continue Alexa Smart Home skill configuration later.</li>
</ul>
<h3>Test the Lambda Function <a class="title-link" name="test-the-lambda-function" href="#test-the-lambda-function"></a>
</h3>
<p>Now, you have created the Lambda function, but before you can test it, you have to set up the necessary aspects of your Home Assistant configuration. Put the following minimal configuration into your <span class="terminology"><code>configuration.yaml</code><span class="terminology-tooltip">The configuration.yaml file is the main configuration file for Home Assistant. It lists the integrations to be loaded and their specific configurations. In some cases, the configuration needs to be edited manually directly in the configuration.yaml file. Most integrations can be configured in the UI.<a class="terminology-link" href="/docs/configuration/"> [Learn more]</a></span></span> file. It will expose all of your supported devices and automations to Alexa. It is strongly recommended to check the <a href="#alexa-smart-home-integration-configuration">configuration section</a> and setup control of which devices and entities are exposed.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">alexa</span><span class="pi">:</span>
  <span class="na">smart_home</span><span class="pi">:</span>
</code></pre></div></div>
<p>After your Home Assistant has restarted, go back to the <code>AWS Lambda Console</code>, you are going to do some tests.</p>
<ul>
<li>Navigate to the <code>Test</code> tab, then select <code>Create new event</code>
</li>
<li>Name your event, for example <code>Discovery</code>
</li>
<li>Enter the following data into the code box named <code>Event JSON</code>:</li>
</ul>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"directive"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"namespace"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Alexa.Discovery"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Discover"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"payloadVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"messageId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1bd5d003-31b9-476f-ad03-71d471922820"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BearerToken"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<ul>
<li>Click <code>Create</code> in the top right hand corner.</li>
</ul>
<p>This test event is a <code>Discovery</code> directive, your Home Assistant instance will respond with a list of devices Alexa can interact with. Since this test data is lacking a <code>token</code> in <code>payload.scope</code>, and your Lambda function will read the <code>LONG_LIVED_ACCESS_TOKEN</code> from environment variable.</p>
<p>Click the <code>Test</code> button. If you don’t have <code>LONG_LIVED_ACCESS_TOKEN</code> set, or you haven’t enabled <code>DEBUG</code> you will get a <code>INVALID_AUTHORIZATION_CREDENTIAL</code> response as the execution result.</p>
<p>You can login to your Home Assistant and <a href="https://developers.home-assistant.io/docs/auth_api/#long-lived-access-token">generate a long-lived access token</a>. After you have entered your long-lived access token into the environment variable <code>LONG_LIVED_ACCESS_TOKEN</code> and set the <code>DEBUG</code> environment variable to <code>True</code>, do not forget to click the <code>Save</code> button before you <code>Test</code> again.</p>
<p>This time, you will get a list of your devices in the response. 🎉</p>
<h2>Configure the Smart Home Service Endpoint <a class="title-link" name="configure-the-smart-home-service-endpoint" href="#configure-the-smart-home-service-endpoint"></a>
</h2>
<p>Now remove the long-lived access token (if you want), copy the ARN of your Lambda function, then navigate back to the <a href="https://developer.amazon.com/alexa/console/ask" rel="external nofollow">Alexa Developer Console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>. You will finish the configuration of the Smart Home skill.</p>
<ul>
<li>Return to the <a href="https://developer.amazon.com/alexa/console/ask" rel="external nofollow">Alexa Developer Console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>, and go to <code>Alexa Skills</code> page if you are not.</li>
<li>Find the skill you just created, click <code>Edit</code> link in the <code>Actions</code> column.</li>
<li>Click <code>SMART HOME</code> in the left navigation bar of build page.</li>
<li>Fill in <code>Default endpoint</code> under <code>2. Smart Home service endpoint</code> using the <code>ARN</code> you copied from your Lambda function configuration.</li>
</ul>
<h2>Account linking <a class="title-link" name="account-linking" href="#account-linking"></a>
</h2>
<p>Alexa needs to link your Amazon account to your Home Assistant account. Therefore Home Assistant can make sure only authenticated Alexa requests are able to access your home’s devices. In order to link the account, you have to make sure your Home Assistant can be accessed from Internet.</p>
<ul>
<li>
<p>Return to the <a href="https://developer.amazon.com/alexa/console/ask" rel="external nofollow">Alexa Developer Console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>, go to <code>Alexa Skills</code> page if you are not.</p>
</li>
<li>
<p>Find the skill you just created, click <code>Edit</code> link in the <code>Actions</code> column.</p>
</li>
<li>
<p>Click <code>ACCOUNT LINKING</code> in the left navigation bar of build page</p>
</li>
<li>
<p>Do not turn on the “Allow users to link their account to your skill from within your application or website” switch. This will require a Redirect URI, which won’t work.</p>
</li>
<li>
<p>Input all information required. Assuming your Home Assistant can be accessed by <code>https://[YOUR HOME ASSISTANT URL][:PORT]</code>, where <code>PORT</code> is the TCP port. The port can be omitted if it is <code>443</code>. For Alexa account linking, by default, the standard port 443 is used by default. Use your firewall to forward this, if needed:</p>
<ul>
<li>
<p><code>Authorization URI</code>: <code>https://[YOUR HOME ASSISTANT URL][:PORT]/auth/authorize</code></p>
</li>
<li>
<p><code>Access Token URI</code>: <code>https://[YOUR HOME ASSISTANT URL][:PORT]/auth/token</code></p>
<p>Although it is possible to assign a different port, it is preferable to use port 443, so in that case make sure your firewall/proxy is forwarding via port 443.</p>
<p>Read <a href="https://developer.amazon.com/en-US/docs/alexa/account-linking/requirements-account-linking.html" rel="external nofollow">more from the Alexa developer documentation<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> about requirements for account linking.</p>
<div class="alert alert-note">


<p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
<div class="alert-content">
<p>Despite the Alexa documentation’s disclaimer, however, <a href="https://letsencrypt.org/" rel="external nofollow">Let’s Encrypt<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> certificates are still accepted.</p>
</div>


</div>
<div class="alert alert-important">
  <p class="alert-title"><iconify-icon inline icon="mdi:message-alert-outline"></iconify-icon> Important</p>
  <div class="alert-content">
<p>You must use a valid/trusted SSL certificate for account linking to work.
Self signed certificates will not work, but you can use a free Let’s Encrypt certificate.</p>
  </div>
</div>
<ul>
<li>
<p><code>Client ID</code>:</p>
<ul>
<li>
<p><code>https://pitangui.amazon.com/</code> if you are in US or BR</p>
</li>
<li>
<p><code>https://layla.amazon.com/</code> if you are in EU</p>
</li>
<li>
<p><code>https://alexa.amazon.co.jp/</code> if you are in JP and AU (not verified yet)</p>
<p>The trailing slash is important here.</p>
</li>
</ul>
</li>
<li>
<p><code>Client Secret</code>: input anything you like, Home Assistant does not check this field</p>
</li>
<li>
<p><code>Your Authentication Scheme</code>: make sure you selected <em>Credentials in request body</em>. Home Assistant does not support <em>HTTP Basic</em>.</p>
</li>
<li>
<p><code>Scope</code>: Click <code>+ Add scope</code> and input <code>smart_home</code>, Home Assistant is not using it yet, we may use it in the future when we allow more fine-grained access control.</p>
</li>
<li>
<p>You can leave <code>Domain List</code> and <code>Default Access Token Expiration Time</code> as empty.</p>
</li>
</ul>
<p class="img">
  <img src="/images/integrations/alexa/account_linking.png" alt="Screenshot: Account Linking">
</p>
<ul>
<li>Click <code>Save</code> button in the top right corner.</li>
<li>Next, you will use the Alexa Mobile App to link your account.
<ul>
<li>In the Alexa app, navigate to <code>More</code> -&gt; <code>Skills &amp; Games</code> -&gt; <code>Your Skills</code> -&gt; <code>Dev</code>
</li>
<li>Click the Smart Home skill you just created.</li>
<li>Click <code>Enable to use</code>.</li>
<li>A new window will open to direct you to your Home Assistant’s login screen.</li>
<li>After you successfully login, you will be redirected back to the Alexa app.</li>
<li>Alexa should automatically start discovering your devices now! This is indicated by a blue ring on your physical devices</li>
<li>If not, ask Alexa to <code>Discover Devices</code>
</li>
</ul>
</li>
<li>Now, you can ask Alexa from your Echo or the Alexa App, <em>“Alexa, turn on bedroom light”</em> 🎉</li>
</ul>
<h2>Alexa Smart Home Integration Configuration <a class="title-link" name="alexa-smart-home-integration-configuration" href="#alexa-smart-home-integration-configuration"></a>
</h2>
<p>Example configuration:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">alexa</span><span class="pi">:</span>
  <span class="na">smart_home</span><span class="pi">:</span>
    <span class="na">locale</span><span class="pi">:</span> <span class="s">en-US</span>
    <span class="na">endpoint</span><span class="pi">:</span> <span class="s">https://api.amazonalexa.com/v3/events</span>
    <span class="na">client_id</span><span class="pi">:</span> <span class="s">YOUR_SKILL_CLIENT_ID</span>
    <span class="na">client_secret</span><span class="pi">:</span> <span class="s">YOUR_SKILL_CLIENT_SECRET</span>
    <span class="na">filter</span><span class="pi">:</span>
      <span class="na">include_entities</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">light.kitchen</span>
        <span class="pi">-</span> <span class="s">light.kitchen_left</span>
      <span class="na">include_entity_globs</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">binary_sensor.*_motion</span>
      <span class="na">include_domains</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">switch</span>
      <span class="na">exclude_entities</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">switch.outside</span>
    <span class="na">entity_config</span><span class="pi">:</span>
      <span class="na">light.kitchen</span><span class="pi">:</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Custom</span><span class="nv"> </span><span class="s">Name</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">Alexa"</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">The</span><span class="nv"> </span><span class="s">light</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">kitchen"</span>
      <span class="na">switch.stairs</span><span class="pi">:</span>
        <span class="na">display_categories</span><span class="pi">:</span> <span class="s">LIGHT</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="alexa-smart_home-configuration-variables" href="#alexa-smart_home-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> alexa </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="alexa" class="title-link" href="#alexa"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Alexa configuration</p>
</span></div>
<div class="nested"><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> smart_home </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="smart_home" class="title-link" href="#smart_home"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Alexa Smart Home configuration</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> locale </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: en-US</span>)</span><a name="locale" class="title-link" href="#locale"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The locale of your Alexa devices. Supported locales are <code>de-DE</code>,  <code>en-AU</code>, <code>en-CA</code>, <code>en-GB</code>, <code>en-IN</code>, <code>en-US</code>, <code>es-ES</code>, <code>es-MX</code>, <code>es-US</code>,<code>fr-CA</code>, <code>fr-FR</code>, <code>hi-IN</code>, <code>it-IT</code>, <code>ja-JP</code>, <code>nl-NL</code>, and <code>pt-BR</code>. See <a href="#alexa-locale">Alexa Locale</a> for additional information.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> endpoint </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="endpoint" class="title-link" href="#endpoint"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>To enable proactive events, you send a message to the Alexa event gateway, send it to the event endpoint that aligns with the geographic availability of your smart home skill. Following is the list of endpoints and the regions they cover. See <a href="#proactive-events">Proactive Events</a> for more information.</p>
<ul>
<li>North America: <code>https://api.amazonalexa.com/v3/events</code>
</li>
<li>Europe: <code>https://api.eu.amazonalexa.com/v3/events</code>
</li>
<li>Far East: <code>https://api.fe.amazonalexa.com/v3/events</code>
</li>
</ul>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> client_id </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="client_id" class="title-link" href="#client_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>See <a href="#proactive-events">Proactive Events</a> for more information.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> client_secret </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="client_secret" class="title-link" href="#client_secret"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>See <a href="#proactive-events">Proactive Events</a> for more information.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> filter </span><span class="config-vars-type">map</span><a name="filter" class="title-link" href="#filter"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Filter domains and entities for Alexa. (<a href="#configure-filter">Configure Filter</a>)</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> include_domains </span><span class="config-vars-type">list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="include_domains" class="title-link" href="#include_domains"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of domains to include (e.g., <code>light</code>).</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> exclude_domains </span><span class="config-vars-type">list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="exclude_domains" class="title-link" href="#exclude_domains"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of domains to exclude (e.g., <code>light</code>).</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> include_entity_globs </span><span class="config-vars-type">list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="include_entity_globs" class="title-link" href="#include_entity_globs"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Include all entities matching a listed pattern (e.g., <code>binary_sensor.*_motion</code>).</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> exclude_entity_globs </span><span class="config-vars-type">list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="exclude_entity_globs" class="title-link" href="#exclude_entity_globs"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Exclude all entities matching a listed pattern (e.g., <code>binary_sensor.*_motion</code>).</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> include_entities </span><span class="config-vars-type">list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="include_entities" class="title-link" href="#include_entities"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of entities to include (e.g., <code>light.attic</code>).</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> exclude_entities </span><span class="config-vars-type">list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="exclude_entities" class="title-link" href="#exclude_entities"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of entities to exclude (e.g., <code>light.attic</code>).</p>
</span></div>
</div>
</div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> entity_config </span><span class="config-vars-type">map</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="entity_config" class="title-link" href="#entity_config"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Configuration for specific entities. All subordinate keys are the corresponding entity ids or the domains, e.g., <code>alarm_control_panel.woowoo</code>.</p>
</span></div>
<div class="nested"><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> `<entity_id>` </entity_id></span><span class="config-vars-type">map</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="entity_id" class="title-link" href="#entity_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Additional options for specific entities.</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> name </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="name" class="title-link" href="#name"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Name of the entity to show in Amazon Alexa App.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> description </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="description" class="title-link" href="#description"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Description of the entity to show in Amazon Alexa App.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> display_categories </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="display_categories" class="title-link" href="#display_categories"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Display category and iconography each entity is shown in the Alexa app. Separate each category with a comma. First category is primary. e.g., <code>MUSIC_SYSTEM,STREAMING_DEVICE,SPEAKER</code>. See <a href="#alexa-display-categories">Alexa Display Categories</a> for a list of available categories.</p>
</span></div>
</div>
</div>
</div></div>
</div>
</div>
</div></div>
</div></div>
</div>
<!-- omit in toc -->
<h3>Alexa locale <a class="title-link" name="alexa-locale" href="#alexa-locale"></a>
</h3>
<p>The <code>locale</code> should match the location and language used for your Amazon echo devices.</p>
<p>The supported locales are:</p>
<ul>
<li><code>de-DE</code></li>
<li><code>en-AU</code></li>
<li><code>en-CA</code></li>
<li><code>en-GB</code></li>
<li><code>en-IN</code></li>
<li><code>en-US</code></li>
<li><code>es-ES</code></li>
<li><code>es-MX</code></li>
<li><code>es-US</code></li>
<li><code>fr-CA</code></li>
<li><code>fr-FR</code></li>
<li><code>hi-IN</code></li>
<li><code>it-IT</code></li>
<li><code>ja-JP</code></li>
<li><code>nl-NL</code></li>
<li><code>pt-BR</code></li>
</ul>
<p>See <a href="https://developer.amazon.com/docs/alexa/device-apis/list-of-interfaces.html" rel="external nofollow">List of Capability Interfaces and Supported Locales<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</p>
<!-- omit in toc -->
<h3>Proactive events <a class="title-link" name="proactive-events" href="#proactive-events"></a>
</h3>
<p>The <code>endpoint</code>, <code>client_id</code> and <code>client_secret</code> are optional, and are only required if you want to enable Alexa’s proactive mode (i.e., “Send Alexa Events” enabled). Please note the following if you want to enable proactive mode:</p>
<ul>
<li>There are different endpoint URLs, depending on the region of your skill. Please check the available endpoints at <a href="https://developer.amazon.com/docs/smarthome/send-events.html#endpoints" rel="external nofollow">https://developer.amazon.com/docs/smarthome/send-events.html#endpoints<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>
</li>
<li>The <code>client_id</code> and <code>client_secret</code> are not the ones used by the skill that have been set up using “Login with Amazon” (in the <a href="https://developer.amazon.com/alexa/console/ask" rel="external nofollow">Alexa Developer Console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>: Build &gt; Account Linking), but rather from the “Alexa Skill Messaging” (in the Alexa Developer Console: Build &gt; Permissions &gt; Alexa Skill Messaging). To get them, you need to enable the “Send Alexa Events” permission.</li>
<li>If the “Send Alexa Events” permission was not enabled previously, you need to unlink and relink the skill using the Alexa App, or else Home Assistant will show the following error: “Token invalid and no refresh token available. Also, you need to restart your Home Assistant after each disabling/enabling the skill in Alexa.”</li>
</ul>
<!-- omit in toc -->
<h3>Configure filter <a class="title-link" name="configure-filter" href="#configure-filter"></a>
</h3>
<p>By default, no entity will be excluded. To limit which entities are being exposed to Alexa, you can use the <code>filter</code> parameter. Keep in mind that only <a href="#supported-platforms">supported platforms</a> can be added.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example filter to include specified domains and exclude specified entities</span>
<span class="na">alexa</span><span class="pi">:</span>
  <span class="na">smart_home</span><span class="pi">:</span>
    <span class="na">filter</span><span class="pi">:</span>
      <span class="na">include_domains</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">alarm_control_panel</span>
        <span class="pi">-</span> <span class="s">light</span>
      <span class="na">include_entity_globs</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">binary_sensor.*_occupancy</span>
      <span class="na">exclude_entities</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">light.kitchen_light</span>
</code></pre></div></div>
<p>Filters are applied as follows:</p>
<ol>
<li>No filter
<ul>
<li>All entities included</li>
</ul>
</li>
<li>Only includes
<ul>
<li>Entity listed in entities include: include</li>
<li>Otherwise, entity matches domain include: include</li>
<li>Otherwise, entity matches glob include: include</li>
<li>Otherwise: exclude</li>
</ul>
</li>
<li>Only excludes
<ul>
<li>Entity listed in exclude: exclude</li>
<li>Otherwise, entity matches domain exclude: exclude</li>
<li>Otherwise, entity matches glob exclude: exclude</li>
<li>Otherwise: include</li>
</ul>
</li>
<li>Domain and/or glob includes (may also have excludes)
<ul>
<li>Entity listed in entities include: include</li>
<li>Otherwise, entity listed in entities exclude: exclude</li>
<li>Otherwise, entity matches glob include: include</li>
<li>Otherwise, entity matches glob exclude: exclude</li>
<li>Otherwise, entity matches domain include: include</li>
<li>Otherwise: exclude</li>
</ul>
</li>
<li>Domain and/or glob excludes (no domain and/or glob includes)
<ul>
<li>Entity listed in entities include: include</li>
<li>Otherwise, entity listed in exclude: exclude</li>
<li>Otherwise, entity matches glob exclude: exclude</li>
<li>Otherwise, entity matches domain exclude: exclude</li>
<li>Otherwise: include</li>
</ul>
</li>
<li>No Domain and/or glob includes or excludes
<ul>
<li>Entity listed in entities include: include</li>
<li>Otherwise: exclude</li>
</ul>
</li>
</ol>
<p>The following characters can be used in entity globs:</p>
<p><code>*</code> - The asterisk represents zero, one, or multiple characters
<code>?</code> - The question mark represents zero or one character</p>
<p>See the <a href="#troubleshooting">troubleshooting</a> if you’re experiencing issues setting up the integration.</p>
<!-- omit in toc -->
<h3>Alexa Display Categories <a class="title-link" name="alexa-display-categories" href="#alexa-display-categories"></a>
</h3>
<p>Configure a display category to override the display category and iconography each entity is shown in the Alexa app. This makes it easier to find and monitor devices.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">light.kitchen_light</span><span class="pi">:</span>
  <span class="na">display_categories</span><span class="pi">:</span> <span class="s">LIGHT,SWITCH</span>
</code></pre></div></div>
<div class="alert alert-note">
  <p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
  <div class="alert-content">
<p>Devices such as cameras, garage doors, and alarm control panels require specific display categories to provide all available features from Amazon Alexa. Overriding the default display category will limit features provided by Amazon Alexa.</p>
  </div>
</div>
<p>See <a href="https://developer.amazon.com/docs/alexa/device-apis/alexa-discovery.html#display-categories" rel="external nofollow">Alexa Display Categories<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> for a complete list</p>
<h2>Supported platforms <a class="title-link" name="supported-platforms" href="#supported-platforms"></a>
</h2>
<p>Home Assistant supports the following integrations through Alexa using a Smart Home Skill. For Home Assistant Cloud Users, documentation can be found <a href="https://www.nabucasa.com/config/amazon_alexa/">here<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</p>
<p>The following paragraphs explain the features of the platforms that are currently supported.</p>
<h3>Alarm control panel <a class="title-link" name="alarm-control-panel" href="#alarm-control-panel"></a>
</h3>
<p>Arm and disarm Alarm control panel entities. Ask Alexa for the state of the alarm control panel entity.</p>
<ul>
<li><em>“Alexa, arm my home in away mode.”</em></li>
<li><em>“Alexa, arm my home.”</em></li>
<li><em>“Alexa, disarm my home.”</em></li>
<li><em>“Alexa, is my home armed?”</em></li>
</ul>
<h4>Arming <a class="title-link" name="arming" href="#arming"></a>
</h4>
<p>The alarm control panel state must be in the <code>disarmed</code> state before arming. Alexa does not support switching from an armed state without first disarming, e.g., switching from <code>armed_home</code> to <code>armed_night</code>.</p>
<p>The alarm control panel state <code>armed_custom_bypass</code> isn’t supported by Alexa and is treated as <code>armed_home</code>.</p>
<div class="alert alert-note">
  <p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
  <div class="alert-content">
<p>Alexa does not support arming with voice PIN at this time. Therefore if the alarm control panel requires a <code>code</code> for arming or the <code>code_arm_required</code> attribute is <code>true</code>, the entity will not be exposed during discovery.
The alarm control panel may default the <code>code_arm_required</code> attribute to <code>true</code> even if the platform does not support or require it. Use the <a href="/docs/configuration/customizing-devices/#customization-using-the-ui">entity customization tool</a> to override <code>code_arm_required</code> to <code>false</code> and expose the alarm control panel during discovery.</p>
  </div>
</div>
<h4>Disarming <a class="title-link" name="disarming" href="#disarming"></a>
</h4>
<p>Users must opt-in to the disarm by voice feature in the Alexa App. Alexa will require a 4 digit voice personal identification number (PIN) for disarming. Configure a 4 digit PIN in the Alexa app, or use an existing 4 digit PIN code configured for the alarm control panel.</p>
<p class="img">
<a href="/images/integrations/alexa/alexa_app_security_system_pin.png" target="_blank">
  <img height="460" src="/images/integrations/alexa/alexa_app_security_system_pin.png" alt="Screenshot: Alexa App Security System PIN"></a>
</p>
<p>To use the existing code configured for the alarm control panel the <code>code</code> must be 4 digits and the <code>code_format</code> attribute must be <code>number</code>. After discovery, the Alexa app will offer the ability to use the existing <code>code</code>, or create an additional 4 digit PIN to use with Alexa.</p>
<p>The existing code is never communicated to Alexa from Home Assistant. During disarming, Alexa will ask for a PIN. The PIN spoken to Alexa is relayed to Home Assistant and passed to the <code>alarm_control_panel.alarm_disarm</code> action. If the <code>alarm_control_panel.alarm_disarm</code> action fails for any reason, it is assumed the PIN was incorrect and reported to Alexa as an invalid PIN.</p>
<h3>Alert, Automation, Group <a class="title-link" name="alert-automation-group" href="#alert-automation-group"></a>
</h3>
<p>Turn on and off Alert, Automation, and Group entities as switches.</p>
<ul>
<li><em>“Alexa, turn on the front door alert.”</em></li>
<li><em>“Alexa, turn off energy saving automations.”</em></li>
<li><em>“Alexa, Downstairs to on.”</em></li>
</ul>
<h3>Binary sensor <a class="title-link" name="binary-sensor" href="#binary-sensor"></a>
</h3>
<p>Requires <a href="#proactive-events">Proactive Events</a> enabled.</p>
<p>Binary Sensors with a <a href="/integrations/binary_sensor/#device-class"><code>device_class</code></a> attribute of <code>door</code> <code>garage_door</code> <code>opening</code> <code>window</code> <code>motion</code> <code>presense</code> are supported.</p>
<table>
<thead>
<tr>
<th align="center"><code>device_class</code></th>
<th align="center">Alexa Sensor Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>door</code></td>
<td align="center">Contact</td>
</tr>
<tr>
<td align="center"><code>garage_door</code></td>
<td align="center">Contact</td>
</tr>
<tr>
<td align="center"><code>opening</code></td>
<td align="center">Contact</td>
</tr>
<tr>
<td align="center"><code>window</code></td>
<td align="center">Contact</td>
</tr>
<tr>
<td align="center"><code>motion</code></td>
<td align="center">Motion</td>
</tr>
<tr>
<td align="center"><code>presense</code></td>
<td align="center">Motion</td>
</tr>
</tbody>
</table>
<p>Ask Alexa for the state of a contact sensor.</p>
<ul>
<li><em>“Alexa, is the bedroom window open?”</em></li>
</ul>
<h4>Routines <a class="title-link" name="routines" href="#routines"></a>
</h4>
<p>Requires <a href="#proactive-events">Proactive Events</a> enabled.</p>
<p>Alexa Routines can be triggered with Binary Sensors exposed as contact or motion sensors.</p>
<p>Use the <a href="/docs/configuration/customizing-devices/#customization-using-the-ui">Entity Customization Tool</a> to override the <code>device_class</code> attribute to expose a <code>binary_sensor</code> to Alexa.</p>
<h3>Button, Input Button <a class="title-link" name="button-input-button" href="#button-input-button"></a>
</h3>
<p>Activate Buttons and Input Buttons with the button name, or <em>“turn on”</em> utterance. They will appear in the Alexa app as scenes.</p>
<ul>
<li><em>“Alexa, Ring Phone.”</em></li>
<li><em>“Alexa, turn on Ring Phone.”</em></li>
</ul>
<h4>Routines <a class="title-link" name="routines-1" href="#routines-1"></a>
</h4>
<p>Requires <a href="#proactive-events">Proactive Events</a> enabled.</p>
<p>Alexa Routines can be triggered when Buttons and Input Buttons are pressed.</p>
<p>In order to enable this, buttons will appear to have “presence detection” capability. This is what allows this functionality since Alexa does not support button type devices. To trigger a routine when a button is pressed, select the button in the when menu and then select the “Person” capability.</p>
<p class="img">
<a href="/images/integrations/alexa/alexa_app_button_trigger.png" target="_blank">
  <img height="460" src="/images/integrations/alexa/alexa_app_button_trigger.png" alt="Screenshot: Alexa App Button Routine Trigger"></a>
</p>
<h4>Doorbell announcement with binary_sensor <a class="title-link" name="doorbell-announcement-with-binary_sensor" href="#doorbell-announcement-with-binary_sensor"></a>
</h4>
<p>Requires <a href="#proactive-events">Proactive Events</a> enabled.</p>
<p>Note that Home Assistant can support a doorbell natively with an <code>event</code> entity with <code>device_class</code> to <code>doorbell</code></p>
<p>Configure a <code>binary_sensor</code> with <code>display_category</code> of <code>DOORBELL</code> in the <a href="#entity_config"><code>entity_config</code></a> to gain access to the doorbell notification settings in the Alexa App. Note that Home Assistant can support this natively with an <code>event</code> entity.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">alexa</span><span class="pi">:</span>
  <span class="na">smart_home</span><span class="pi">:</span>
    <span class="na">entity_config</span><span class="pi">:</span>
      <span class="na">binary_sensor.alexa_doorbell</span><span class="pi">:</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Front</span><span class="nv"> </span><span class="s">Door"</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Doorbell</span><span class="nv"> </span><span class="s">Binary</span><span class="nv"> </span><span class="s">Sensor"</span>
        <span class="na">display_categories</span><span class="pi">:</span> <span class="s">DOORBELL</span>
</code></pre></div></div>
<p>Alexa will announce on all echo devices <em>“Someone is at the [entity name]”</em> when a <code>binary_sensor</code> state changes from <code>off</code> to <code>on</code>.</p>
<p>See also <a href="#event-entities">Event entities</a>.</p>
<h4>Presence Detection with Binary Sensor <a class="title-link" name="presence-detection-with-binary-sensor" href="#presence-detection-with-binary-sensor"></a>
</h4>
<p>Requires <a href="#proactive-events">Proactive Events</a> enabled.</p>
<p>Configure a <code>binary_sensor</code> that has a <code>device_class</code> attribute of <code>motion</code> or <code>presence</code> and configure <code>display_category</code> to <code>CAMERA</code> in the <a href="#entity_config"><code>entity_config</code></a> to gain access the presence detected notification settings in the Alexa App.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">alexa</span><span class="pi">:</span>
  <span class="na">smart_home</span><span class="pi">:</span>
    <span class="na">entity_config</span><span class="pi">:</span>
      <span class="na">binary_sensor.driveway_presence</span><span class="pi">:</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Driveway"</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Driveway</span><span class="nv"> </span><span class="s">Presence</span><span class="nv"> </span><span class="s">Sensor"</span>
        <span class="na">display_categories</span><span class="pi">:</span> <span class="s">CAMERA</span>
</code></pre></div></div>
<p>Alexa will announce on all echo devices <em>“Person detected at [entity name]”</em>.</p>
<div class="alert alert-important">
  <p class="alert-title"><iconify-icon inline icon="mdi:message-alert-outline"></iconify-icon> Important</p>
  <div class="alert-content">
<p>Each Echo device will need the communication and Announcements setting enabled, and the Do Not Disturb feature turned off.</p>
  </div>
</div>
 <p class="img">
   <a href="/images/integrations/alexa/alexa_app_person_detection.png" target="_blank">
   <img height="460" src="/images/integrations/alexa/alexa_app_person_detection.png" alt="Screenshot: Alexa App Person Detection Notification"></a>
 </p>
<p><a href="#image-processing">Image Processing</a> entities also support this notification.</p>
<h3>Camera <a class="title-link" name="camera" href="#camera"></a>
</h3>
<p>View a camera stream on an Amazon echo device.</p>
<ul>
<li><em>“Alexa, show the front door camera.”</em></li>
</ul>
<p>The <a href="/integrations/stream/"><code>stream</code></a> integration is required to stream cameras to Amazon echo devices.</p>
<p>The Amazon echo device will request the camera stream from Home Assistant. The Home Assistant URL must be accessible from the network the Amazon echo device is connected to and must support HTTPS on port 443 with a certificate signed by <a href="https://ccadb-public.secure.force.com/mozilla/IncludedCACertificateReport" rel="external nofollow">an Amazon approved certificate authority<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>. These requirements can be satisfied with Home Assistant Cloud, or LetsEncrypt/DuckDNS.</p>
<p>Enable preload stream option for cameras used with echo devices to reduce response time, and prevent timing out before the 6 second limit.</p>
<h3>Climate <a class="title-link" name="climate" href="#climate"></a>
</h3>
<p>Single, double, and triple set-point thermostats are supported. The temperature value from the thermostat will also be exposed at a separate <a href="#sensor">temperature sensor</a>.</p>
<h4>Set Thermostat Temperature <a class="title-link" name="set-thermostat-temperature" href="#set-thermostat-temperature"></a>
</h4>
<ul>
<li><em>“Alexa, set thermostat to 20.”</em></li>
<li><em>“Alexa, set the AC to 75.”</em></li>
<li><em>“Alexa, make it warmer in here.”</em></li>
<li><em>“Alexa, make it cooler in here.”</em></li>
</ul>
<h4>Thermostat Mode <a class="title-link" name="thermostat-mode" href="#thermostat-mode"></a>
</h4>
<ul>
<li>
<p><em>“Alexa, set living room thermostat to automatic.”</em></p>
</li>
<li>
<p><code>DRY</code> is shown in Alexa app as <code>DEHUMIDIFY</code></p>
</li>
<li>
<p><code>ECO</code> is handled as a <code>preset</code> in Home Assistant, and will not display in the Alexa app.</p>
</li>
<li>
<p><code>FAN_ONLY</code> is not supported by the Alexa voice model and is shown as <code>OFF</code> in the Alexa App.</p>
</li>
</ul>
<p>To change the thermostat mode, the exact utterance must be used:</p>
<ul>
<li><em>“Alexa, set [entity name] to [mode utterance].”</em></li>
</ul>
<p>If the climate entity supports on/off, use <em>“turn on”</em> and <em>“turn off”</em> utterances with the entity name or the mode utterance.</p>
<ul>
<li><em>“Alexa, turn on the [mode utterance].”</em></li>
<li><em>“Alexa, turn off the [entity name].”</em></li>
</ul>
<p>Alexa supports the following utterances value for climate thermostat mode:</p>
<table>
<thead>
<tr>
<th>HA Climate Mode</th>
<th>Alexa Mode Utterances</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AUTO</code></td>
<td>
<em>“auto”</em>, <em>“automatic”</em>
</td>
</tr>
<tr>
<td><code>COOL</code></td>
<td>
<em>“cool”</em>, <em>“cooling”</em>
</td>
</tr>
<tr>
<td><code>HEAT</code></td>
<td>
<em>“heat”</em>, <em>“heating”</em>
</td>
</tr>
<tr>
<td><code>ECO</code></td>
<td>
<em>“eco”</em>, <em>“economical”</em>
</td>
</tr>
<tr>
<td><code>DRY</code></td>
<td>
<em>“dry”</em>, <em>“dehumidify”</em>
</td>
</tr>
<tr>
<td><code>OFF</code></td>
<td><em>“off”</em></td>
</tr>
</tbody>
</table>
<h3>Cover <a class="title-link" name="cover" href="#cover"></a>
</h3>
<p>Covers should be configured with the appropriate <code>device_class</code>.</p>
<p>Covers with a <code>device_class</code> of <code>blind</code>, <code>shade</code>, <code>curtin</code> are shown as an Interior Blind in the Alexa App and Covers with a <code>window</code>, <code>awning</code>, or <code>shutter</code> will show as an Exterior Blind.</p>
<p>Covers with the <code>device_class</code> of <code>garage</code> are shown as a <a href="#garage-doors">Garage Door</a> and support the Open by Voice PIN feature.</p>
<p>Use the <a href="/docs/configuration/customizing-devices/#customization-using-the-ui">Entity Customization Tool</a> to override the <code>device_class</code> attribute to correctly expose a <code>cover</code> to Alexa.</p>
<h4>Open/Close/Raise/Lower <a class="title-link" name="opencloseraiselower" href="#opencloseraiselower"></a>
</h4>
<p>Home Assistant configures covers with semantics that provide <em>“raise”</em>, <em>“lower”</em>, <em>“open”</em>, <em>“close”</em> utterances for covers. In addition to semantics <em>“turn on”</em> / <em>“turn off”</em> utterances will also work.</p>
<ul>
<li><em>“Alexa, open the garage door.”</em></li>
<li><em>“Alexa, close the curtain.”</em></li>
<li><em>“Alexa, lower the shades.”</em></li>
<li><em>“Alexa, raise the roof!”</em></li>
</ul>
<p>Semantics are assigned based on the features supported by the cover. If the cover supports tilt functionality, the semantics <em>“open”</em> and <em>“close”</em> are assigned to the tilt functionality, and the semantics <em>“raise”</em> and <em>“lower”</em> are assigned to the position functionality.</p>
<p>If the cover does not support tilt, all semantics <em>“raise”</em>, <em>“lower”</em>, <em>“open”</em>, <em>“close”</em> are assigned to the position functionality.</p>
<h4>Set Cover Position <a class="title-link" name="set-cover-position" href="#set-cover-position"></a>
</h4>
<p>Covers that support a set position can be controlled using percentages.</p>
<ul>
<li><em>“Alexa, set the [entity name] position to thirty percent.”</em></li>
<li><em>“Alexa, increase [entity name] position by ten percent.”</em></li>
<li><em>“Alexa, decrease [entity name] position by twenty percent.”</em></li>
</ul>
<table>
<thead>
<tr>
<th>Locale</th>
<th>Friendly Name Synonyms</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>en-US</code></td>
<td>
<em>“position”</em>, <em>“opening”</em>
</td>
</tr>
</tbody>
</table>
<p>Currently, Alexa only supports friendly name synonyms for the <code>en-US</code> locale.</p>
<h4>Set Cover Tilt <a class="title-link" name="set-cover-tilt" href="#set-cover-tilt"></a>
</h4>
<p>Covers that support tilt position can be controlled using percentages.</p>
<ul>
<li><em>“Alexa, set the [entity name] tilt to thirty percent.”</em></li>
<li><em>“Alexa, increase [entity name] tilt by ten percent.”</em></li>
<li><em>“Alexa, decrease [entity name] tilt by twenty percent.”</em></li>
</ul>
<table>
<thead>
<tr>
<th>Locale</th>
<th>Friendly Name Synonyms</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>en-US</code></td>
<td>
<em>“tilt”</em>, <em>“angle”</em>, <em>“direction”</em>
</td>
</tr>
</tbody>
</table>
<p>Currently, Alexa only supports friendly name synonyms for the <code>en-US</code> locale.</p>
<h4>Stop the Covers operation <a class="title-link" name="stop-the-covers-operation" href="#stop-the-covers-operation"></a>
</h4>
<p>To stop the covers operation, say:</p>
<ul>
<li><em>“Alexa, stop [entity name].”</em></li>
</ul>
<p>If your cover supports the <code>STOP</code> feature, this will stop the cover operation.
If your cover supports the <code>STOP_TILT</code> feature, this will stop the cover tilt operation.
If both features are enabled, both the cover and the cover tilt will be stopped.</p>
<h4>Garage doors <a class="title-link" name="garage-doors" href="#garage-doors"></a>
</h4>
<p>Covers with a <code>device_class</code> of <code>garage</code> support the Open by Voice PIN feature in the Alexa app. Configure a 4 digit PIN code to open the garage door in the Alexa app.</p>
<p class="img">
<a href="/images/integrations/alexa/alexa_app_garage_door_pin.png" target="_blank">
  <img height="460" src="/images/integrations/alexa/alexa_app_garage_door_pin.png" alt="Screenshot: Alexa App Garage Door Open by voice"></a>
</p>
<h3>Event entities <a class="title-link" name="event-entities" href="#event-entities"></a>
</h3>
<p>Requires <a href="#proactive-events">Proactive Events</a> enabled.</p>
<h4>Doorbell events <a class="title-link" name="doorbell-events" href="#doorbell-events"></a>
</h4>
<p>Home Assistant <code>event</code> entities can trigger a doorbell announcement in Alexa if the <code>device_class</code> of the <code>event</code> entity is set to <code>doorbell</code>.
Alexa will announce on all echo devices <em>“Someone is at the [entity name]”</em> when an <code>event</code> entity has received an updated.</p>
<div class="alert alert-note">
  <p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
  <div class="alert-content">
<p>Each Amazon Echo device will need the communication and announcements setting enabled and the Do Not Disturb feature turned off.</p>
  </div>
</div>
<p class="img">
<a href="/images/integrations/alexa/alexa_app_doorbell_announcement.png" target="_blank">
  <img height="460" src="/images/integrations/alexa/alexa_app_doorbell_announcement.png" alt="Screenshot: Alexa App Doorbell Notification"></a>
</p>
<h3>Fan <a class="title-link" name="fan" href="#fan"></a>
</h3>
<p>Control fan speed, direction, and oscillation.</p>
<h4>Fan speed <a class="title-link" name="fan-speed" href="#fan-speed"></a>
</h4>
<p>The fan device must support percentage based speeds with the <code>percentage</code> attribute.</p>
<ul>
<li><em>“Alexa, set the fan speed to three.”</em></li>
<li><em>“Alexa, set the fan speed to fifty percent.”</em></li>
<li><em>“Alexa, set the fan power level to fifty percent.”</em></li>
<li><em>“Alexa, turn up the speed on the tower fan.”</em></li>
<li><em>“Alexa, set the air speed on the tower fan to maximum.”</em></li>
</ul>
<h4>Fan Preset Mode <a class="title-link" name="fan-preset-mode" href="#fan-preset-mode"></a>
</h4>
<p>The fan device must support the <code>preset_mode</code> attribute.</p>
<ul>
<li><em>“Alexa, set the fan preset to eco.”</em></li>
<li><em>“Alexa, set the fan preset to smart.”</em></li>
<li><em>“Alexa, set the fan preset to auto.”</em></li>
</ul>
<p>Currently, Alexa only supports <code>en-US</code> locale for preset modes.</p>
<h4>Fan Direction <a class="title-link" name="fan-direction" href="#fan-direction"></a>
</h4>
<p>The fan device must support the <code>direction</code> attribute.</p>
<ul>
<li><em>“Alexa, set the fan direction to forward.”</em></li>
<li><em>“Alexa, set the fan direction to reverse.”</em></li>
</ul>
<h4>Fan Oscillation <a class="title-link" name="fan-oscillation" href="#fan-oscillation"></a>
</h4>
<p>The fan device must support the <code>oscillating</code> attribute.</p>
<ul>
<li><em>“Alexa, is oscillate on for the tower fan?”</em></li>
<li><em>“Alexa, turn on swivel for the tower fan.”</em></li>
<li><em>“Alexa, turn on oscillation mode for the table fan.”</em></li>
</ul>
<table>
<thead>
<tr>
<th>Locale</th>
<th>Friendly Name Synonyms</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>en-US</code></td>
<td>
<em>“oscillate”</em>, <em>“swivel”</em>, <em>“oscillation”</em>, <em>“spin”</em>, <em>“back and forth”</em>
</td>
</tr>
</tbody>
</table>
<p>Currently, Alexa only supports friendly name synonyms for the <code>en-US</code> locale.</p>
<h3>Humidifier <a class="title-link" name="humidifier" href="#humidifier"></a>
</h3>
<p>Control power, target humidity and mode.</p>
<h4>Humidifier target humidity <a class="title-link" name="humidifier-target-humidity" href="#humidifier-target-humidity"></a>
</h4>
<ul>
<li><em>“Alexa, set the [entity name] humidity to fifty percent.”</em></li>
</ul>
<h4>Humidifier Mode <a class="title-link" name="humidifier-mode" href="#humidifier-mode"></a>
</h4>
<p>The humidifier device must support the <code>mode</code> attribute.</p>
<ul>
<li><em>“Alexa, set the [entity name] mode to eco.”</em></li>
</ul>
<h3>Image Processing <a class="title-link" name="image-processing" href="#image-processing"></a>
</h3>
<p>Requires <a href="#proactive-events">Proactive Events</a> enabled.</p>
<h4>Presence Detection Notification <a class="title-link" name="presence-detection-notification" href="#presence-detection-notification"></a>
</h4>
<p>All <code>image_processing</code> entities support the presence detected notification settings in the Alexa App. Any state change will trigger the notification.</p>
<p>Alexa will announce on all echo devices <em>“Person detected at [entity name]”</em>.</p>
 <p class="img">
   <a href="/images/integrations/alexa/alexa_app_person_detection.png" target="_blank">
   <img height="460" src="/images/integrations/alexa/alexa_app_person_detection.png" alt="Screenshot: Alexa App Person Detection Notification"></a>
 </p>
<div class="alert alert-note">
  <p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
  <div class="alert-content">
<p>Display category will default to <code>CAMERA</code> to enable presence detected notification settings in the Alexa App. Each Echo device will need the communication and Announcements setting enabled, and the Do Not Disturbed feature turned off.</p>
  </div>
</div>
<h3>Input Number and Number <a class="title-link" name="input-number-and-number" href="#input-number-and-number"></a>
</h3>
<p>Control an <code>input_number</code> or <code>number</code> entity with Alexa. Configures Alexa with the <code>min</code>, <code>max</code>, <code>step</code>, and <code>unit_of_measurement</code> attributes for the entity.</p>
<ul>
<li><em>“Alexa, set [entity name] to forty five [unit of measurement].”</em></li>
<li><em>“Alexa, increase the [entity name] by two.”</em></li>
<li><em>“Alexa, set the [entity name] to maximum.”</em></li>
</ul>
<p>The following table lists the possible friendly name synonyms available for a Input Number or Number with <code>min: -90, max: 90, step: 45, unit_of_measurement: degrees</code>.</p>
<table>
<thead>
<tr>
<th>Fan Range</th>
<th>Friendly Name Synonyms</th>
</tr>
</thead>
<tbody>
<tr>
<td>-90</td>
<td>
<em>“negative ninety”</em>, <em>“minimum”</em>, <em>“min”</em>
</td>
</tr>
<tr>
<td>-45</td>
<td><em>“negative forty five”</em></td>
</tr>
<tr>
<td>0</td>
<td><em>“zero”</em></td>
</tr>
<tr>
<td>45</td>
<td><em>“forty five”</em></td>
</tr>
<tr>
<td>90</td>
<td>
<em>“ninety”</em>, <em>“maximum”</em>, <em>“max”</em>
</td>
</tr>
</tbody>
</table>
<p>The <code>unit_of_measurement</code> will be used to select a supported unit label from the <a href="https://developer.amazon.com/en-US/docs/alexa/device-apis/resources-and-assets.html#global-alexa-catalog" rel="external nofollow">Global Alexa catalog<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>. If there is no match it will be assigned a preset controller.</p>
<p>The following units are supported: °C, °F, K, m, km, mi, yd, in, kg, g, oz, lb, L, ft³, m³, gal and %</p>
<h3>Light <a class="title-link" name="light" href="#light"></a>
</h3>
<p>Control lights with <em>“turn on”</em> and <em>“turn off”</em> utterances, adjust brightness, color, and temperature.</p>
<ul>
<li><em>“Alexa, turn on the bathroom light.”</em></li>
<li><em>“Alexa, turn off the patio light.”</em></li>
</ul>
<h4>Brightness <a class="title-link" name="brightness" href="#brightness"></a>
</h4>
<p>Lights that support brightness can be adjusted with percentages ranging from 0 to 100 percent.</p>
<ul>
<li><em>“Alexa, set the bedroom light to fifty percent.”</em></li>
<li><em>“Alexa, living room lights to one hundred percent.”</em></li>
</ul>
<p>The <em>“dim”</em> utterance will decrease the brightness of a light 25 percentage points.</p>
<ul>
<li><em>“Alexa, dim the bathroom light.”</em></li>
</ul>
<h4>Color Temperature <a class="title-link" name="color-temperature" href="#color-temperature"></a>
</h4>
<p>Adjust lights that support color temperature using the following friendly names:</p>
<ul>
<li><em>“Alexa, set the dining room softer.”</em></li>
<li><em>“Alexa, make the living room warmer.”</em></li>
<li><em>“Alexa, set the dining room cooler.”</em></li>
<li><em>“Alexa, make the living room light whiter.”</em></li>
<li><em>“Alexa, make the living room warm white.”</em></li>
<li><em>“Alexa, set the kitchen to daylight.”</em></li>
</ul>
<p>The following table lists the possible friendly name synonyms available to lights that support color temperature.</p>
<table>
<thead>
<tr>
<th>Color Temperature in Kelvin</th>
<th>Friendly Name Synonyms</th>
</tr>
</thead>
<tbody>
<tr>
<td>2200</td>
<td>
<em>“warm”</em>, <em>“warm white”</em>
</td>
</tr>
<tr>
<td>2700</td>
<td>
<em>“incandescent”</em>, <em>“soft white”</em>
</td>
</tr>
<tr>
<td>4000</td>
<td><em>“white”</em></td>
</tr>
<tr>
<td>5500</td>
<td>
<em>“daylight”</em>, <em>“daylight white”</em>
</td>
</tr>
<tr>
<td>7000</td>
<td>
<em>“cool”</em>, <em>“cool white”</em>
</td>
</tr>
</tbody>
</table>
<p>Use <em>“warmer”</em>, <em>“softer”</em>, <em>“cooler</em>, <em>“whiter”</em> utterances to adjust color temperature by 50 <code>mired</code> (approximately 300-500 degree kelvin change).</p>
<ul>
<li><em>“Alexa, set the dining room softer.”</em></li>
<li><em>“Alexa, make the living room warmer.”</em></li>
<li><em>“Alexa, set the dining room cooler.”</em></li>
<li><em>“Alexa, make the living room light whiter.”</em></li>
</ul>
<h4>Color <a class="title-link" name="color" href="#color"></a>
</h4>
<p>Set the light color using the CSS <a href="https://drafts.csswg.org/css-color-3/#html4" rel="external nofollow">basic color keywords<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> or <a href="https://drafts.csswg.org/css-color-3/#svg-color" rel="external nofollow">extended color keywords<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> as the friendly color name.</p>
<ul>
<li><em>“Alexa, set the front porch light to blue.”</em></li>
<li><em>“Alexa, set the bedroom light to red.”</em></li>
<li><em>“Alexa, change the kitchen to the color crimson.”</em></li>
</ul>
<h3>Lock <a class="title-link" name="lock" href="#lock"></a>
</h3>
<ul>
<li><em>“Alexa, lock my front door.”</em></li>
<li><em>“Alexa, unlock the dungeon.”</em></li>
</ul>
<h4>Unlocking <a class="title-link" name="unlocking" href="#unlocking"></a>
</h4>
<p>To unlock, Alexa will require a 4 digit voice personal identification number (PIN) for unlocking. Configure a 4 digit PIN in the Alexa app to unlock locks.</p>
<h3>Media Player <a class="title-link" name="media-player" href="#media-player"></a>
</h3>
<h4>Change Channel <a class="title-link" name="change-channel" href="#change-channel"></a>
</h4>
<ul>
<li><em>“Alexa, change the channel to 200 on the Living Room TV.”</em></li>
<li><em>“Alexa, change the channel to PBS on the TV.”</em></li>
<li><em>“Alexa, next channel on the Living Room TV.”</em></li>
<li><em>“Alexa, channel up on the TV.”</em></li>
<li><em>“Alexa, channel down on the TV.”</em></li>
</ul>
<h4>Speaker Volume <a class="title-link" name="speaker-volume" href="#speaker-volume"></a>
</h4>
<ul>
<li><em>“Alexa, set the volume of the speakers to 50.”</em></li>
<li><em>“Alexa, turn the volume down on the stereo by 20.”</em></li>
<li><em>“Alexa, turn the volume down on Living Room TV.”</em></li>
<li><em>“Alexa, mute speakers.”</em></li>
<li><em>“Alexa, unmute speakers.”</em></li>
<li><em>“Alexa, lower the volume on the stereo.”</em></li>
<li><em>“Alexa, volume up 20 on the speakers.”</em></li>
</ul>
<h4>Equalizer Mode <a class="title-link" name="equalizer-mode" href="#equalizer-mode"></a>
</h4>
<p>Supports changing the Media Player <code>sound_mode</code> from the preset <code>sound_mode_list</code>.</p>
<ul>
<li><em>“Alexa, set mode to movie on the TV.”</em></li>
</ul>
<p>Alexa only supports the following modes: <code>movie</code>, <code>music</code>, <code>night</code>, <code>sport</code>, <code>tv</code>.</p>
<h4>Inputs <a class="title-link" name="inputs" href="#inputs"></a>
</h4>
<p>Supports changing the Media Player <code>source</code> from the preset <code>source_list</code>.</p>
<ul>
<li><em>“Alexa, change the input to DVD on the Living Room TV.”</em></li>
</ul>
<p>Home Assistant will attempt to translate the <code>media_player</code> <code>source_list</code> into a valid <code>source</code> name for Alexa. Alexa only supports the following input names:</p>
<p><code>AUX 1</code>, <code>AUX 2</code>, <code>AUX 3</code>, <code>AUX 4</code>, <code>AUX 5</code>, <code>AUX 6</code>, <code>AUX 7</code>, <code>BLURAY</code>, <code>CABLE</code>, <code>CD</code>, <code>COAX 1</code>, <code>COAX 2</code>, <code>COMPOSITE 1</code>, <code>DVD</code>, <code>GAME</code>, <code>HD RADIO</code>, <code>HDMI 1</code>, <code>HDMI 2</code>, <code>HDMI 3</code>, <code>HDMI 4</code>, <code>HDMI 5</code>, <code>HDMI 6</code>, <code>HDMI 7</code>, <code>HDMI 8</code>, <code>HDMI 9</code>, <code>HDMI 10</code>, <code>HDMI ARC</code>, <code>INPUT 1</code>, <code>INPUT 2</code>, <code>INPUT 3</code>, <code>INPUT 4</code>, <code>INPUT 5</code>, <code>INPUT 6</code>, <code>INPUT 7</code>, <code>INPUT 8</code>, <code>INPUT 9</code>, <code>INPUT 10</code>, <code>IPOD</code>, <code>LINE 1</code>, <code>LINE 2</code>, <code>LINE 3</code>, <code>LINE 4</code>, <code>LINE 5</code>, <code>LINE 6</code>, <code>LINE 7</code>, <code>MEDIA PLAYER</code>, <code>OPTICAL 1</code>, <code>OPTICAL 2</code>, <code>PHONO</code>, <code>PLAYSTATION</code>, <code>PLAYSTATION 3</code>, <code>PLAYSTATION 4</code>, <code>SATELLITE</code>, <code>SMARTCAST</code>, <code>TUNER</code>, <code>TV</code>, <code>USB DAC</code>, <code>VIDEO 1</code>, <code>VIDEO 2</code>, <code>VIDEO 3</code>, <code>XBOX</code></p>
<h4>Playback State <a class="title-link" name="playback-state" href="#playback-state"></a>
</h4>
<p>Requires <a href="#proactive-events">Proactive Events</a> enabled.</p>
<div class="alert alert-note">
  <p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
  <div class="alert-content">
<p>Intents to seek forwards (skip) or to rewind (go back) are not supported at the moment.</p>
  </div>
</div>
<h3>Remote <a class="title-link" name="remote" href="#remote"></a>
</h3>
<p>Supports changing the Remote <code>activity</code> from the given <code>activity_list</code></p>
<ul>
<li><em>“Alexa, change the TV to PlayStation.”</em></li>
<li><em>“Alexa, change the input on the TV to PlayStation.”</em></li>
</ul>
<div class="alert alert-note">
  <p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
  <div class="alert-content">
<p>Alexa does not allow the following words to be used as activity names:</p>
<p><code>alarm</code>, <code>alarms</code>, <code>all alarms</code>, <code>away mode</code>, <code>bass</code>, <code>camera</code>, <code>date</code>, <code>date today</code>, <code>day</code>, <code>do not disturb</code>, <code>drop in</code>, <code>music</code>, <code>night light</code>, <code>notification</code>, <code>playing</code>, <code>sleep sounds</code>, <code>time</code>, <code>timer</code>, <code>today in music</code>, <code>treble</code>, <code>volume</code>, <code>way f. m.</code></p>
  </div>
</div>
<h3>Scene <a class="title-link" name="scene" href="#scene"></a>
</h3>
<p>Activate scenes with scene name, or <em>“turn on”</em> utterance. Home Assistant does not support deactivate or <em>“turn off”</em> for scenes at this time.</p>
<ul>
<li><em>“Alexa, Party Time.”</em></li>
<li><em>“Alexa, turn on Party Time.”</em></li>
</ul>
<h3>Script <a class="title-link" name="script" href="#script"></a>
</h3>
<p>Run script with script name, or <em>“turn on”</em> utterance.  Deactivate a running script with <em>“turn off”</em> utterance.</p>
<ul>
<li><em>“Alexa, Party Time.”</em></li>
<li><em>“Alexa, turn on Party Time.”</em></li>
<li><em>“Alexa, turn off Party Time.”</em></li>
</ul>
<h3>Sensor <a class="title-link" name="sensor" href="#sensor"></a>
</h3>
<p>Requires <a href="#proactive-events">Proactive Events</a> enabled.</p>
<p>Only temperature sensors are configured at this time.</p>
<ul>
<li><em>“Alexa, what’s the temperature in the kitchen?”</em></li>
<li><em>“Alexa, what’s the upstairs temperature?”</em></li>
</ul>
<h3>Switch, Input Boolean <a class="title-link" name="switch-input-boolean" href="#switch-input-boolean"></a>
</h3>
<p>Support <em>“turn on”</em> and <em>“turn off”</em> utterances.</p>
<ul>
<li><em>“Alexa, turn on the vacuum.”</em></li>
<li><em>“Alexa, turn off the lights.”</em></li>
</ul>
<h4>Routines <a class="title-link" name="routines-2" href="#routines-2"></a>
</h4>
<p>Requires <a href="#proactive-events">Proactive Events</a> enabled.</p>
<p>Alexa Routines can be triggered when Switches and Input Booleans change state.</p>
<p>In order to enable this, Switches and Input Booleans will appear as contact sensors in the when menu of Alexa Routines. This is because Alexa does not support triggering routines from switch-type devices, only from contact and motion sensors. In this menu when you select a switch, <code>Open</code> corresponds to <code>on</code> and <code>Close</code> corresponds to <code>off</code>.</p>
<p class="img">
<a href="/images/integrations/alexa/alexa_app_switch_trigger.png" target="_blank">
  <img height="460" src="/images/integrations/alexa/alexa_app_switch_trigger.png" alt="Screenshot: Alexa App Switch Routine Trigger"></a>
</p>
<h3>Timer <a class="title-link" name="timer" href="#timer"></a>
</h3>
<p>Start a timer with using the <em>“turn on”</em> utterance.</p>
<ul>
<li><em>“Alexa, turn on the laundry.”</em></li>
</ul>
<p>Cancel a timer using the <em>“turn off”</em> utterance.</p>
<ul>
<li><em>“Alexa, turn off the laundry.”</em></li>
</ul>
<p>Pause and Restart Timer entities in Home Assistant.</p>
<ul>
<li><em>“Alexa, pause the microwave.”</em></li>
<li><em>“Alexa, hold the sous vide.”</em></li>
<li><em>“Alexa, restart the microwave.”</em></li>
</ul>
<div class="alert alert-important">
  <p class="alert-title"><iconify-icon inline icon="mdi:message-alert-outline"></iconify-icon> Important</p>
  <div class="alert-content">
<p>To avoid issues with Alexa’s built-in timer functionality, the timer entity should not include the word “timer” in its friendly name.</p>
  </div>
</div>
<h3>Vacuum <a class="title-link" name="vacuum" href="#vacuum"></a>
</h3>
<p>Support <em>“turn on”</em> and <em>“turn off”</em> utterances. Pause and Resume</p>
<ul>
<li><em>“Alexa, turn on the vacuum.”</em></li>
<li><em>“Alexa, pause the vacuum.”</em></li>
<li><em>“Alexa, restart the vacuum.”</em></li>
</ul>
<h3>Valve <a class="title-link" name="valve" href="#valve"></a>
</h3>
<p>Valves are not supported natively within Alexa. So within Alexa, they are represented as a device of an unknown type.</p>
<h4>Open/close <a class="title-link" name="openclose" href="#openclose"></a>
</h4>
<p>Home Assistant configures valves with semantics that provide  <em>“open”</em> and <em>“close”</em> utterances.</p>
<ul>
<li><em>“Alexa, open the water valve.”</em></li>
<li><em>“Alexa, close the gas valve.”</em></li>
</ul>
<h4>Set valve position <a class="title-link" name="set-valve-position" href="#set-valve-position"></a>
</h4>
<p>Valves that support a set position can be controlled using percentages.</p>
<ul>
<li><em>“Alexa, set the [entity name] position to thirty percent.”</em></li>
<li><em>“Alexa, increase [entity name] position by ten percent.”</em></li>
<li><em>“Alexa, decrease [entity name] position by twenty percent.”</em></li>
</ul>
<table>
<thead>
<tr>
<th>Locale</th>
<th>Friendly Name Synonyms</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>en-US</code></td>
<td>
<em>“position”</em>, <em>“opening”</em>
</td>
</tr>
</tbody>
</table>
<p>Currently, Alexa only supports friendly name synonyms for the <code>en-US</code> locale.</p>
<h4>Stop the valve <a class="title-link" name="stop-the-valve" href="#stop-the-valve"></a>
</h4>
<p>Valves that support <code>stop</code> closing or opening will have an extra toggle control that allows to stop the valve closing or opening operation.</p>
<h3>Water heater <a class="title-link" name="water-heater" href="#water-heater"></a>
</h3>
<p>Single, double, and triple set-point thermostats are supported. The temperature value from the thermostat will also be exposed at a separate <a href="#sensor">temperature sensor</a>.</p>
<h4>Set target temperature <a class="title-link" name="set-target-temperature" href="#set-target-temperature"></a>
</h4>
<ul>
<li><em>“Alexa, set the boiler’s target temperature to 50.”</em></li>
</ul>
<p>You can ask Alexa about the current temperature and current target temperature.</p>
<ul>
<li><em>“Alexa, what is the boiler’s target temperature?”</em></li>
<li><em>“Alexa, what is the boiler’s current temperature?”</em></li>
</ul>
<h4>Operation Mode <a class="title-link" name="operation-mode" href="#operation-mode"></a>
</h4>
<p>The operation mode can be set from the UI. All Home Assistant operation modes can be set (English only).</p>
<ul>
<li><em>“Alexa, set main boiler to eco.”</em></li>
</ul>
<p>To change the water heater’s mode, the exact utterance must be used:</p>
<ul>
<li><em>“Alexa, set [entity name] to [mode utterance].”</em></li>
</ul>
<p>If the water heater entity supports on/off, use <em>“turn on”</em> and <em>“turn off”</em> utterances with the entity name or the mode utterance.</p>
<ul>
<li><em>“Alexa, turn on the [mode utterance].”</em></li>
<li><em>“Alexa, turn off the [entity name].”</em></li>
</ul>
<h2>Troubleshooting <a class="title-link" name="troubleshooting" href="#troubleshooting"></a>
</h2>
<!-- omit in toc -->
<h3>Binary Sensor not available in Routine Trigger <a class="title-link" name="binary-sensor-not-available-in-routine-trigger" href="#binary-sensor-not-available-in-routine-trigger"></a>
</h3>
<p>Binary Sensors with a <a href="/integrations/binary_sensor/#device-class"><code>device_class</code></a> attribute of <code>door</code> <code>garage_door</code> <code>opening</code> <code>window</code> <code>motion</code> <code>presense</code> are supported.</p>
<p>Use the <a href="/docs/configuration/customizing-devices/#customization-using-the-ui">Entity Customization Tool</a> to override the <code>device_class</code> attribute to expose a <code>binary_sensor</code> to Alexa.</p>
<!-- omit in toc -->
<h3>Token Invalid and no Refresh Token Available <a class="title-link" name="token-invalid-and-no-refresh-token-available" href="#token-invalid-and-no-refresh-token-available"></a>
</h3>
<p>Disable and re-enable the skill using the Alexa App; then restart Home Assistant.</p>
<h2>Debugging <a class="title-link" name="debugging" href="#debugging"></a>
</h2>
<p>The Alexa integration will log additional information about state updates and other messages when the log level is set to <code>debug</code>. Add the relevant line below to the <span class="terminology"><code>configuration.yaml</code><span class="terminology-tooltip">The configuration.yaml file is the main configuration file for Home Assistant. It lists the integrations to be loaded and their specific configurations. In some cases, the configuration needs to be edited manually directly in the configuration.yaml file. Most integrations can be configured in the UI.<a class="terminology-link" href="/docs/configuration/"> [Learn more]</a></span></span>:</p>
<p>If using Alexa with an Alexa Smart Home Skill and Lambda function such as haaska:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">logger</span><span class="pi">:</span>
  <span class="na">default</span><span class="pi">:</span> <span class="s">info</span>
  <span class="na">logs</span><span class="pi">:</span>
    <span class="na">homeassistant.components.alexa</span><span class="pi">:</span> <span class="s">debug</span>
</code></pre></div></div>
<p>If using Home Assistant Cloud you also need to debug <code>hass_nubucasa.iot</code>:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">logger</span><span class="pi">:</span>
  <span class="na">default</span><span class="pi">:</span> <span class="s">info</span>
  <span class="na">logs</span><span class="pi">:</span>
    <span class="na">homeassistant.components.alexa</span><span class="pi">:</span> <span class="s">debug</span>
    <span class="na">hass_nabucasa.iot</span><span class="pi">:</span> <span class="s">debug</span>
</code></pre></div></div>


  


  
<div class="material-card text feedback">
  <h4>
<iconify-icon inline icon="mdi:feedback" title="Feedback"></iconify-icon> <b> Help us improve our documentation</b><a href="#feedback_section" class="title-link" name="feedback_section"></a>
</h4>
  Suggest an edit to this page, or provide/view feedback for this page.
  <div class="links">
    <ul aria-label="Page feedback options">
    <li><a href="https://github.com/home-assistant/home-assistant.io/tree/current/source/_integrations/alexa.smart_home.markdown" target="_blank" title="Edit this page"><iconify-icon inline icon="mdi:edit"></iconify-icon> Edit</a></li>
    
    <li><a href="https://github.com/home-assistant/home-assistant.io/issues/new?template=feedback.yml&amp;url=https%3A%2F%2Fivangrod.github.io%2Fintegrations%2Falexa.smart_home%2F&amp;version=2025.9.4&amp;labels=current,integration%3A%20alexa" target="_blank" title="Provide feedback on this page"><iconify-icon inline icon="mdi:comment-edit-outline"></iconify-icon> Provide feedback</a></li>
    <li><a href="https://github.com/home-assistant/home-assistant.io/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3A%22integration%3A+alexa%22" target="_blank" title="View pending feedback for this page"><iconify-icon inline icon="mdi:comment-text-multiple-outline"></iconify-icon> View pending feedback</a></li>
    
  </ul>
  </div>
</div>


</li>
</ul>
</li>
</ul></article>

            
          </div>


          
            
              <aside id="integration-sidebar" class="grid__item one-third desk-wide-one-quarter lap-one-whole palm-one-whole">
              
            <div class="grid">
  




  


<section class="aside-module grid__item one-whole lap-one-half">
  <div class='brand-logo-container section'>
      <img src='https://brands.home-assistant.io/_/alexa//logo.png' srcset='https://brands.home-assistant.io/_/alexa/logo@2x.png 2x' /></div>

  <div class='section'>The Amazon Alexa Smart Home Skill  integration  was introduced in Home Assistant 0.54, and it's used by <a title="Open analytics.home-assistant.io" href="https://analytics.home-assistant.io/integrations" target="_blank" rel="noopener">
        
          2.3%</a> of the active installations.
        
      
    
  </div>
  <div class='section'>
    <a href="https://github.com/home-assistant/core/tree/dev/homeassistant/components/alexa" target="_blank"><iconify-icon inline icon='simple-icons:github' title='Github'></iconify-icon> View source on GitHub</a><br />
    <a href="https://github.com/home-assistant/core/issues?q=is%3Aissue+is%3Aopen+label%3A%22integration%3A+alexa%22" target="_blank"><iconify-icon inline icon='mdi:bug' title='Bug'></iconify-icon> View known issues</a>
  </div></section>

<section class="aside-module grid__item one-whole lap-one-half">
  <div class='section'>
    <h1 class="title epsilon"><iconify-icon inline icon='mdi:person-heart' title='Person heart'></iconify-icon> Integration owners</h1>
    
        
        

          
          <div class="section">
            This integration is being maintained by the Home Assistant project.
          </div>
        
    
  </div>
</section>






  <section id="toc-module" class="aside-module grid__item one-whole lap-one-half">
        <div class='section'>
          <h1 class="title epsilon"><iconify-icon inline icon='mdi:toc' title='Toc'></iconify-icon> On this page</h1>
          <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#requirements">Requirements</a></li>
<li class="toc-entry toc-h2"><a href="#create-an-amazon-alexa-smart-home-skill">Create an Amazon Alexa Smart Home Skill</a></li>
<li class="toc-entry toc-h2"><a href="#create-an-aws-lambda-function">Create an AWS Lambda Function</a>
<ul>
<li class="toc-entry toc-h3"><a href="#create-an-iam-role-for-lambda">Create an IAM Role for Lambda</a></li>
<li class="toc-entry toc-h3"><a href="#add-code-to-the-lambda-function">Add Code to the Lambda Function</a></li>
<li class="toc-entry toc-h3"><a href="#test-the-lambda-function">Test the Lambda Function</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#configure-the-smart-home-service-endpoint">Configure the Smart Home Service Endpoint</a></li>
<li class="toc-entry toc-h2"><a href="#account-linking">Account linking</a></li>
<li class="toc-entry toc-h2"><a href="#alexa-smart-home-integration-configuration">Alexa Smart Home Integration Configuration</a>
<ul>
<li class="toc-entry toc-h3"><a href="#alexa-locale">Alexa locale</a></li>
<li class="toc-entry toc-h3"><a href="#proactive-events">Proactive events</a></li>
<li class="toc-entry toc-h3"><a href="#configure-filter">Configure filter</a></li>
<li class="toc-entry toc-h3"><a href="#alexa-display-categories">Alexa Display Categories</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#supported-platforms">Supported platforms</a>
<ul>
<li class="toc-entry toc-h3"><a href="#alarm-control-panel">Alarm control panel</a></li>
<li class="toc-entry toc-h3"><a href="#alert-automation-group">Alert, Automation, Group</a></li>
<li class="toc-entry toc-h3"><a href="#binary-sensor">Binary sensor</a></li>
<li class="toc-entry toc-h3"><a href="#button-input-button">Button, Input Button</a></li>
<li class="toc-entry toc-h3"><a href="#camera">Camera</a></li>
<li class="toc-entry toc-h3"><a href="#climate">Climate</a></li>
<li class="toc-entry toc-h3"><a href="#cover">Cover</a></li>
<li class="toc-entry toc-h3"><a href="#event-entities">Event entities</a></li>
<li class="toc-entry toc-h3"><a href="#fan">Fan</a></li>
<li class="toc-entry toc-h3"><a href="#humidifier">Humidifier</a></li>
<li class="toc-entry toc-h3"><a href="#image-processing">Image Processing</a></li>
<li class="toc-entry toc-h3"><a href="#input-number-and-number">Input Number and Number</a></li>
<li class="toc-entry toc-h3"><a href="#light">Light</a></li>
<li class="toc-entry toc-h3"><a href="#lock">Lock</a></li>
<li class="toc-entry toc-h3"><a href="#media-player">Media Player</a></li>
<li class="toc-entry toc-h3"><a href="#remote">Remote</a></li>
<li class="toc-entry toc-h3"><a href="#scene">Scene</a></li>
<li class="toc-entry toc-h3"><a href="#script">Script</a></li>
<li class="toc-entry toc-h3"><a href="#sensor">Sensor</a></li>
<li class="toc-entry toc-h3"><a href="#switch-input-boolean">Switch, Input Boolean</a></li>
<li class="toc-entry toc-h3"><a href="#timer">Timer</a></li>
<li class="toc-entry toc-h3"><a href="#vacuum">Vacuum</a></li>
<li class="toc-entry toc-h3"><a href="#valve">Valve</a></li>
<li class="toc-entry toc-h3"><a href="#water-heater">Water heater</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#troubleshooting">Troubleshooting</a>
<ul>
<li class="toc-entry toc-h3"><a href="#binary-sensor-not-available-in-routine-trigger">Binary Sensor not available in Routine Trigger</a></li>
<li class="toc-entry toc-h3"><a href="#token-invalid-and-no-refresh-token-available">Token Invalid and no Refresh Token Available</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#debugging">Debugging</a></li>
</ul>
        </div>
      </section><section id="category-module" class="aside-module grid__item one-whole lap-one-half">
      <div class='section'>
        <h1 class="title epsilon"><iconify-icon inline icon='mdi:category' title='Category'></iconify-icon> Categories</h1>
        <ul class='divided'><li>
            <a href='/integrations/#voice'>Voice</a>
          </li></ul>
      </div>
    </section></div>

          </aside>
          
        </div>
      </div>

      <footer>
        <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="skyline grid">
        <div class="skyline grid__item one-whole">
          <div class="footer-skyline">
          </div>
        </div>
      </div>
      <div class="footer-nav grid">
        <div class="company grid__item one-quarter lap-one-half palm-one-whole">
          <div class="title">
            <img
              src="/needlehack-blog/images/footer-logo-text.svg"
              height="72"
              alt="Home Assistant"
            />
          </div>
          <p>
            Home Assistant is a project from the <a href="https://www.openhomefoundation.org/">Open Home Foundation</a>, sponsored by <a href="https://www.nabucasa.com/">Nabu Casa</a>.
          </p>
        </div>

        <div class="grid__item one-quarter lap-one-half palm-one-whole">
          <h3>Join us and contribute!</h3>
          <ul>
            <li><a class="external-link" href="https://github.com/home-assistant/">GitHub repo <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://developers.home-assistant.io">Developers Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://design.home-assistant.io">Design Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://data.home-assistant.io">Data Science Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://community.home-assistant.io">Community Forum <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://creators.home-assistant.io/">Creator Network <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://works-with.home-assistant.io/">Works With Home Assistant <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a href="/needlehack-blog/community">Our community</li>
            <li><a href="/needlehack-blog/help/reporting_issues/">Reporting issues</a></li>
          </ul>
          <h3>System status</h3>
          <ul>
            <li>
              <a class="external-link"  href="https://alerts.home-assistant.io">Integration Alerts <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a>
            </li>
            <li><a href="/needlehack-blog/security/">Security Alerts</a></li>
            <li>
              <a class="external-link" href="https://status.home-assistant.io">System Status <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a>
            </li>
          </ul>
        </div>

        <div class="grid__item one-quarter lap-one-half palm-one-whole">
          <h3>Companion apps</h3>
          <ul>
            <li><a class="external-link" href="https://apps.apple.com/us/app/home-assistant/id1099568401">iOS and Apple devices</a></li>
            <li><a class="external-link" href="https://play.google.com/store/apps/details?id=io.homeassistant.companion.android">Android and Wear OS</a></li>
            <li><a class="external-link" href="https://companion.home-assistant.io/">...and more!</a></li>
          </ul>
          <h3>Governance</h3>
          <ul>
            <li><a href="/needlehack-blog/privacy/">Privacy Notices</a></li>
            <li><a href="/needlehack-blog/developers/cla/">Contributor License Agreement</a></li>
            <li><a href="/needlehack-blog/tos/">Terms of Service</a></li>
            <li><a href="/needlehack-blog/code_of_conduct/">Code of Conduct</a></li>
            <li><a href="/needlehack-blog/developers/credits/">Credits</a></li>
            <li><a href="/needlehack-blog/developers/license/">License</a></li>
          </ul>
        </div>

        <div class="socials grid__item one-quarter lap-one-half palm-one-whole">

          <h3>Follow us</h3>
          <p><a class="external-link" href='https://newsletter.openhomefoundation.org/#/portal'>Sign up for our newsletter <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></p>
          <div class="icons">
            <a
              rel="me"
              href="https://youtube.com/@home_assistant"
              title="YouTube"
              target="_blank"
              ><iconify-icon icon="simple-icons:youtube"></iconify-icon></a>
            <a
              rel="me"
              href="https://reddit.com/r/homeassistant"
              title="Reddit"
              target="_blank"
              ><iconify-icon icon="simple-icons:reddit"></iconify-icon></a>
            <a
              rel="me"
              href="https://github.com/home-assistant/home-assistant"
              title="GitHub"
              target="_blank"
              ><iconify-icon icon="simple-icons:github"></iconify-icon></a>
            <br />
            <a
              rel="me"
              href="https://fosstodon.org/@homeassistant"
              title="Mastodon"
              target="_blank"
              ><iconify-icon icon="simple-icons:mastodon"></iconify-icon></a>
            <a
              rel="me"
              href="https://bsky.app/profile/home-assistant.io"
              title="Bluesky"
              target="_blank"
             ><iconify-icon icon="simple-icons:bluesky"></iconify-icon></a>
            <a
              rel="me"
              href="https://x.com/home_assistant"
              title="X"
              target="_blank"
             ><iconify-icon icon="simple-icons:x"></iconify-icon></a>
            <br />
            <a
              rel="me"
              href="https://www.facebook.com/homeassistantio"
              title="Facebook"
              target="_blank"
              ><iconify-icon icon="simple-icons:facebook"></iconify-icon></a>
            <a
              rel="me"
              href="https://www.instagram.com/homeassistant/"
              title="Instagram"
              target="_blank"
              ><iconify-icon icon="simple-icons:instagram"></iconify-icon></a>
            <a
              rel="me"
              href="https://www.linkedin.com/company/home-assistant"
              title="LinkedIn"
              target="_blank"
              ><iconify-icon icon="simple-icons:linkedin"></iconify-icon></a>
          </div>

          <div class="web-notice">
            <p>
              For partnership inquiries please check out <a href="https://works-with.home-assistant.io/">Works With Home Assistant</a>. For media, get in touch <a href="mailto:media@openhomefoundation.org">here</a>. For other questions, you can contact us <a href="mailto:hello@home-assistant.io">here</a> (No technical support!)
            </p>
            <p>
              Website powered by <a href="https://jekyllrb.com/">Jekyll</a><br />
              Originally based on the <a href="https://github.com/coogie/oscailte">Oscailte theme</a>
            </p>
            <a href="https://www.netlify.com">
              <img
                src="/needlehack-blog/images/frontpage/netlify.svg"
                alt="Deploys by Netlify Badge"
              />
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

      </footer>

    </div>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@justinribeiro/lite-youtube@1.3.1/lite-youtube.js"></script>

<script src="/needlehack-blog/javascripts/terminology_tooltip.js' | cache_buster" type="text/javascript" defer></script>

<script src="/needlehack-blog/javascripts/prism.js' | cache_buster" type="text/javascript" defer></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@3/dist/umd/index.min.js"></script>
<script type="text/javascript">
  docsearch({
    container: '#docsearch',
    appId: 'FBHBYS3J0U',
    indexName: 'home-assistant',
    apiKey: "ba6f7e6d97b3d3d2f778978c742a47c6",
  });
  document.querySelector('.site-title').addEventListener('contextmenu', function (ev) {
    ev.preventDefault();
    document.location.assign("https://design.home-assistant.io/#brand/logo")
  });
</script>




<script type="text/javascript">
  {
    const article = document.querySelector("article.post");
    if (article) {
      const iframes = article.querySelectorAll("iframe[data-src]");
      let loaded = false;
      if (iframes) {
        document.addEventListener('mousemove', loadLazyFrames, { passive: true, once: true });
        document.addEventListener('touchmove', loadLazyFrames, { passive: true, once: true });
        document.addEventListener('scroll', loadLazyFrames, { passive: true, once: true });
  
        function loadLazyFrames() {
          if (loaded) return;
          loaded = true;
  
          iframes.forEach((iframe) => {
            const src = iframe.getAttribute("data-src");
            if (src) {
              iframe.setAttribute("src", src);
              iframe.removeAttribute("data-src");
            }
          });
        }
      }
    }
  }
</script>

  </body>
</html>
