



<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>InfluxDB - Home Assistant</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Record events in InfluxDB.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://www.home-assistant.io/integrations/influxdb/">

    <meta property="fb:app_id" content="338291289691179">
    <meta property="og:title" content="InfluxDB">
    <meta property="og:site_name" content="Home Assistant">
    <meta property="og:url" content="https://www.home-assistant.io/integrations/influxdb/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Record events in InfluxDB.">
    <meta property="og:image" content="https://ivangrod.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@home_assistant">
    
    <meta name="twitter:title" content="InfluxDB">
    <meta name="twitter:description" content="Record events in InfluxDB.">
    <meta name="twitter:image" content="https://ivangrod.github.io/images/default-social.png">
    <link rel="me" href="https://fosstodon.org/@homeassistant">

    <link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3/dist/style.min.css" rel="stylesheet" />
    <link href="/needlehack-blog/stylesheets/prism.css" rel="stylesheet">
    <link href="/needlehack-blog/stylesheets/screen.css" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Home Assistant" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&amp;family=Instrument+Sans:ital,wdth,wght@0,99,400..700;1,99,400..700&amp;" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/2.1.0/iconify-icon.min.js"></script>
  </head>

  <body  class=" integration-page  ">
    <header class='site-header '>
      



<div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/needlehack-blog/" class="site-title">
        <div class="logo"></div>
      </a>
      <a class="release-date" href="/blog/2025/09/03/release-20259/" title="Latest version 2025.9.4 released September 19, 2025">
        2025.9.4
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle" />
        <label
          for="toggle"
          class="toggle"
          data-open="Main Menu"
          data-close="⨉"
        ></label>
        <ul class="menu pull-right">
          <li><a  href="/needlehack-blog/installation/">Getting started</a></li>
          <li>
            <a  href="/needlehack-blog/docs/">Documentation <iconify-icon inline icon='mdi:chevron-down' title='Chevron down'></iconify-icon></a>
            <ul>
              <li><a href="/needlehack-blog/installation/"><iconify-icon inline icon='simple-icons:homeassistant' title='Homeassistant'></iconify-icon> Installation</a></li>
              <li><a href="/needlehack-blog/docs/automation/"><iconify-icon inline icon='mdi:robot-happy' title='Robot happy'></iconify-icon> Automations</a></li>
              <li><a href="/needlehack-blog/dashboards/"><iconify-icon inline icon='mdi:gauge' title='Gauge'></iconify-icon> Dashboards</a></li>
              <li><a href="/needlehack-blog/voice_control/"><iconify-icon inline icon='mdi:comment-processing-outline' title='Comment processing outline'></iconify-icon> Voice assistants</a></li>
              <li><a href="/needlehack-blog/docs/organizing/"><iconify-icon inline icon='mdi:view-grid' title='View grid'></iconify-icon> Device organization</a></li>
              <li><a href="/needlehack-blog/docs/energy/"><iconify-icon inline icon='mdi:solar-power-variant' title='Solar power variant'></iconify-icon> Energy management</a></li>
              <li><a href="/needlehack-blog/docs/configuration/"><iconify-icon inline icon='mdi:cog' title='Cog'></iconify-icon> Advanced configuration</a></li>
            </ul>
          </li>
          <li><a class="active" href="/needlehack-blog/integrations/">Integrations</a></li>
          <li><a  href="/needlehack-blog/blog/">Blog</a></li>
          <li><a  href="/needlehack-blog/help/">Need help?</a></li>
          <li>
            <div class="docsearch" id="docsearch"></div>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>

    </header>

    <div class="page-content">

      

      <div class="grid-wrapper">
        <div class="grid grid-center">

          <aside id="toc-bar" class="grid__item desk-wide-one-sixth">
                <section class="aside-module grid__item one-whole">
                  <div class='section'>
                    <h1 class="title epsilon"><iconify-icon inline icon='mdi:toc' title='Toc'></iconify-icon> On this page</h1>
                    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#configuration">Configuration</a></li>
<li class="toc-entry toc-h2"><a href="#configure-filter">Configure filter</a></li>
<li class="toc-entry toc-h2"><a href="#examples">Examples</a>
<ul>
<li class="toc-entry toc-h3"><a href="#full-configuration-for-1xx-installations">Full configuration for 1.xx installations</a></li>
<li class="toc-entry toc-h3"><a href="#full-configuration-for-2xx-installations">Full configuration for 2.xx installations</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#sensor">Sensor</a>
<ul>
<li class="toc-entry toc-h3"><a href="#configuration-1">Configuration</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#examples-1">Examples</a>
<ul>
<li class="toc-entry toc-h3"><a href="#full-configuration-for-1xx-installations-1">Full configuration for 1.xx installations</a></li>
<li class="toc-entry toc-h3"><a href="#full-configuration-for-2xx-installations-1">Full configuration for 2.xx installations</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#querying-your-data-in-influx">Querying your data in Influx</a>
<ul>
<li class="toc-entry toc-h3"><a href="#sensors">Sensors</a></li>
<li class="toc-entry toc-h3"><a href="#everything-else">Everything else</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#related-topics">Related topics</a></li>
</ul>
                  </div>
                </section>
              </aside> 

          
          <div class="grid__item two-thirds desk-wide-seven-twelfths lap-one-whole palm-one-whole">
          

            
              <article class="page">
  
  <header>
    
    
      <div class="breadcrumbs">
        <a href="/needlehack-blog/">Home</a>
        
          
            
            ▸ <a href="/integrations/">Integrations</a>
          
        
          
            ▸ 
          
        
      </div>
    
    <h1 class="title indent">
      
        InfluxDB
      
    </h1>
  </header>
  
    
    
    
  
  
  <p>The <code>influxdb</code> <span class="terminology">integration<span class="terminology-tooltip">Integrations connect and integrate Home Assistant with your devices, services, and more.<a class="terminology-link" href="/getting-started/concepts-terminology/#integrations"> [Learn more]</a></span></span> makes it possible to transfer all state changes to an external <a href="https://influxdb.com/" rel="external nofollow">InfluxDB<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> database. See the <a href="https://docs.influxdata.com/influxdb/v1.7/introduction/installation/" rel="external nofollow">official installation documentation<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> for how to set up an InfluxDB database.</p>
<p>Additionally, you can now make use of an InfluxDB 2.0 installation with this <span class="terminology">integration<span class="terminology-tooltip">Integrations connect and integrate Home Assistant with your devices, services, and more.<a class="terminology-link" href="/getting-started/concepts-terminology/#integrations"> [Learn more]</a></span></span>. See the <a href="https://v2.docs.influxdata.com/v2.0/" rel="external nofollow">official installation instructions<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> for how to set up an InfluxDB 2.0 database. Or you can sign up for their <a href="https://cloud2.influxdata.com/signup" rel="external nofollow">cloud service<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> and connect Home Assistant to that. Note that the configuration is significantly different for a 2.xx installation, the documentation below will note when fields or defaults apply to only a 1.xx installation or a 2.xx installation.</p>
<p>There is currently support for the following device types within Home Assistant:</p>
<ul>
<li><a href="#sensor">Sensor</a></li>
</ul>
<div class="alert alert-note">
  <p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
  <div class="alert-content">
<p>The <code>influxdb</code> database integration runs parallel to the Home Assistant database. It does not replace it.</p>
  </div>
</div>
<h2>Configuration <a class="title-link" name="configuration" href="#configuration"></a>
</h2>
<p>The default InfluxDB configuration doesn’t enforce authentication. If you have installed InfluxDB on the same host where Home Assistant is running and haven’t made any configuration changes, add the following to your <span class="terminology"><code>configuration.yaml</code><span class="terminology-tooltip">The configuration.yaml file is the main configuration file for Home Assistant. It lists the integrations to be loaded and their specific configurations. In some cases, the configuration needs to be edited manually directly in the configuration.yaml file. Most integrations can be configured in the UI.<a class="terminology-link" href="/docs/configuration/"> [Learn more]</a></span></span> file.
After changing the <span class="terminology"><code>configuration.yaml</code><span class="terminology-tooltip">The configuration.yaml file is the main configuration file for Home Assistant. It lists the integrations to be loaded and their specific configurations. In some cases, the configuration needs to be edited manually directly in the configuration.yaml file. Most integrations can be configured in the UI.<a class="terminology-link" href="/docs/configuration/"> [Learn more]</a></span></span> file, <a href="/docs/configuration/#reloading-the-configuration-to-apply-changes">restart Home Assistant</a> to apply the changes.   The integration is now shown on the integrations page under <strong><a href="https://my.home-assistant.io/redirect/integrations" class="my" target="_blank">Settings &gt; Devices &amp; services</a></strong>. Its entities are listed on the integration card itself and on the <a href="https://my.home-assistant.io/redirect/entities" class="my" target="_blank"><strong>Entities</strong></a> tab.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">influxdb</span><span class="pi">:</span>
</code></pre></div></div>
<p>You will still need (not for version 2) to create a database named <code>home_assistant</code> via InfluxDB’s command-line interface. For instructions on how to create a database check the <a href="https://docs.influxdata.com/influxdb/latest/introduction/getting_started/#creating-a-database" rel="external nofollow">InfluxDB documentation<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> relevant to the version you have installed.</p>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="influxdb-configuration-variables" href="#influxdb-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class="">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> api_version </span><span class="config-vars-type">string</span><a name="api_version" class="title-link" href="#api_version"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>API version to use. Valid values are <code>1</code> or <code>2</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> ssl </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="ssl" class="title-link" href="#ssl"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Use HTTPS instead of HTTP to connect. 2.xx - Defaults to <code>true</code> for 2.xx, false otherwise <code>false</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> host </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: localhost</span>)</span><a name="host" class="title-link" href="#host"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>IP address or domain of your database host, e.g., 192.168.1.10. 2.xx - Defaults to ‘us-west-2-1.aws.cloud2.influxdata.com’ for 2.xx, not ‘localhost’.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> port </span><span class="config-vars-type">integer</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: 8086</span>)</span><a name="port" class="title-link" href="#port"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Port to use. 2.xx - Must specify port for 2.xx, otherwise 8086.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> path </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="path" class="title-link" href="#path"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Path to use if your InfluxDB is running behind a reverse proxy.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> username </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="inclusive">Inclusive</span><span class="default"></span>)</span><a name="username" class="title-link" href="#username"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>1.xx only - The username of the database user. The user needs read/write privileges on the database.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> password </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="inclusive">Inclusive</span><span class="default"></span>)</span><a name="password" class="title-link" href="#password"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>1.xx only - The password for the database user account. Needed with <code>username</code> configuration variable.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> database </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: home_assistant</span>)</span><a name="database" class="title-link" href="#database"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>1.xx only - Name of the database to use. The database must already exist.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> verify_ssl </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: true</span>)</span><a name="verify_ssl" class="title-link" href="#verify_ssl"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Verify SSL certificate for HTTPS request. This can take on boolean values <code>false</code> or <code>true</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> ssl_ca_cert </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: None</span>)</span><a name="ssl_ca_cert" class="title-link" href="#ssl_ca_cert"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Optional path of a CA certificate to be used during SSL verification.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> token </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="inclusive">Inclusive</span><span class="default"></span>)</span><a name="token" class="title-link" href="#token"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>2.xx only - Auth token with WRITE access to your chosen Organization and Bucket. Needed with <code>organization</code> configuration variable.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> organization </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="inclusive">Inclusive</span><span class="default"></span>)</span><a name="organization" class="title-link" href="#organization"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>2.xx only - Organization ID to write to. To obtain this, open the UI of your 2.xx installation, the URL at the top will have it after <code>/orgs</code>. For example, in InfluxDB Cloud it looks like this: <a href="https://us-west-2-1.aws.cloud2.influxdata.com/orgs/%7BOrganizationID%7D" rel="external nofollow">https://us-west-2-1.aws.cloud2.influxdata.com/orgs/{OrganizationID}<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>. Needed with <code>token</code> configuration variable.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> bucket </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: Home Assistant</span>)</span><a name="bucket" class="title-link" href="#bucket"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>2.xx only - Name of the bucket (not the generated bucket ID) within your Organization to write to.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> max_retries </span><span class="config-vars-type">integer</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: 0</span>)</span><a name="max_retries" class="title-link" href="#max_retries"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Set this to allow the integration to retry if there was a network error when transmitting data.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> precision </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: ns</span>)</span><a name="precision" class="title-link" href="#precision"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Set this to specify the time precision sent to influxdb. Setting a coarser precision allows InfluxDb to compress your data better. If not set, defaults to ns.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> measurement_attr </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: unit_of_measurement</span>)</span><a name="measurement_attr" class="title-link" href="#measurement_attr"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>State object attribute(s) to use as measurement name. Possible values: <code>unit_of_measurement</code>, <code>domain__device_class</code> or <code>entity_id</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> default_measurement </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="default_measurement" class="title-link" href="#default_measurement"></a>
</div>
<div class="config-vars-description-and-children">
<span class="config-vars-description"><p>Measurement name to use when the measurement_attr state attribute does not exist, e.g. when an entity doesn’t have a unit.</p>
</span><div class="config-vars-default">
Default: <p>uses the entity id of the entity</p>
</div>
</div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> override_measurement </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="override_measurement" class="title-link" href="#override_measurement"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Measurement name to use instead of measurement_attr or default measurement. This will store all data points in a single measurement.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> exclude </span><span class="config-vars-type">list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="exclude" class="title-link" href="#exclude"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Configure which integrations should be excluded from recording to InfluxDB. (<a href="#configure-filter">Configure Filter</a>)</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> entities </span><span class="config-vars-type">string | list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="entities" class="title-link" href="#entities"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The list of entity ids to be excluded from recording to InfluxDB.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> entity_globs </span><span class="config-vars-type">string | list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="entity_globs" class="title-link" href="#entity_globs"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Exclude all entities matching a listed pattern.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> domains </span><span class="config-vars-type">string | list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="domains" class="title-link" href="#domains"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The list of domains to be excluded from recording to InfluxDB.</p>
</span></div>
</div>
</div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> include </span><span class="config-vars-type">list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="include" class="title-link" href="#include"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Configure which integrations should be included in recordings to InfluxDB. If set, all other entities will not be recorded to InfluxDB. (<a href="#configure-filter">Configure Filter</a>)</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> entities </span><span class="config-vars-type">string | list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="entities" class="title-link" href="#entities"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The list of entity ids to be included in recording to InfluxDB.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> entity_globs </span><span class="config-vars-type">string | list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="entity_globs" class="title-link" href="#entity_globs"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Include all entities matching a listed pattern.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> domains </span><span class="config-vars-type">string | list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="domains" class="title-link" href="#domains"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The list of domains to be included in recording to InfluxDB.</p>
</span></div>
</div>
</div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> tags </span><span class="config-vars-type">string | list</span><a name="tags" class="title-link" href="#tags"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Tags to mark the data.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> tags_attributes </span><span class="config-vars-type">string | list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: 0</span>)</span><a name="tags_attributes" class="title-link" href="#tags_attributes"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The list of attribute names which should be reported as tags and not fields to InfluxDB. For example, if set to <code>friendly_name</code>, it will be possible to group by entities’ friendly names as well, in addition to their ids.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> ignore_attributes </span><span class="config-vars-type">string | list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="ignore_attributes" class="title-link" href="#ignore_attributes"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The list of attribute names to ignore when reporting to InfluxDB. This can be used to filter out attributes that either don’t change or don’t matter to you in order to reduce the amount of data stored in InfluxDB. Please be aware of the underlying InfluxDB mechanism that converts non-string attributes to strings and adds a <code>_str</code> suffix to the attribute name in this case. It means that when you want to ignore, for example, the <code>icon_str</code> attribute that shows in your InfluxDB instance, you need to provide <code>icon</code> to <code>ignore_attributes</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> component_config </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="component_config" class="title-link" href="#component_config"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>This attribute contains integration-specific override values. See <a href="/getting-started/customizing-devices/">Customizing devices and services</a> for format.</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> override_measurement </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="override_measurement" class="title-link" href="#override_measurement"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Measurement name to use instead of a unit or default measurement. This will store all data points in a single measurement.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> ignore_attributes </span><span class="config-vars-type">string | list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="ignore_attributes" class="title-link" href="#ignore_attributes"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The list of attribute names to ignore when reporting to InfluxDB. Will be merged with the default <code>ignore_attributes</code> list when processing a state change event for a particular entity.</p>
</span></div>
</div>
</div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> component_config_domain </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="component_config_domain" class="title-link" href="#component_config_domain"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>This attribute contains domain-specific integration override values. See <a href="/getting-started/customizing-devices/">Customizing devices and services</a> for format.</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> override_measurement </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="override_measurement" class="title-link" href="#override_measurement"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Measurement name to use instead of a unit or default measurement. This will store all data points in a single measurement.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> ignore_attributes </span><span class="config-vars-type">string | list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="ignore_attributes" class="title-link" href="#ignore_attributes"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The list of attribute names to ignore when reporting to InfluxDB. Will be merged with the default <code>ignore_attributes</code> list when processing a state change event for a particular entity.</p>
</span></div>
</div>
</div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> component_config_glob </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="component_config_glob" class="title-link" href="#component_config_glob"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>This attribute contains integration-specific override values. See <a href="/getting-started/customizing-devices/">Customizing devices and services</a> for format.</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> override_measurement </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="override_measurement" class="title-link" href="#override_measurement"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Measurement name to use instead of unit or default measurement. This will store all data points in a single measurement.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> ignore_attributes </span><span class="config-vars-type">string | list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="ignore_attributes" class="title-link" href="#ignore_attributes"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The list of attribute names to ignore when reporting to InfluxDB. Will be merged with the default <code>ignore_attributes</code> list when processing a state change event for a particular entity.</p>
</span></div>
</div>
</div>
</div>
</div>
</div>
<h2>Configure filter <a class="title-link" name="configure-filter" href="#configure-filter"></a>
</h2>
<p>By default, no entity will be excluded. To limit which entities are being exposed to <code>InfluxDB</code>, you can use the <code>include</code> and <code>exclude</code> parameters.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example filter to include specified domains and exclude specified entities</span>
<span class="na">influxdb</span><span class="pi">:</span>
  <span class="na">include</span><span class="pi">:</span>
    <span class="na">domains</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">alarm_control_panel</span>
      <span class="pi">-</span> <span class="s">light</span>
    <span class="na">entity_globs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">binary_sensor.*_occupancy</span>
  <span class="na">exclude</span><span class="pi">:</span>
    <span class="na">entities</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">light.kitchen_light</span>
</code></pre></div></div>
<p>Filters are applied as follows:</p>
<ol>
<li>No filter
<ul>
<li>All entities included</li>
</ul>
</li>
<li>Only includes
<ul>
<li>Entity listed in entities include: include</li>
<li>Otherwise, entity matches domain include: include</li>
<li>Otherwise, entity matches glob include: include</li>
<li>Otherwise: exclude</li>
</ul>
</li>
<li>Only excludes
<ul>
<li>Entity listed in exclude: exclude</li>
<li>Otherwise, entity matches domain exclude: exclude</li>
<li>Otherwise, entity matches glob exclude: exclude</li>
<li>Otherwise: include</li>
</ul>
</li>
<li>Domain and/or glob includes (may also have excludes)
<ul>
<li>Entity listed in entities include: include</li>
<li>Otherwise, entity listed in entities exclude: exclude</li>
<li>Otherwise, entity matches glob include: include</li>
<li>Otherwise, entity matches glob exclude: exclude</li>
<li>Otherwise, entity matches domain include: include</li>
<li>Otherwise: exclude</li>
</ul>
</li>
<li>Domain and/or glob excludes (no domain and/or glob includes)
<ul>
<li>Entity listed in entities include: include</li>
<li>Otherwise, entity listed in exclude: exclude</li>
<li>Otherwise, entity matches glob exclude: exclude</li>
<li>Otherwise, entity matches domain exclude: exclude</li>
<li>Otherwise: include</li>
</ul>
</li>
<li>No Domain and/or glob includes or excludes
<ul>
<li>Entity listed in entities include: include</li>
<li>Otherwise: exclude</li>
</ul>
</li>
</ol>
<p>The following characters can be used in entity globs:</p>
<p><code>*</code> - The asterisk represents zero, one, or multiple characters
<code>?</code> - The question mark represents zero or one character</p>
<h2>Examples <a class="title-link" name="examples" href="#examples"></a>
</h2>
<h3>Full configuration for 1.xx installations <a class="title-link" name="full-configuration-for-1xx-installations" href="#full-configuration-for-1xx-installations"></a>
</h3>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">influxdb</span><span class="pi">:</span>
  <span class="na">host</span><span class="pi">:</span> <span class="s">192.168.1.190</span>
  <span class="na">port</span><span class="pi">:</span> <span class="m">20000</span>
  <span class="na">database</span><span class="pi">:</span> <span class="s">DB_TO_STORE_EVENTS</span>
  <span class="na">username</span><span class="pi">:</span> <span class="s">MY_USERNAME</span>
  <span class="na">password</span><span class="pi">:</span> <span class="s">MY_PASSWORD</span>
  <span class="na">ssl</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">verify_ssl</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">max_retries</span><span class="pi">:</span> <span class="m">3</span>
  <span class="na">default_measurement</span><span class="pi">:</span> <span class="s">state</span>
  <span class="na">exclude</span><span class="pi">:</span>
    <span class="na">entities</span><span class="pi">:</span>
       <span class="pi">-</span> <span class="s">entity.id1</span>
       <span class="pi">-</span> <span class="s">entity.id2</span>
    <span class="na">domains</span><span class="pi">:</span>
       <span class="pi">-</span> <span class="s">automation</span>
  <span class="na">include</span><span class="pi">:</span>
    <span class="na">entities</span><span class="pi">:</span>
       <span class="pi">-</span> <span class="s">entity.id3</span>
       <span class="pi">-</span> <span class="s">entity.id4</span>
  <span class="na">tags</span><span class="pi">:</span>
    <span class="na">instance</span><span class="pi">:</span> <span class="s">prod</span>
    <span class="na">source</span><span class="pi">:</span> <span class="s">hass</span>
</code></pre></div></div>
<h3>Full configuration for 2.xx installations <a class="title-link" name="full-configuration-for-2xx-installations" href="#full-configuration-for-2xx-installations"></a>
</h3>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">influxdb</span><span class="pi">:</span>
  <span class="na">api_version</span><span class="pi">:</span> <span class="m">2</span>
  <span class="na">ssl</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="na">host</span><span class="pi">:</span> <span class="s">localhost</span>
  <span class="na">port</span><span class="pi">:</span> <span class="m">9999</span>
  <span class="na">token</span><span class="pi">:</span> <span class="s">GENERATED_AUTH_TOKEN</span>
  <span class="na">organization</span><span class="pi">:</span> <span class="s">RANDOM_16_DIGIT_HEX_ID</span>
  <span class="na">bucket</span><span class="pi">:</span> <span class="s">BUCKET_NAME</span>
  <span class="na">tags</span><span class="pi">:</span>
    <span class="na">source</span><span class="pi">:</span> <span class="s">HA</span>
  <span class="na">tags_attributes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">friendly_name</span>
  <span class="na">default_measurement</span><span class="pi">:</span> <span class="s">units</span>
  <span class="na">exclude</span><span class="pi">:</span>
    <span class="na">entities</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">zone.home</span>
    <span class="na">domains</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">persistent_notification</span>
      <span class="pi">-</span> <span class="s">person</span>
  <span class="na">include</span><span class="pi">:</span>
    <span class="na">domains</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">sensor</span>
      <span class="pi">-</span> <span class="s">binary_sensor</span>
      <span class="pi">-</span> <span class="s">sun</span>
    <span class="na">entities</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">weather.home</span>
</code></pre></div></div>
<h2>Sensor <a class="title-link" name="sensor" href="#sensor"></a>
</h2>
<p>The <code>influxdb</code> sensor allows you to use values from an <a href="https://influxdb.com/" rel="external nofollow">InfluxDB<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> database to populate a sensor state. This can be used to present statistics as Home Assistant sensors, if used with the <code>influxdb</code> history integration. It can also be used with an external data source.</p>
<div class="alert alert-important">
  <p class="alert-title"><iconify-icon inline icon="mdi:message-alert-outline"></iconify-icon> Important</p>
  <div class="alert-content">
<p>You must configure the <code>influxdb</code> history integration in order to create <code>influxdb</code> sensors. If you just want to create sensors for an external InfluxDB database and you don’t want Home Assistant to write any data to it you can exclude all entities like this:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">influxdb</span><span class="pi">:</span>
  <span class="na">exclude</span><span class="pi">:</span>
    <span class="na">entity_globs</span><span class="pi">:</span> <span class="s2">"</span><span class="s">*"</span>
</code></pre></div></div>
  </div>
</div>
<h3>Configuration <a class="title-link" name="configuration-1" href="#configuration-1"></a>
</h3>
<p>To configure this sensor, you need to define the sensor connection variables and a list of queries to your <span class="terminology"><code>configuration.yaml</code><span class="terminology-tooltip">The configuration.yaml file is the main configuration file for Home Assistant. It lists the integrations to be loaded and their specific configurations. In some cases, the configuration needs to be edited manually directly in the configuration.yaml file. Most integrations can be configured in the UI.<a class="terminology-link" href="/docs/configuration/"> [Learn more]</a></span></span> file. A sensor will be created for each query:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">sensor</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">influxdb</span>
    <span class="na">queries</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">mean value of foo</span>
        <span class="na">where</span><span class="pi">:</span> <span class="s1">'</span><span class="s">"name"</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">'</span><span class="s1">'</span><span class="s">foo'</span><span class="s1">'</span><span class="s">'</span>
        <span class="na">measurement</span><span class="pi">:</span> <span class="s1">'</span><span class="s">"°C"'</span>
</code></pre></div></div>
<p>Note that 2.xx installations of InfluxDB only support queries in their Flux language. While this language was available in 1.xx installations, it was not the default and not used in the API so you may not be aware of it. You can learn more about it from their <a href="https://v2.docs.influxdata.com/v2.0/reference/flux/" rel="external nofollow">documentation<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> or by using the query builder in the UI.</p>
<p>You will need to construct your queries in this language in sensors for 2.xx installations, it looks like this:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">sensor</span><span class="pi">:</span> 
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">influxdb</span>
    <span class="na">api_version</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">organization</span><span class="pi">:</span> <span class="s">RANDOM_16_DIGIT_HEX_ID</span>
    <span class="na">token</span><span class="pi">:</span> <span class="s">GENERATED_AUTH_TOKEN</span>
    <span class="na">queries_flux</span><span class="pi">:</span> 
      <span class="pi">-</span> <span class="na">group_function</span><span class="pi">:</span> <span class="s">mean</span>
        <span class="na">imports</span><span class="pi">:</span> 
          <span class="pi">-</span> <span class="s">strings</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Mean</span><span class="nv"> </span><span class="s">humidity</span><span class="nv"> </span><span class="s">reported</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">past</span><span class="nv"> </span><span class="s">day"</span>
        <span class="na">query</span><span class="pi">:</span> <span class="pi">&gt;</span>
          <span class="s">filter(fn: (r) =&gt; r._field == "value" and r.domain == "sensor" and strings.containsStr(v: r.entity_id, substr: "humidity"))</span>
          <span class="s">|&gt; keep(columns: ["_value"])</span>
        <span class="na">range_start</span><span class="pi">:</span> <span class="s2">"</span><span class="s">-1d"</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="influxdb-configuration-variables" href="#influxdb-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class="">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> api_version </span><span class="config-vars-type">string</span><a name="api_version" class="title-link" href="#api_version"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>API version to use. Valid values are <code>1</code> or <code>2</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> ssl </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="ssl" class="title-link" href="#ssl"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Use HTTPS instead of HTTP to connect. 2.xx - Defaults to <code>true</code> for 2.xx, otherwise <code>false</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> host </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: localhost</span>)</span><a name="host" class="title-link" href="#host"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>IP address or domain of your database host, e.g., 192.168.1.10. 2.xx - Defaults to ‘us-west-2-1.aws.cloud2.influxdata.com’ for 2.xx, not ‘localhost’.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> port </span><span class="config-vars-type">integer</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: 8086</span>)</span><a name="port" class="title-link" href="#port"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Port to use. 2.xx - No default port for 2.xx, otherwise 8086.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> path </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="path" class="title-link" href="#path"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Path to use if your InfluxDB is running behind a reverse proxy.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> username </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="inclusive">Inclusive</span><span class="default"></span>)</span><a name="username" class="title-link" href="#username"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>1.xx only - The username of the database user. The user needs read/write privileges on the database.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> password </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="inclusive">Inclusive</span><span class="default"></span>)</span><a name="password" class="title-link" href="#password"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>1.xx only - The password for the database user account. Needed with <code>username</code> configuration variable.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> database </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: home_assistant</span>)</span><a name="database" class="title-link" href="#database"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>1.xx only - Name of the database to use. The database must already exist. Sets the default database for sensors, individual sensors can also read from a different database.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> verify_ssl </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: true</span>)</span><a name="verify_ssl" class="title-link" href="#verify_ssl"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>1.xx only - Verify SSL certificate for HTTPS request. For 2.xx SSL verification is required, library provides no way to disable it.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> token </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="inclusive">Inclusive</span><span class="default"></span>)</span><a name="token" class="title-link" href="#token"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>2.xx only - Auth token with READ access to your chosen Organization and Bucket. Needed with <code>organization</code> configuration variable.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> organization </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="inclusive">Inclusive</span><span class="default"></span>)</span><a name="organization" class="title-link" href="#organization"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>2.xx only - Organization ID to read from. To obtain this, open the UI of your 2.xx installation, the URL at the top will have it after <code>/orgs</code>. For example, in InfluxDB Cloud it looks like this: <a href="https://us-west-2-1.aws.cloud2.influxdata.com/orgs/%7BOrganizationID%7D" rel="external nofollow">https://us-west-2-1.aws.cloud2.influxdata.com/orgs/{OrganizationID}<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>. Needed with <code>token</code> configuration variable.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> bucket </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: Home Assistant</span>)</span><a name="bucket" class="title-link" href="#bucket"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>2.xx only - Name of the bucket (not the generated bucket ID) within your Organization to read from. This sets the default bucket for sensors, individual sensors can also read from a different bucket.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> queries </span><span class="config-vars-type">list</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="queries" class="title-link" href="#queries"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>1.xx only - List of sensors to expose in Home Assistant. Each sensor’s state is set by configuring an InfluxQL query.</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> name </span><span class="config-vars-type">string</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="name" class="title-link" href="#name"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The name of the sensor.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unique_id </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="unique_id" class="title-link" href="#unique_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The unique ID for this query. This allows changing the name, icon and entity_id from the web interface.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unit_of_measurement </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="unit_of_measurement" class="title-link" href="#unit_of_measurement"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines the units of measurement of the sensor, if any.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> measurement </span><span class="config-vars-type">string</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="measurement" class="title-link" href="#measurement"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines the measurement name in InfluxDB (the FROM clause of the query).</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> where </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="where" class="title-link" href="#where"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines the data selection clause (the where clause of the query). This supports <a href="/docs/configuration/templating/#building-templates">templates</a>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> value_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="value_template" class="title-link" href="#value_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a <a href="/docs/configuration/templating/#processing-incoming-data">template</a> to extract a value from the payload.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> database </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: home_assistant</span>)</span><a name="database" class="title-link" href="#database"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Name of the database to use.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> group_function </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: mean</span>)</span><a name="group_function" class="title-link" href="#group_function"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The group function to be used.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> field </span><span class="config-vars-type">string</span><span class="config-vars-required"> <span class="true">Required</span><span class="default">, default: value</span></span><a name="field" class="title-link" href="#field"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The field name to select.</p>
</span></div>
</div>
</div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> queries_flux </span><span class="config-vars-type">list</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="queries_flux" class="title-link" href="#queries_flux"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>2.xx only - List of sensors to expose in Home Assistant. Each sensor’s state is set by configuring a Flux query.</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> name </span><span class="config-vars-type">string</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="name" class="title-link" href="#name"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The name of the sensor.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unique_id </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="unique_id" class="title-link" href="#unique_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The unique ID for this query. This allows changing the name, icon and entity_id from the web interface.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unit_of_measurement </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="unit_of_measurement" class="title-link" href="#unit_of_measurement"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines the units of measurement of the sensor, if any.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> range_start </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: -15m</span>)</span><a name="range_start" class="title-link" href="#range_start"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Duration or time value to start range from. All Flux queries require a <code>range</code> filter, one is automatically added to the beginning of your Flux query in the form of <code>range(start: {range_start}, stop: {range_stop})</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> range_stop </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: now()</span>)</span><a name="range_stop" class="title-link" href="#range_stop"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Duration or time value to stop range at. See <code>range_start</code> above for how this is used in query.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> query </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="query" class="title-link" href="#query"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>One or more flux filters used to get to the data you want. These should limit resultset to one table, or any beyond the first will be ignored. Your query should not begin or end with a pipe (<code>|&gt;</code>). This supports <a href="/docs/configuration/templating/#building-templates">templates</a>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> group_function </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="group_function" class="title-link" href="#group_function"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The group function to be used. If provided, this will add a filter to the end of your query like this <code>{group_function}(column: "_value")</code>. Note that unlike the 1.xx queries, this <strong>does not</strong> default to mean. You can omit if you wish to use your own aggregator, which takes additional/different parameters or want to act on a different column. If omitted, then a filter of <code>limit(n: 1)</code> will be added to the end instead to restrict to one result per table.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> value_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="value_template" class="title-link" href="#value_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a <a href="/docs/configuration/templating/#processing-incoming-data">template</a> to extract a value from the payload. Note that <code>value</code> will be set to the value of the <code>_value</code> field in your query output.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> bucket </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: Home Assistant</span>)</span><a name="bucket" class="title-link" href="#bucket"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Name of the bucket within your Organization to read from.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> imports </span><span class="config-vars-type">string | list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="imports" class="title-link" href="#imports"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Libraries to import in order to execute your query. Ex. <code>strings</code>, <code>date</code>, <code>experimental/query</code>, etc.</p>
</span></div>
</div>
</div>
</div>
</div>
</div>
<h2>Examples <a class="title-link" name="examples-1" href="#examples-1"></a>
</h2>
<h3>Full configuration for 1.xx installations <a class="title-link" name="full-configuration-for-1xx-installations-1" href="#full-configuration-for-1xx-installations-1"></a>
</h3>
<p>The example configuration entry below create two request to your local InfluxDB instance, one to the database <code>db1</code>, the other to <code>db2</code>:</p>
<ul>
<li><code>select last(value) as value from "°C" where "name" = "foo"</code></li>
<li><code>select min(tmp) as value from "%" where "entity_id" = ''salon'' and time &gt; now() - 1h</code></li>
</ul>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">sensor</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">influxdb</span>
    <span class="na">host</span><span class="pi">:</span> <span class="s">localhost</span>
    <span class="na">username</span><span class="pi">:</span> <span class="s">home-assistant</span>
    <span class="na">password</span><span class="pi">:</span> <span class="s">password</span>
    <span class="na">queries</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">last value of foo</span>
        <span class="na">unit_of_measurement</span><span class="pi">:</span> <span class="s">°C</span>
        <span class="na">value_template</span><span class="pi">:</span> <span class="s1">'</span><span class="s">{{</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(1)</span><span class="nv"> </span><span class="s">}}'</span>
        <span class="na">group_function</span><span class="pi">:</span> <span class="s">last</span>
        <span class="na">where</span><span class="pi">:</span> <span class="s1">'</span><span class="s">"name"</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">'</span><span class="s1">'</span><span class="s">foo'</span><span class="s1">'</span><span class="s">'</span>
        <span class="na">measurement</span><span class="pi">:</span> <span class="s1">'</span><span class="s">"°C"'</span>
        <span class="na">field</span><span class="pi">:</span> <span class="s">value</span>
        <span class="na">database</span><span class="pi">:</span> <span class="s">db1</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Min for last hour</span>
        <span class="na">unit_of_measurement</span><span class="pi">:</span> <span class="s2">"</span><span class="s">%"</span>
        <span class="na">value_template</span><span class="pi">:</span> <span class="s1">'</span><span class="s">{{</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(1)</span><span class="nv"> </span><span class="s">}}'</span>
        <span class="na">group_function</span><span class="pi">:</span> <span class="s">min</span>
        <span class="na">where</span><span class="pi">:</span> <span class="s1">'</span><span class="s">"entity_id"</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">'</span><span class="s1">'</span><span class="s">salon'</span><span class="s1">'</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">time</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">now()</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">1h'</span>
        <span class="na">measurement</span><span class="pi">:</span> <span class="s1">'</span><span class="s">"%"'</span>
        <span class="na">field</span><span class="pi">:</span> <span class="s">tmp</span>
        <span class="na">database</span><span class="pi">:</span> <span class="s">db2</span>
</code></pre></div></div>
<h3>Full configuration for 2.xx installations <a class="title-link" name="full-configuration-for-2xx-installations-1" href="#full-configuration-for-2xx-installations-1"></a>
</h3>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">sensor</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">influxdb</span>
    <span class="na">api_version</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">token</span><span class="pi">:</span> <span class="s">GENERATED_AUTH_TOKEN</span>
    <span class="na">organization</span><span class="pi">:</span> <span class="s">RANDOM_16_DIGIT_HEX_ID</span>
    <span class="na">bucket</span><span class="pi">:</span> <span class="s">BUCKET_NAME</span>
    <span class="na">queries_flux</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">range_start</span><span class="pi">:</span> <span class="s2">"</span><span class="s">-1d"</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">How</span><span class="nv"> </span><span class="s">long</span><span class="nv"> </span><span class="s">have</span><span class="nv"> </span><span class="s">I</span><span class="nv"> </span><span class="s">been</span><span class="nv"> </span><span class="s">here"</span>
        <span class="na">query</span><span class="pi">:</span> <span class="pi">&gt;</span>
          <span class="s">filter(fn: (r) =&gt; r._domain == "person" and r._entity_id == "me" and r._value != "{{ states('person.me') }}")</span>
          <span class="s">|&gt; map(fn: (r) =&gt; ({ _value: r._time }))</span>
        <span class="na">value_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">relative_time(strptime(value,</span><span class="nv"> </span><span class="s">'%Y-%m-%d</span><span class="nv"> </span><span class="s">%H:%M:%S</span><span class="nv"> </span><span class="s">%Z'))</span><span class="nv"> </span><span class="s">}}"</span>
      <span class="pi">-</span> <span class="na">range_start</span><span class="pi">:</span> <span class="s2">"</span><span class="s">-1d"</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Cost</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">my</span><span class="nv"> </span><span class="s">house</span><span class="nv"> </span><span class="s">today</span><span class="nv"> </span><span class="s">across</span><span class="nv"> </span><span class="s">all</span><span class="nv"> </span><span class="s">power</span><span class="nv"> </span><span class="s">sensor"</span>
        <span class="na">query</span><span class="pi">:</span> <span class="pi">&gt;</span>
          <span class="s">filter(fn: (r) =&gt; r.domain == "sensor" and r._field == "value" and regexp.matchRegexpString(r: /_power$/, v: r.entity_id))</span>
          <span class="s">|&gt; keep(columns: ["_value", "_time"])</span>
          <span class="s">|&gt; sort(columns: ["_time"], desc: false)</span>
          <span class="s">|&gt; integral(unit: 5s, column: "_value")</span>
        <span class="na">imports</span><span class="pi">:</span> <span class="s">regexp</span>
        <span class="na">value_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">value|float</span><span class="nv"> </span><span class="s">/</span><span class="nv"> </span><span class="s">24.0</span><span class="nv"> </span><span class="s">/</span><span class="nv"> </span><span class="s">1000.0</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">states('sensor.current_cost_per_kwh')|float</span><span class="nv"> </span><span class="s">}}"</span>
      <span class="pi">-</span> <span class="na">range_start</span><span class="pi">:</span> <span class="s2">"</span><span class="s">-1d"</span>
        <span class="na">bucket</span><span class="pi">:</span> <span class="s">Glances Bucket</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Average</span><span class="nv"> </span><span class="s">CPU</span><span class="nv"> </span><span class="s">temp</span><span class="nv"> </span><span class="s">today"</span>
        <span class="na">query</span><span class="pi">:</span> <span class="s2">"</span><span class="s">filter(fn:</span><span class="nv"> </span><span class="s">(r)</span><span class="nv"> </span><span class="s">=&gt;</span><span class="nv"> </span><span class="s">r._field</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">r.entity_id</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="se">\"</span><span class="s">glances_cpu_temperature</span><span class="se">\"</span><span class="s">)"</span>
        <span class="na">group_function</span><span class="pi">:</span> <span class="s">mean</span>
</code></pre></div></div>
<p>Note that when working with Flux queries, the resultset is broken into tables, you can see how this works in the Data Explorer of the UI. If you are operating on data created by the InfluxDB history integration, this means by default, you will have a table for each entity and each attribute of each entity (other then <code>unit_of_measurement</code> and any others you promoted to tags).</p>
<p>This is a lot more tables compared to 1.xx queries, where you essentially had one table per <code>unit_of_measurement</code> across all entities. You can still create aggregate metrics across multiple sensors though. As you can see in the example above, a good way to do this is with the <a href="https://v2.docs.influxdata.com/v2.0/reference/flux/stdlib/built-in/transformations/keep/" rel="external nofollow">keep<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> or <a href="https://v2.docs.influxdata.com/v2.0/reference/flux/stdlib/built-in/transformations/drop/" rel="external nofollow">drop<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> filters. When you remove key columns Influx merges tables, allowing you to make many tables that share a schema for <code>_value</code> into one.</p>
<h2>Querying your data in Influx <a class="title-link" name="querying-your-data-in-influx" href="#querying-your-data-in-influx"></a>
</h2>
<h3>Sensors <a class="title-link" name="sensors" href="#sensors"></a>
</h3>
<p>For sensors with a unit of measurement defined the unit of measurement is used as the measurement name and entries are tagged with the second part of the <code>entity_id</code>. Therefore you need to add a WHERE clause to the query to filter out values.</p>
<p>For example a query on a <code>%</code> battery for <code>sensor.multi_sensor_battery_level</code>:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="nv">"%"</span> <span class="k">WHERE</span> <span class="nb">time</span> <span class="o">&gt;</span> <span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="mi">12</span><span class="n">h</span> <span class="k">AND</span> <span class="nv">"entity_id"</span> <span class="o">=</span> <span class="s1">'multi_sensor_battery_level'</span><span class="p">;</span>
</code></pre></div></div>
<p>Or for temperatures represented in <code>°C</code>:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="nv">"°C"</span> <span class="k">WHERE</span> <span class="nb">time</span> <span class="o">&gt;</span> <span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="n">h</span><span class="p">;</span>
</code></pre></div></div>
<h3>Everything else <a class="title-link" name="everything-else" href="#everything-else"></a>
</h3>
<p>Everything else can be queried using the <code>entity_id</code> as its measurement name.</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="nv">"binary_sensor.front_doorbell"</span> <span class="k">WHERE</span> <span class="nb">time</span> <span class="o">&gt;</span> <span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="mi">24</span><span class="n">h</span><span class="p">;</span>
</code></pre></div></div>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="sql"><span class="k">SELECT</span> <span class="nv">"temperature"</span> <span class="k">FROM</span> <span class="nv">"climate.kitchen"</span> <span class="k">WHERE</span> <span class="nb">time</span> <span class="o">&gt;</span> <span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="mi">24</span><span class="n">h</span><span class="p">;</span>
</code></pre></div></div>


  

<div class="text related-topics">
  <h2>Related topics<a class="title-link" href="#related-topics" name="related-topics"></a>
</h2>
  <ul>
    
    
    
    
    
    <li>
      <a href="/needlehack-blog/docs/configuration/" class="topic">
        Configuration file
      </a>
    </li>
    </ul>
</div>


  
<div class="material-card text feedback">
  <h4>
<iconify-icon inline icon="mdi:feedback" title="Feedback"></iconify-icon> <b> Help us improve our documentation</b><a href="#feedback_section" class="title-link" name="feedback_section"></a>
</h4>
  Suggest an edit to this page, or provide/view feedback for this page.
  <div class="links">
    <ul aria-label="Page feedback options">
    <li><a href="https://github.com/home-assistant/home-assistant.io/tree/current/source/_integrations/influxdb.markdown" target="_blank" title="Edit this page"><iconify-icon inline icon="mdi:edit"></iconify-icon> Edit</a></li>
    
    <li><a href="https://github.com/home-assistant/home-assistant.io/issues/new?template=feedback.yml&amp;url=https%3A%2F%2Fivangrod.github.io%2Fintegrations%2Finfluxdb%2F&amp;version=2025.9.4&amp;labels=current,integration%3A%20influxdb" target="_blank" title="Provide feedback on this page"><iconify-icon inline icon="mdi:comment-edit-outline"></iconify-icon> Provide feedback</a></li>
    <li><a href="https://github.com/home-assistant/home-assistant.io/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3A%22integration%3A+influxdb%22" target="_blank" title="View pending feedback for this page"><iconify-icon inline icon="mdi:comment-text-multiple-outline"></iconify-icon> View pending feedback</a></li>
    
  </ul>
  </div>
</div>


</article>

            
          </div>


          
            
              <aside id="integration-sidebar" class="grid__item one-third desk-wide-one-quarter lap-one-whole palm-one-whole">
              
            <div class="grid">
  




  


<section class="aside-module grid__item one-whole lap-one-half">
  <div class='brand-logo-container section'>
      <img src='https://brands.home-assistant.io/_/influxdb//logo.png' srcset='https://brands.home-assistant.io/_/influxdb/logo@2x.png 2x' /></div>

  <div class='section'>The InfluxDB  integration  was introduced in Home Assistant 0.9, and it's used by <a title="Open analytics.home-assistant.io" href="https://analytics.home-assistant.io/integrations" target="_blank" rel="noopener">
        
          6.9%</a> of the active installations.
        
      
    
  </div>
    <div class='section'>
      <iconify-icon icon='mdi:upload-network-outline'></iconify-icon>&nbsp;Its IoT class is <a href='/blog/2016/02/12/classifying-the-internet-of-things/#classifiers'>Local Push.</a>
    </div>
  <div class='section'>
    <a href='/docs/quality_scale/#-legacy'>💾 Legacy integration</a><br /></div>
  <div class='section'>
    <a href="https://github.com/home-assistant/core/tree/dev/homeassistant/components/influxdb" target="_blank"><iconify-icon inline icon='simple-icons:github' title='Github'></iconify-icon> View source on GitHub</a><br />
    <a href="https://github.com/home-assistant/core/issues?q=is%3Aissue+is%3Aopen+label%3A%22integration%3A+influxdb%22" target="_blank"><iconify-icon inline icon='mdi:bug' title='Bug'></iconify-icon> View known issues</a>
  </div></section>

<section class="aside-module grid__item one-whole lap-one-half">
  <div class='section'>
    <h1 class="title epsilon"><iconify-icon inline icon='mdi:person-heart' title='Person heart'></iconify-icon> Integration owners</h1>
    
        
        

          
          <div class="section">
            We are incredibly grateful to the following contributors who currently maintain this integration:<br />
          </div>
          <div class="section"><a href="https://github.com/mdegat01" target="_blank"><img class="codeowner-avatar" src="https://avatars.githubusercontent.com/mdegat01?size=96" alt="@mdegat01"/> @mdegat01</a><br /></div>
        
    
  </div>
</section>






  <section id="toc-module" class="aside-module grid__item one-whole lap-one-half">
        <div class='section'>
          <h1 class="title epsilon"><iconify-icon inline icon='mdi:toc' title='Toc'></iconify-icon> On this page</h1>
          <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#configuration">Configuration</a></li>
<li class="toc-entry toc-h2"><a href="#configure-filter">Configure filter</a></li>
<li class="toc-entry toc-h2"><a href="#examples">Examples</a>
<ul>
<li class="toc-entry toc-h3"><a href="#full-configuration-for-1xx-installations">Full configuration for 1.xx installations</a></li>
<li class="toc-entry toc-h3"><a href="#full-configuration-for-2xx-installations">Full configuration for 2.xx installations</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#sensor">Sensor</a>
<ul>
<li class="toc-entry toc-h3"><a href="#configuration-1">Configuration</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#examples-1">Examples</a>
<ul>
<li class="toc-entry toc-h3"><a href="#full-configuration-for-1xx-installations-1">Full configuration for 1.xx installations</a></li>
<li class="toc-entry toc-h3"><a href="#full-configuration-for-2xx-installations-1">Full configuration for 2.xx installations</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#querying-your-data-in-influx">Querying your data in Influx</a>
<ul>
<li class="toc-entry toc-h3"><a href="#sensors">Sensors</a></li>
<li class="toc-entry toc-h3"><a href="#everything-else">Everything else</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#related-topics">Related topics</a></li>
</ul>
        </div>
      </section><section id="category-module" class="aside-module grid__item one-whole lap-one-half">
      <div class='section'>
        <h1 class="title epsilon"><iconify-icon inline icon='mdi:category' title='Category'></iconify-icon> Categories</h1>
        <ul class='divided'><li>
            <a href='/integrations/#history'>History</a>
          </li><li>
            <a href='/integrations/#sensor'>Sensor</a>
          </li></ul>
      </div>
    </section></div>

          </aside>
          
        </div>
      </div>

      <footer>
        <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="skyline grid">
        <div class="skyline grid__item one-whole">
          <div class="footer-skyline">
          </div>
        </div>
      </div>
      <div class="footer-nav grid">
        <div class="company grid__item one-quarter lap-one-half palm-one-whole">
          <div class="title">
            <img
              src="/needlehack-blog/images/footer-logo-text.svg"
              height="72"
              alt="Home Assistant"
            />
          </div>
          <p>
            Home Assistant is a project from the <a href="https://www.openhomefoundation.org/">Open Home Foundation</a>, sponsored by <a href="https://www.nabucasa.com/">Nabu Casa</a>.
          </p>
        </div>

        <div class="grid__item one-quarter lap-one-half palm-one-whole">
          <h3>Join us and contribute!</h3>
          <ul>
            <li><a class="external-link" href="https://github.com/home-assistant/">GitHub repo <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://developers.home-assistant.io">Developers Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://design.home-assistant.io">Design Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://data.home-assistant.io">Data Science Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://community.home-assistant.io">Community Forum <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://creators.home-assistant.io/">Creator Network <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://works-with.home-assistant.io/">Works With Home Assistant <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a href="/needlehack-blog/community">Our community</li>
            <li><a href="/needlehack-blog/help/reporting_issues/">Reporting issues</a></li>
          </ul>
          <h3>System status</h3>
          <ul>
            <li>
              <a class="external-link"  href="https://alerts.home-assistant.io">Integration Alerts <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a>
            </li>
            <li><a href="/needlehack-blog/security/">Security Alerts</a></li>
            <li>
              <a class="external-link" href="https://status.home-assistant.io">System Status <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a>
            </li>
          </ul>
        </div>

        <div class="grid__item one-quarter lap-one-half palm-one-whole">
          <h3>Companion apps</h3>
          <ul>
            <li><a class="external-link" href="https://apps.apple.com/us/app/home-assistant/id1099568401">iOS and Apple devices</a></li>
            <li><a class="external-link" href="https://play.google.com/store/apps/details?id=io.homeassistant.companion.android">Android and Wear OS</a></li>
            <li><a class="external-link" href="https://companion.home-assistant.io/">...and more!</a></li>
          </ul>
          <h3>Governance</h3>
          <ul>
            <li><a href="/needlehack-blog/privacy/">Privacy Notices</a></li>
            <li><a href="/needlehack-blog/developers/cla/">Contributor License Agreement</a></li>
            <li><a href="/needlehack-blog/tos/">Terms of Service</a></li>
            <li><a href="/needlehack-blog/code_of_conduct/">Code of Conduct</a></li>
            <li><a href="/needlehack-blog/developers/credits/">Credits</a></li>
            <li><a href="/needlehack-blog/developers/license/">License</a></li>
          </ul>
        </div>

        <div class="socials grid__item one-quarter lap-one-half palm-one-whole">

          <h3>Follow us</h3>
          <p><a class="external-link" href='https://newsletter.openhomefoundation.org/#/portal'>Sign up for our newsletter <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></p>
          <div class="icons">
            <a
              rel="me"
              href="https://youtube.com/@home_assistant"
              title="YouTube"
              target="_blank"
              ><iconify-icon icon="simple-icons:youtube"></iconify-icon></a>
            <a
              rel="me"
              href="https://reddit.com/r/homeassistant"
              title="Reddit"
              target="_blank"
              ><iconify-icon icon="simple-icons:reddit"></iconify-icon></a>
            <a
              rel="me"
              href="https://github.com/home-assistant/home-assistant"
              title="GitHub"
              target="_blank"
              ><iconify-icon icon="simple-icons:github"></iconify-icon></a>
            <br />
            <a
              rel="me"
              href="https://fosstodon.org/@homeassistant"
              title="Mastodon"
              target="_blank"
              ><iconify-icon icon="simple-icons:mastodon"></iconify-icon></a>
            <a
              rel="me"
              href="https://bsky.app/profile/home-assistant.io"
              title="Bluesky"
              target="_blank"
             ><iconify-icon icon="simple-icons:bluesky"></iconify-icon></a>
            <a
              rel="me"
              href="https://x.com/home_assistant"
              title="X"
              target="_blank"
             ><iconify-icon icon="simple-icons:x"></iconify-icon></a>
            <br />
            <a
              rel="me"
              href="https://www.facebook.com/homeassistantio"
              title="Facebook"
              target="_blank"
              ><iconify-icon icon="simple-icons:facebook"></iconify-icon></a>
            <a
              rel="me"
              href="https://www.instagram.com/homeassistant/"
              title="Instagram"
              target="_blank"
              ><iconify-icon icon="simple-icons:instagram"></iconify-icon></a>
            <a
              rel="me"
              href="https://www.linkedin.com/company/home-assistant"
              title="LinkedIn"
              target="_blank"
              ><iconify-icon icon="simple-icons:linkedin"></iconify-icon></a>
          </div>

          <div class="web-notice">
            <p>
              For partnership inquiries please check out <a href="https://works-with.home-assistant.io/">Works With Home Assistant</a>. For media, get in touch <a href="mailto:media@openhomefoundation.org">here</a>. For other questions, you can contact us <a href="mailto:hello@home-assistant.io">here</a> (No technical support!)
            </p>
            <p>
              Website powered by <a href="https://jekyllrb.com/">Jekyll</a><br />
              Originally based on the <a href="https://github.com/coogie/oscailte">Oscailte theme</a>
            </p>
            <a href="https://www.netlify.com">
              <img
                src="/needlehack-blog/images/frontpage/netlify.svg"
                alt="Deploys by Netlify Badge"
              />
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

      </footer>

    </div>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@justinribeiro/lite-youtube@1.3.1/lite-youtube.js"></script>

<script src="/needlehack-blog/javascripts/terminology_tooltip.js" type="text/javascript" defer></script>

<script src="/needlehack-blog/javascripts/prism.js" type="text/javascript" defer></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@3/dist/umd/index.min.js"></script>
<script type="text/javascript">
  docsearch({
    container: '#docsearch',
    appId: 'FBHBYS3J0U',
    indexName: 'home-assistant',
    apiKey: "ba6f7e6d97b3d3d2f778978c742a47c6",
  });
  document.querySelector('.site-title').addEventListener('contextmenu', function (ev) {
    ev.preventDefault();
    document.location.assign("https://design.home-assistant.io/#brand/logo")
  });
</script>




<script type="text/javascript">
  {
    const article = document.querySelector("article.post");
    if (article) {
      const iframes = article.querySelectorAll("iframe[data-src]");
      let loaded = false;
      if (iframes) {
        document.addEventListener('mousemove', loadLazyFrames, { passive: true, once: true });
        document.addEventListener('touchmove', loadLazyFrames, { passive: true, once: true });
        document.addEventListener('scroll', loadLazyFrames, { passive: true, once: true });
  
        function loadLazyFrames() {
          if (loaded) return;
          loaded = true;
  
          iframes.forEach((iframe) => {
            const src = iframe.getAttribute("data-src");
            if (src) {
              iframe.setAttribute("src", src);
              iframe.removeAttribute("data-src");
            }
          });
        }
      }
    }
  }
</script>

  </body>
</html>
