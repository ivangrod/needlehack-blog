



<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Model Context Protocol Server - Home Assistant</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Instructions on how to add a Model Context Protocol Server to Home Assistant.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://www.home-assistant.io/integrations/mcp_server/">

    <meta property="fb:app_id" content="338291289691179">
    <meta property="og:title" content="Model Context Protocol Server">
    <meta property="og:site_name" content="Home Assistant">
    <meta property="og:url" content="https://www.home-assistant.io/integrations/mcp_server/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Instructions on how to add a Model Context Protocol Server to Home Assistant.">
    <meta property="og:image" content="https://ivangrod.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@home_assistant">
    
    <meta name="twitter:title" content="Model Context Protocol Server">
    <meta name="twitter:description" content="Instructions on how to add a Model Context Protocol Server to Home Assistant.">
    <meta name="twitter:image" content="https://ivangrod.github.io/images/default-social.png">
    <link rel="me" href="https://fosstodon.org/@homeassistant">

    <link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3/dist/style.min.css" rel="stylesheet" />
    <link href="/stylesheets/prism.css?8acb84bc0387c9548a63998fcfea0139" rel="stylesheet">
    <link href="/stylesheets/screen.css?3d79f9acc1b3464b313d68cd5a171ca1" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Home Assistant" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&amp;family=Instrument+Sans:ital,wdth,wght@0,99,400..700;1,99,400..700&amp;" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/2.1.0/iconify-icon.min.js"></script>
  </head>

  <body  class=" integration-page  ">
    <header class='site-header '>
      



<div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/needlehack-blog/" class="site-title">
        <div class="logo"></div>
      </a>
      <a class="release-date" href="/blog/2025/09/03/release-20259/" title="Latest version 2025.9.4 released September 19, 2025">
        2025.9.4
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle" />
        <label
          for="toggle"
          class="toggle"
          data-open="Main Menu"
          data-close="‚®â"
        ></label>
        <ul class="menu pull-right">
          <li><a  href="/needlehack-blog/installation/">Getting started</a></li>
          <li>
            <a  href="/needlehack-blog/docs/">Documentation <iconify-icon inline icon='mdi:chevron-down' title='Chevron down'></iconify-icon></a>
            <ul>
              <li><a href="/needlehack-blog/installation/"><iconify-icon inline icon='simple-icons:homeassistant' title='Homeassistant'></iconify-icon> Installation</a></li>
              <li><a href="/needlehack-blog/docs/automation/"><iconify-icon inline icon='mdi:robot-happy' title='Robot happy'></iconify-icon> Automations</a></li>
              <li><a href="/needlehack-blog/dashboards/"><iconify-icon inline icon='mdi:gauge' title='Gauge'></iconify-icon> Dashboards</a></li>
              <li><a href="/needlehack-blog/voice_control/"><iconify-icon inline icon='mdi:comment-processing-outline' title='Comment processing outline'></iconify-icon> Voice assistants</a></li>
              <li><a href="/needlehack-blog/docs/organizing/"><iconify-icon inline icon='mdi:view-grid' title='View grid'></iconify-icon> Device organization</a></li>
              <li><a href="/needlehack-blog/docs/energy/"><iconify-icon inline icon='mdi:solar-power-variant' title='Solar power variant'></iconify-icon> Energy management</a></li>
              <li><a href="/needlehack-blog/docs/configuration/"><iconify-icon inline icon='mdi:cog' title='Cog'></iconify-icon> Advanced configuration</a></li>
            </ul>
          </li>
          <li><a class="active" href="/needlehack-blog/integrations/">Integrations</a></li>
          <li><a  href="/needlehack-blog/blog/">Blog</a></li>
          <li><a  href="/needlehack-blog/help/">Need help?</a></li>
          <li>
            <div class="docsearch" id="docsearch"></div>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>

    </header>

    <div class="page-content">

      

      <div class="grid-wrapper">
        <div class="grid grid-center">

          <aside id="toc-bar" class="grid__item desk-wide-one-sixth">
                <section class="aside-module grid__item one-whole">
                  <div class='section'>
                    <h1 class="title epsilon"><iconify-icon inline icon='mdi:toc' title='Toc'></iconify-icon> On this page</h1>
                    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#prerequisites">Prerequisites</a></li>
<li class="toc-entry toc-h2"><a href="#configuration">Configuration</a></li>
<li class="toc-entry toc-h2"><a href="#configuration-options">Configuration options</a></li>
<li class="toc-entry toc-h2"><a href="#architecture-overview">Architecture overview</a></li>
<li class="toc-entry toc-h2"><a href="#client-configuration">Client configuration</a>
<ul>
<li class="toc-entry toc-h3"><a href="#access-control">Access control</a></li>
<li class="toc-entry toc-h3"><a href="#example-claude-for-desktop">Example: Claude for Desktop</a></li>
<li class="toc-entry toc-h3"><a href="#example-cursor">Example: Cursor</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#supported-functionality">Supported functionality</a>
<ul>
<li class="toc-entry toc-h3"><a href="#tools">Tools</a></li>
<li class="toc-entry toc-h3"><a href="#prompts">Prompts</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#known-limitations">Known Limitations</a></li>
<li class="toc-entry toc-h2"><a href="#troubleshooting">Troubleshooting</a>
<ul>
<li class="toc-entry toc-h3"><a href="#llm-client-cannot-connect-to-home-assistant-mcp-server">LLM client cannot connect to Home Assistant MCP server</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#removing-the-integration">Removing the integration</a>
<ul>
<li class="toc-entry toc-h3"><a href="#to-remove-an-integration-instance-from-home-assistant">To remove an integration instance from Home Assistant</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#related-topics">Related topics</a></li>
</ul>
                  </div>
                </section>
              </aside> 

          
          <div class="grid__item two-thirds desk-wide-seven-twelfths lap-one-whole palm-one-whole">
          

            
              <article class="page">
  
  <header>
    
    
      <div class="breadcrumbs">
        <a href="/needlehack-blog/">Home</a>
        
          
            
            ‚ñ∏ <a href="/integrations/">Integrations</a>
          
        
          
            ‚ñ∏ 
          
        
      </div>
    
    <h1 class="title indent">
      
        Model Context Protocol Server
      
    </h1>
  </header>
  
    
    
    
  
  
  <p>The <a href="https://modelcontextprotocol.io" rel="external nofollow">Model Context Protocol<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> is an open protocol that standardizes how applications provide context to <abbr title="Large Language Models">LLMs</abbr>. The <strong>Model Context Protocol Server</strong> (MCP) integration enables using Home Assistant to provide context for <abbr title="Model Context Protocol">MCP</abbr> LLM Client Applications. For example, you can control your lights from Claude Desktop, or expose your Google Tasks to-do list as a tool.</p>
<p>Controlling Home Assistant is done by providing <abbr title="Model Context Protocol">MCP</abbr> clients access to the Assist API of Home Assistant. You can control what devices and entities it can access from the <a href="https://my.home-assistant.io/redirect/voice_assistants" class="my" target="_blank">exposed entities page</a>.</p>
<h2>Prerequisites <a class="title-link" name="prerequisites" href="#prerequisites"></a>
</h2>
<ul>
<li>You need an <a href="https://modelcontextprotocol.io/clients" rel="external nofollow">MCP client<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> LLM Application such as <a href="https://claude.ai/download" rel="external nofollow">Claude for Desktop<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</li>
<li>Since most clients do not support native remote servers, you need an additional local MCP server remote gateway.</li>
</ul>
<p>For detailed configuration instructions, refer to the <a href="#client-configuration">Client configuration</a> section.</p>
<h2>Configuration <a class="title-link" name="configuration" href="#configuration"></a>
</h2>
<p>To add the <strong>Model Context Protocol Server</strong> service to your Home Assistant instance, use this My button:</p>
<p><a href="https://my.home-assistant.io/redirect/config_flow_start?domain=mcp_server" class="my badge" target="_blank"><img src="https://my.home-assistant.io/badges/config_flow_start.svg"></a></p>
<div class="details-block">
  <details class="details-block-item">
    <summary class="details-block-title">
      <span><iconify-icon inline icon="mdi:cursor-hand"></iconify-icon> Manual configuration steps</span>
      <div class="details-block-arrow">
      <svg class="down" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg>
      <svg class="up" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"></path></svg>
      </div>
    </summary>
    <div class="details-block-content" id="content_0">
<p>If the above My button doesn‚Äôt work, you can also perform the following steps
manually:</p>
<ul>
<li>
<p>Browse to your Home Assistant instance.</p>
</li>
<li>
<p>Go to <strong><a href="https://my.home-assistant.io/redirect/integrations" class="my" target="_blank"><iconify-icon inline icon="mdi:devices"></iconify-icon> Settings &gt; Devices &amp; Services</a></strong>.</p>
</li>
<li>
<p>In the bottom right corner, select the
<strong><a href="https://my.home-assistant.io/redirect/config_flow_start?domain=mcp_server" class="my" target="_blank"><iconify-icon inline icon="mdi:plus"></iconify-icon> Add Integration</a></strong> button.</p>
</li>
<li>
<p>From the list, select <strong>Model Context Protocol Server</strong>.</p>
</li>
<li>
<p>Follow the instructions on screen to complete the setup.</p>
</li>
</ul>
</div>
  </details>
</div>
<h2>Configuration options <a class="title-link" name="configuration-options" href="#configuration-options"></a>
</h2>
<p>The integration provides the following configuration options:</p>
<div class="config-vars basic">
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name">Control Home Assistant</span><a name="control-home-assistant" class="title-link" href="#control-home-assistant"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>If MCP clients are allowed to control Home Assistant. Clients can only control or provide information about entities that are <a href="/voice_control/voice_remote_expose_devices/">exposed</a> to it.</p>
</span></div>
</div></div>
</div>
<h2>Architecture overview <a class="title-link" name="architecture-overview" href="#architecture-overview"></a>
</h2>
<p>This integration can provide similar functionality as other LLM-based conversation
agents (for example <a href="/integrations/anthropic/">Anthropic</a>, <a href="/integrations/google_generative_ai_conversation">Google Generative AI</a>, <a href="/integrations/ollama/">Ollama</a>, <a href="/integrations/openai_conversation/">Open AI</a>). In those conversation agents, Home Assistant is the
client and prepares the available tools and passes them into the LLM with a prompt.</p>
<p>The Model Context Protocol follows a different pattern: An LLM application acts as
a client and can connect to multiple MCP servers to provide context. See the
<a href="https://modelcontextprotocol.io/introduction#general-architecture" rel="external nofollow">Model Context Protocol Introduction<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> for more details.</p>
<p>The Home Assistant Model Context Protocol Server integration implements the
<a href="https://modelcontextprotocol.io/docs/concepts/transports#server-sent-events-sse" rel="external nofollow">Server-Sent Events (SSE) transport<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>
allowing streaming client-to-server communication. Most MCP clients today only support
<a href="https://modelcontextprotocol.io/docs/concepts/transports#standard-input-output-stdio" rel="external nofollow">stdio<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> transport,
and directly run an MCP server as a local command line tool. You can
use an MCP proxy server like <a href="https://github.com/sparfenyuk/mcp-proxy" rel="external nofollow">mcp-proxy<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>
to act as a gateway to the Home Assistant MCP SSE server.</p>
<h2>Client configuration <a class="title-link" name="client-configuration" href="#client-configuration"></a>
</h2>
<p>The Model Context Protocol specification has recently defined standards for
authorization and connecting to remote servers. The standards are a <em>work in progress</em>
and so some clients may not support the latest functionality, and the specification
will likely continue to evolve.</p>
<h3>Access control <a class="title-link" name="access-control" href="#access-control"></a>
</h3>
<h4>OAuth <a class="title-link" name="oauth" href="#oauth"></a>
</h4>
<p>The Model Context Protocol supports OAuth for <a href="https://spec.modelcontextprotocol.io/specification/2025-03-26/basic/authorization/" rel="external nofollow">Authorization<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> and is fully supported by Home Assistant‚Äôs
<a href="https://developers.home-assistant.io/docs/auth_api/">Authentication API</a>. MCP
Clients that support OAuth can use this to allow you to give the client access
to your Home Assistant MCP server.</p>
<p>Home Assistant has adopted <a href="https://indieauth.spec.indieweb.org/" rel="external nofollow">IndieAuth<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> and does not require you to pre-define
an OAuth Client ID. Instead, the Client ID is the base of the redirect URL.</p>
<ul>
<li>
<em>Client ID</em>: If your redirect-uri is <code>https://www.example.com/mcp/redirect</code>, your client ID should be <code>https://www.example.com</code>.</li>
<li>
<em>Client Secret</em>: This is not used by Home Assistant and can be ignored or set to any value.</li>
</ul>
<h4>Long-Lived Access Tokens <a class="title-link" name="long-lived-access-tokens" href="#long-lived-access-tokens"></a>
</h4>
<p>Some MCP clients may not support OAuth, but may support access tokens. You may create a
<a href="https://developers.home-assistant.io/docs/auth_api/#long-lived-access-token">Long-lived access token</a> to allow the client to access the API.</p>
<ol>
<li>
<p>Visit your account profile settings, under the <strong>Security</strong> tab. <a href="https://my.home-assistant.io/redirect/profile" class="my badge" target="_blank"><img src="https://my.home-assistant.io/badges/profile.svg"></a>.</p>
</li>
<li>
<p>Create a <strong>Long-lived access token</strong></p>
</li>
<li>
<p>Copy the access token to use when configuring the MCP client LLM application.</p>
</li>
</ol>
<p>For more information about Authentication in Home Assistant, refer to the <a href="https://www.home-assistant.io/docs/authentication/#your-account-profile">Authentication documentation</a>.</p>
<h3>Example: Claude for Desktop <a class="title-link" name="example-claude-for-desktop" href="#example-claude-for-desktop"></a>
</h3>
<p>See <a href="https://modelcontextprotocol.io/quickstart/user#for-claude-desktop-users" rel="external nofollow">MCP Quickstart: For Claude Desktop Users<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>
for a detailed guide on using Claude for Desktop with an MCP server. It is recommended
to get the example server working first before using the Home Assistant MCP Server.</p>
<p>Claude for Desktop currently only supports local MCP servers using the <a href="https://modelcontextprotocol.io/docs/concepts/transports#standard-input-output-stdio" rel="external nofollow">stdio<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>
transport, run as a local command line tool. You can use a local MCP proxy server
to allow Claude for Desktop to access Home Assistant using the SSE transport.</p>
<ol>
<li>Download <a href="https://claude.ai/download" rel="external nofollow">Claude for Desktop<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</li>
<li>Install <code>mcp-proxy</code> following the instructions in the <a href="https://github.com/sparfenyuk/mcp-proxy" rel="external nofollow">README<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.
For example, <code>uv tool install git+https://github.com/sparfenyuk/mcp-proxy</code>.</li>
<li>Open the configuration file. Visit <strong>Settings‚Ä¶</strong> and on the <strong>Developer</strong> tab, select <strong>Edit Config</strong>.
which will edit <code>claude_desktop_config.json</code>. The full file location depends on your
operating system (macOS or Windows).</li>
<li>Add a new MCP server to the JSON file. You need to set the <code>SSE_URL</code> to the URL you use to
connect to Home Assistant with the path <code>/mcp_server/sse</code>. You will also need to set <code>API_ACCESS_TOKEN</code>
to the long live access token created above in the <a href="#access-control">access control instructions</a>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"mcpServers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Home Assistant"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mcp-proxy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"SSE_URL"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8123/mcp_server/sse"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"API_ACCESS_TOKEN"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;your_access_token_here&gt;"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
</li>
<li>Restart Claude.</li>
<li>You will see a connection icon <iconify-icon inline icon="mdi:connection" title="Connection"></iconify-icon> if things are set up correctly. Clicking the connection icon will show enabled MCP servers such as <em>Home Assistant</em>.</li>
<li>Select the prompt provided by Home Assistant.</li>
<li>You can then use Claude to control Home Assistant similar to how you control Home Assistant through the Voice Assistant. Claude wil ask you for permission before calling any tools.</li>
</ol>
<p><img src="/images/integrations/mcp_server/claude-todo-list-control.png" alt="Screenshot of Claude for Desktop adding an item to a Home Assistant To-do list"></p>
<h3>Example: Cursor <a class="title-link" name="example-cursor" href="#example-cursor"></a>
</h3>
<ol>
<li>Download and install <a href="https://www.cursor.com" rel="external nofollow">Cursor<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</li>
<li>Install <code>mcp-proxy</code> following the instructions in the <a href="https://github.com/sparfenyuk/mcp-proxy" rel="external nofollow">README<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.
For example, <code>uv tool install git+https://github.com/sparfenyuk/mcp-proxy</code>.</li>
<li>Open the main Cursor Settings and select <strong>MCP</strong>.</li>
<li>Click <strong>Add new global MCP server</strong> and add the Home Assistant server configuration:
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="json"><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="nl">"mcpServers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="nl">"Home Assistant"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mcp-proxy"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="s2">"http://localhost:8123/mcp_server/sse"</span><span class="w">
       </span><span class="p">],</span><span class="w">
       </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"API_ACCESS_TOKEN"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;your_access_token_here&gt;"</span><span class="w">
       </span><span class="p">}</span><span class="w">
     </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
</li>
<li>Save your <code>mcp.json</code> file. You can also find this file in the <code>$HOME/.cursor/mcp.json</code> directory.</li>
<li>Restart Cursor and return to the MCP settings. You should see the Home Assistant server in the list. The indicator should be green.</li>
<li>In chat agent mode (Ctrl+I), ask it to control your home and the tool should be used.</li>
</ol>
<p><img src="/images/integrations/mcp_server/cursor-lights-control.png" alt="Screenshot of Cursor controlling the office lights"></p>
<h2>Supported functionality <a class="title-link" name="supported-functionality" href="#supported-functionality"></a>
</h2>
<h3>Tools <a class="title-link" name="tools" href="#tools"></a>
</h3>
<p><a href="https://modelcontextprotocol.io/docs/concepts/tools" rel="external nofollow">MCP Tools<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> enable LLMs to
perform actions through Home Assistant. The tools used by the configured LLM API
are exposed.</p>
<h3>Prompts <a class="title-link" name="prompts" href="#prompts"></a>
</h3>
<p>The <a href="https://modelcontextprotocol.io/docs/concepts/prompts" rel="external nofollow">MCP Prompts<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> provided
inform LLMs how to call the tools. The tools used by the configured LLM API
are exposed.</p>
<h2>Known Limitations <a class="title-link" name="known-limitations" href="#known-limitations"></a>
</h2>
<p>The Home Assistant Model Context Protocol integration currently only supports a
subset of MCP features:</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported by Home Assistant</th>
</tr>
</thead>
<tbody>
<tr>
<td>Prompts</td>
<td>‚úÖ</td>
</tr>
<tr>
<td>Tools</td>
<td>‚úÖ</td>
</tr>
<tr>
<td>Resources</td>
<td>‚ùå</td>
</tr>
<tr>
<td>Sampling</td>
<td>‚ùå</td>
</tr>
<tr>
<td>Notifications</td>
<td>‚ùå</td>
</tr>
</tbody>
</table>
<h2>Troubleshooting <a class="title-link" name="troubleshooting" href="#troubleshooting"></a>
</h2>
<p>This section has troubleshooting information for Claude for Desktop since it is
the primary client. Also see <a href="https://modelcontextprotocol.io/docs/tools/debugging#debugging-in-claude-desktop" rel="external nofollow">Debugging in Claude Desktop<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</p>
<h3>LLM client cannot connect to Home Assistant MCP server <a class="title-link" name="llm-client-cannot-connect-to-home-assistant-mcp-server" href="#llm-client-cannot-connect-to-home-assistant-mcp-server"></a>
</h3>
<h4>Symptom: Failed to start MCP server: Could not start MCP server Home Assistant <a class="title-link" name="symptom-failed-to-start-mcp-server-could-not-start-mcp-server-home-assistant" href="#symptom-failed-to-start-mcp-server-could-not-start-mcp-server-home-assistant"></a>
</h4>
<p>When trying to configure a client like Claude for Desktop to talk to Home Assistant, the app shows a
message like ‚ÄúFailed to start MCP server: Could not start MCP server Home Assistant‚Äù</p>
<h5>Description <a class="title-link" name="description" href="#description"></a>
</h5>
<p>This means that the local MCP server <code>mcp-proxy</code> could not start.</p>
<h5>Resolution <a class="title-link" name="resolution" href="#resolution"></a>
</h5>
<p>Verify the command line arguments in the <code>claude_desktop_config.json</code> are correct. You may try to run
the command manually to verify that the command can be found.</p>
<h4>Symptom: ‚ÄúMCP server Home Assistant disconnected‚Äù or ‚ÄúCould not attach to MCP server Home Assistant‚Äù <a class="title-link" name="symptom-mcp-server-home-assistant-disconnected-or-could-not-attach-to-mcp-server-home-assistant" href="#symptom-mcp-server-home-assistant-disconnected-or-could-not-attach-to-mcp-server-home-assistant"></a>
</h4>
<p>When trying to configure a client like Claude Desktop to talk to Home Assistant, the app shows a
message like ‚ÄúMCP server Home Assistant disconnected‚Äù or ‚ÄúCould not attach to MCP server Home Assistant‚Äù.</p>
<h5>Description <a class="title-link" name="description-1" href="#description-1"></a>
</h5>
<p>This means the MCP server has started, however the MCP server is having trouble communicating with Home Assistant,
or the MCP server in Home Assistant is not configured.</p>
<h5>Resolution <a class="title-link" name="resolution-1" href="#resolution-1"></a>
</h5>
<p>To understand the root cause, first check debug logs on the client. For example in Claude for Desktop:</p>
<ol>
<li>Visit <strong>Settings‚Ä¶</strong>.</li>
<li>Select <strong>Developer</strong>.</li>
<li>Select the <code>Home Assistant</code> MCP server.</li>
<li>Select <strong>Open Logs Folder</strong>.</li>
<li>View <code>mcp-server-Home Assistant.log</code>. These are known problems and their resolution:
<ul>
<li>
<code>Client error '404 Not Found' for url 'http://localhost:8123/mcp_server/sse'</code>:
this means the MCP Server integration is not configured in Home Assistant.</li>
<li>
<code>Client error '401 Unauthorized' for url 'http://localhost:8123/mcp_server/sse'</code>:
this means that the long live access token is not correct.
‚Ä¶</li>
</ul>
</li>
</ol>
<h2>Removing the integration <a class="title-link" name="removing-the-integration" href="#removing-the-integration"></a>
</h2>
<p>This integration can be removed by following these steps:</p>
<h3>To remove an integration instance from Home Assistant <a class="title-link" name="to-remove-an-integration-instance-from-home-assistant" href="#to-remove-an-integration-instance-from-home-assistant"></a>
</h3>
<ol>
<li>Go to <a href="https://my.home-assistant.io/redirect/integrations" class="my" target="_blank"><strong>Settings</strong> &gt; <strong>Devices &amp; services</strong></a> and select the integration card.</li>
<li>From the list of devices, select the integration instance you want to remove.</li>
<li>Next to the entry, select the three dots <iconify-icon inline icon="mdi:dots-vertical" title="Dots vertical"></iconify-icon> menu. Then, select <strong>Delete</strong>.</li>
</ol>


  

<div class="text related-topics">
  <h2>Related topics<a class="title-link" href="#related-topics" name="related-topics"></a>
</h2>
  <ul>
    
    
    
    
    
    <li>
      <a href="/needlehack-blog/integrations/conversation/" class="topic">
        Conversation
      </a>
    </li>
    </ul>
</div>


  
<div class="material-card text feedback">
  <h4>
<iconify-icon inline icon="mdi:feedback" title="Feedback"></iconify-icon> <b> Help us improve our documentation</b><a href="#feedback_section" class="title-link" name="feedback_section"></a>
</h4>
  Suggest an edit to this page, or provide/view feedback for this page.
  <div class="links">
    <ul aria-label="Page feedback options">
    <li><a href="https://github.com/home-assistant/home-assistant.io/tree/current/source/_integrations/mcp_server.markdown" target="_blank" title="Edit this page"><iconify-icon inline icon="mdi:edit"></iconify-icon> Edit</a></li>
    
    <li><a href="https://github.com/home-assistant/home-assistant.io/issues/new?template=feedback.yml&amp;url=https%3A%2F%2Fivangrod.github.io%2Fintegrations%2Fmcp_server%2F&amp;version=2025.9.4&amp;labels=current,integration%3A%20mcp_server" target="_blank" title="Provide feedback on this page"><iconify-icon inline icon="mdi:comment-edit-outline"></iconify-icon> Provide feedback</a></li>
    <li><a href="https://github.com/home-assistant/home-assistant.io/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3A%22integration%3A+mcp_server%22" target="_blank" title="View pending feedback for this page"><iconify-icon inline icon="mdi:comment-text-multiple-outline"></iconify-icon> View pending feedback</a></li>
    
  </ul>
  </div>
</div>


</article>

            
          </div>


          
            
              <aside id="integration-sidebar" class="grid__item one-third desk-wide-one-quarter lap-one-whole palm-one-whole">
              
            <div class="grid">
  




  


<section class="aside-module grid__item one-whole lap-one-half">
  <div class='brand-logo-container section'>
      <img src='https://brands.home-assistant.io/_/mcp_server//logo.png' srcset='https://brands.home-assistant.io/_/mcp_server/logo@2x.png 2x' /><a href='https://my.home-assistant.io/redirect/config_flow_start?domain=mcp_server' class='my badge' target='_blank'><img src='https://my.home-assistant.io/badges/config_flow_start.svg' /></a></div>

  <div class='section'>The Model Context Protocol Server  service  was introduced in Home Assistant 2025.2, and it's used by <a title="Open analytics.home-assistant.io" href="https://analytics.home-assistant.io/integrations" target="_blank" rel="noopener">
        
          1722</a> active installations.
        
      
    
  </div>
    <div class='section'>
      <iconify-icon icon='mdi:upload-network-outline'></iconify-icon>&nbsp;Its IoT class is <a href='/blog/2016/02/12/classifying-the-internet-of-things/#classifiers'>Local Push.</a>
    </div>
  <div class='section'>
    <a href='/docs/quality_scale/#-silver'>ü•à Silver quality</a><br /></div>
  <div class='section'>
    <a href="https://github.com/home-assistant/core/tree/dev/homeassistant/components/mcp_server" target="_blank"><iconify-icon inline icon='simple-icons:github' title='Github'></iconify-icon> View source on GitHub</a><br />
    <a href="https://github.com/home-assistant/core/issues?q=is%3Aissue+is%3Aopen+label%3A%22integration%3A+mcp_server%22" target="_blank"><iconify-icon inline icon='mdi:bug' title='Bug'></iconify-icon> View known issues</a>
  </div></section>

<section class="aside-module grid__item one-whole lap-one-half">
  <div class='section'>
    <h1 class="title epsilon"><iconify-icon inline icon='mdi:person-heart' title='Person heart'></iconify-icon> Integration owners</h1>
    
        
        

          
          <div class="section">
            We are incredibly grateful to the following contributors who currently maintain this integration:<br />
          </div>
          <div class="section"><a href="https://github.com/allenporter" target="_blank"><img class="codeowner-avatar" src="https://avatars.githubusercontent.com/allenporter?size=96" alt="@allenporter"/> @allenporter</a><br /></div>
        
    
  </div>
</section>






  <section id="toc-module" class="aside-module grid__item one-whole lap-one-half">
        <div class='section'>
          <h1 class="title epsilon"><iconify-icon inline icon='mdi:toc' title='Toc'></iconify-icon> On this page</h1>
          <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#prerequisites">Prerequisites</a></li>
<li class="toc-entry toc-h2"><a href="#configuration">Configuration</a></li>
<li class="toc-entry toc-h2"><a href="#configuration-options">Configuration options</a></li>
<li class="toc-entry toc-h2"><a href="#architecture-overview">Architecture overview</a></li>
<li class="toc-entry toc-h2"><a href="#client-configuration">Client configuration</a>
<ul>
<li class="toc-entry toc-h3"><a href="#access-control">Access control</a></li>
<li class="toc-entry toc-h3"><a href="#example-claude-for-desktop">Example: Claude for Desktop</a></li>
<li class="toc-entry toc-h3"><a href="#example-cursor">Example: Cursor</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#supported-functionality">Supported functionality</a>
<ul>
<li class="toc-entry toc-h3"><a href="#tools">Tools</a></li>
<li class="toc-entry toc-h3"><a href="#prompts">Prompts</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#known-limitations">Known Limitations</a></li>
<li class="toc-entry toc-h2"><a href="#troubleshooting">Troubleshooting</a>
<ul>
<li class="toc-entry toc-h3"><a href="#llm-client-cannot-connect-to-home-assistant-mcp-server">LLM client cannot connect to Home Assistant MCP server</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#removing-the-integration">Removing the integration</a>
<ul>
<li class="toc-entry toc-h3"><a href="#to-remove-an-integration-instance-from-home-assistant">To remove an integration instance from Home Assistant</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#related-topics">Related topics</a></li>
</ul>
        </div>
      </section><section id="category-module" class="aside-module grid__item one-whole lap-one-half">
      <div class='section'>
        <h1 class="title epsilon"><iconify-icon inline icon='mdi:category' title='Category'></iconify-icon> Categories</h1>
        <ul class='divided'><li>
            <a href='/integrations/#voice'>Voice</a>
          </li></ul>
      </div>
    </section></div>

          </aside>
          
        </div>
      </div>

      <footer>
        <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="skyline grid">
        <div class="skyline grid__item one-whole">
          <div class="footer-skyline">
          </div>
        </div>
      </div>
      <div class="footer-nav grid">
        <div class="company grid__item one-quarter lap-one-half palm-one-whole">
          <div class="title">
            <img
              src="/needlehack-blog/images/footer-logo-text.svg"
              height="72"
              alt="Home Assistant"
            />
          </div>
          <p>
            Home Assistant is a project from the <a href="https://www.openhomefoundation.org/">Open Home Foundation</a>, sponsored by <a href="https://www.nabucasa.com/">Nabu Casa</a>.
          </p>
        </div>

        <div class="grid__item one-quarter lap-one-half palm-one-whole">
          <h3>Join us and contribute!</h3>
          <ul>
            <li><a class="external-link" href="https://github.com/home-assistant/">GitHub repo <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://developers.home-assistant.io">Developers Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://design.home-assistant.io">Design Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://data.home-assistant.io">Data Science Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://community.home-assistant.io">Community Forum <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://creators.home-assistant.io/">Creator Network <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://works-with.home-assistant.io/">Works With Home Assistant <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a href="/needlehack-blog/community">Our community</li>
            <li><a href="/needlehack-blog/help/reporting_issues/">Reporting issues</a></li>
          </ul>
          <h3>System status</h3>
          <ul>
            <li>
              <a class="external-link"  href="https://alerts.home-assistant.io">Integration Alerts <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a>
            </li>
            <li><a href="/needlehack-blog/security/">Security Alerts</a></li>
            <li>
              <a class="external-link" href="https://status.home-assistant.io">System Status <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a>
            </li>
          </ul>
        </div>

        <div class="grid__item one-quarter lap-one-half palm-one-whole">
          <h3>Companion apps</h3>
          <ul>
            <li><a class="external-link" href="https://apps.apple.com/us/app/home-assistant/id1099568401">iOS and Apple devices</a></li>
            <li><a class="external-link" href="https://play.google.com/store/apps/details?id=io.homeassistant.companion.android">Android and Wear OS</a></li>
            <li><a class="external-link" href="https://companion.home-assistant.io/">...and more!</a></li>
          </ul>
          <h3>Governance</h3>
          <ul>
            <li><a href="/needlehack-blog/privacy/">Privacy Notices</a></li>
            <li><a href="/needlehack-blog/developers/cla/">Contributor License Agreement</a></li>
            <li><a href="/needlehack-blog/tos/">Terms of Service</a></li>
            <li><a href="/needlehack-blog/code_of_conduct/">Code of Conduct</a></li>
            <li><a href="/needlehack-blog/developers/credits/">Credits</a></li>
            <li><a href="/needlehack-blog/developers/license/">License</a></li>
          </ul>
        </div>

        <div class="socials grid__item one-quarter lap-one-half palm-one-whole">

          <h3>Follow us</h3>
          <p><a class="external-link" href='https://newsletter.openhomefoundation.org/#/portal'>Sign up for our newsletter <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></p>
          <div class="icons">
            <a
              rel="me"
              href="https://youtube.com/@home_assistant"
              title="YouTube"
              target="_blank"
              ><iconify-icon icon="simple-icons:youtube"></iconify-icon></a>
            <a
              rel="me"
              href="https://reddit.com/r/homeassistant"
              title="Reddit"
              target="_blank"
              ><iconify-icon icon="simple-icons:reddit"></iconify-icon></a>
            <a
              rel="me"
              href="https://github.com/home-assistant/home-assistant"
              title="GitHub"
              target="_blank"
              ><iconify-icon icon="simple-icons:github"></iconify-icon></a>
            <br />
            <a
              rel="me"
              href="https://fosstodon.org/@homeassistant"
              title="Mastodon"
              target="_blank"
              ><iconify-icon icon="simple-icons:mastodon"></iconify-icon></a>
            <a
              rel="me"
              href="https://bsky.app/profile/home-assistant.io"
              title="Bluesky"
              target="_blank"
             ><iconify-icon icon="simple-icons:bluesky"></iconify-icon></a>
            <a
              rel="me"
              href="https://x.com/home_assistant"
              title="X"
              target="_blank"
             ><iconify-icon icon="simple-icons:x"></iconify-icon></a>
            <br />
            <a
              rel="me"
              href="https://www.facebook.com/homeassistantio"
              title="Facebook"
              target="_blank"
              ><iconify-icon icon="simple-icons:facebook"></iconify-icon></a>
            <a
              rel="me"
              href="https://www.instagram.com/homeassistant/"
              title="Instagram"
              target="_blank"
              ><iconify-icon icon="simple-icons:instagram"></iconify-icon></a>
            <a
              rel="me"
              href="https://www.linkedin.com/company/home-assistant"
              title="LinkedIn"
              target="_blank"
              ><iconify-icon icon="simple-icons:linkedin"></iconify-icon></a>
          </div>

          <div class="web-notice">
            <p>
              For partnership inquiries please check out <a href="https://works-with.home-assistant.io/">Works With Home Assistant</a>. For media, get in touch <a href="mailto:media@openhomefoundation.org">here</a>. For other questions, you can contact us <a href="mailto:hello@home-assistant.io">here</a> (No technical support!)
            </p>
            <p>
              Website powered by <a href="https://jekyllrb.com/">Jekyll</a><br />
              Originally based on the <a href="https://github.com/coogie/oscailte">Oscailte theme</a>
            </p>
            <a href="https://www.netlify.com">
              <img
                src="/needlehack-blog/images/frontpage/netlify.svg"
                alt="Deploys by Netlify Badge"
              />
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

      </footer>

    </div>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@justinribeiro/lite-youtube@1.3.1/lite-youtube.js"></script>

<script src="/javascripts/terminology_tooltip.js?274cec0734bc752f0e5ea3d4e2e59858" type="text/javascript" defer></script>

<script src="/javascripts/prism.js?5d6619066a1fc5cd819a93c132b539ac" type="text/javascript" defer></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@3/dist/umd/index.min.js"></script>
<script type="text/javascript">
  docsearch({
    container: '#docsearch',
    appId: 'FBHBYS3J0U',
    indexName: 'home-assistant',
    apiKey: "ba6f7e6d97b3d3d2f778978c742a47c6",
  });
  document.querySelector('.site-title').addEventListener('contextmenu', function (ev) {
    ev.preventDefault();
    document.location.assign("https://design.home-assistant.io/#brand/logo")
  });
</script>




<script type="text/javascript">
  {
    const article = document.querySelector("article.post");
    if (article) {
      const iframes = article.querySelectorAll("iframe[data-src]");
      let loaded = false;
      if (iframes) {
        document.addEventListener('mousemove', loadLazyFrames, { passive: true, once: true });
        document.addEventListener('touchmove', loadLazyFrames, { passive: true, once: true });
        document.addEventListener('scroll', loadLazyFrames, { passive: true, once: true });
  
        function loadLazyFrames() {
          if (loaded) return;
          loaded = true;
  
          iframes.forEach((iframe) => {
            const src = iframe.getAttribute("data-src");
            if (src) {
              iframe.setAttribute("src", src);
              iframe.removeAttribute("data-src");
            }
          });
        }
      }
    }
  }
</script>

  </body>
</html>
