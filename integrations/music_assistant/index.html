



<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Music Assistant - Home Assistant</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Instructions on how to integrate Music Assistant into Home Assistant.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://www.home-assistant.io/integrations/music_assistant/">

    <meta property="fb:app_id" content="338291289691179">
    <meta property="og:title" content="Music Assistant">
    <meta property="og:site_name" content="Home Assistant">
    <meta property="og:url" content="https://www.home-assistant.io/integrations/music_assistant/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Instructions on how to integrate Music Assistant into Home Assistant.">
    <meta property="og:image" content="https://ivangrod.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@home_assistant">
    
    <meta name="twitter:title" content="Music Assistant">
    <meta name="twitter:description" content="Instructions on how to integrate Music Assistant into Home Assistant.">
    <meta name="twitter:image" content="https://ivangrod.github.io/images/default-social.png">
    <link rel="me" href="https://fosstodon.org/@homeassistant">

    <link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3/dist/style.min.css" rel="stylesheet" />
    <link href="/needlehack-blog/stylesheets/prism.css" rel="stylesheet">
    <link href="/needlehack-blog/stylesheets/screen.css" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Home Assistant" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&amp;family=Instrument+Sans:ital,wdth,wght@0,99,400..700;1,99,400..700&amp;" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/2.1.0/iconify-icon.min.js"></script>
  </head>

  <body  class=" integration-page  ">
    <header class='site-header '>
      



<div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/needlehack-blog/" class="site-title">
        <div class="logo"></div>
      </a>
      <a class="release-date" href="/blog/2025/09/03/release-20259/" title="Latest version 2025.9.4 released September 19, 2025">
        2025.9.4
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle" />
        <label
          for="toggle"
          class="toggle"
          data-open="Main Menu"
          data-close="⨉"
        ></label>
        <ul class="menu pull-right">
          <li><a  href="/needlehack-blog/installation/">Getting started</a></li>
          <li>
            <a  href="/needlehack-blog/docs/">Documentation <iconify-icon inline icon='mdi:chevron-down' title='Chevron down'></iconify-icon></a>
            <ul>
              <li><a href="/needlehack-blog/installation/"><iconify-icon inline icon='simple-icons:homeassistant' title='Homeassistant'></iconify-icon> Installation</a></li>
              <li><a href="/needlehack-blog/docs/automation/"><iconify-icon inline icon='mdi:robot-happy' title='Robot happy'></iconify-icon> Automations</a></li>
              <li><a href="/needlehack-blog/dashboards/"><iconify-icon inline icon='mdi:gauge' title='Gauge'></iconify-icon> Dashboards</a></li>
              <li><a href="/needlehack-blog/voice_control/"><iconify-icon inline icon='mdi:comment-processing-outline' title='Comment processing outline'></iconify-icon> Voice assistants</a></li>
              <li><a href="/needlehack-blog/docs/organizing/"><iconify-icon inline icon='mdi:view-grid' title='View grid'></iconify-icon> Device organization</a></li>
              <li><a href="/needlehack-blog/docs/energy/"><iconify-icon inline icon='mdi:solar-power-variant' title='Solar power variant'></iconify-icon> Energy management</a></li>
              <li><a href="/needlehack-blog/docs/configuration/"><iconify-icon inline icon='mdi:cog' title='Cog'></iconify-icon> Advanced configuration</a></li>
            </ul>
          </li>
          <li><a class="active" href="/needlehack-blog/integrations/">Integrations</a></li>
          <li><a  href="/needlehack-blog/blog/">Blog</a></li>
          <li><a  href="/needlehack-blog/help/">Need help?</a></li>
          <li>
            <div class="docsearch" id="docsearch"></div>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>

    </header>

    <div class="page-content">

      

      <div class="grid-wrapper">
        <div class="grid grid-center">

          <aside id="toc-bar" class="grid__item desk-wide-one-sixth">
                <section class="aside-module grid__item one-whole">
                  <div class='section'>
                    <h1 class="title epsilon"><iconify-icon inline icon='mdi:toc' title='Toc'></iconify-icon> On this page</h1>
                    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#configuration">Configuration</a>
<ul>
<li class="toc-entry toc-h3"><a href="#manual-configuration">Manual configuration</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#supported-functionality">Supported functionality</a>
<ul>
<li class="toc-entry toc-h3"><a href="#media-player-entities">Media player entities</a></li>
<li class="toc-entry toc-h3"><a href="#favorite-current-song-button">Favorite current song button</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#actions">Actions</a>
<ul>
<li class="toc-entry toc-h3"><a href="#action-music_assistantplay_media">Action music_assistant.play_media</a></li>
<li class="toc-entry toc-h3"><a href="#action-music_assistantplay_announcement">Action music_assistant.play_announcement</a></li>
<li class="toc-entry toc-h3"><a href="#action-music_assistanttransfer_queue">Action music_assistant.transfer_queue</a></li>
<li class="toc-entry toc-h3"><a href="#action-music_assistantsearch">Action music_assistant.search</a></li>
<li class="toc-entry toc-h3"><a href="#action-music_assistantget_library">Action music_assistant.get_library</a></li>
<li class="toc-entry toc-h3"><a href="#action-music_assistantget_queue">Action music_assistant.get_queue</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#notes">Notes</a></li>
<li class="toc-entry toc-h2"><a href="#known-limitations">Known limitations</a></li>
<li class="toc-entry toc-h2"><a href="#troubleshooting">Troubleshooting</a>
<ul>
<li class="toc-entry toc-h3"><a href="#cant-find-the-ma-actions">Can’t find the MA actions</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#removing-the-integration">Removing the integration</a>
<ul>
<li class="toc-entry toc-h3"><a href="#to-remove-an-integration-instance-from-home-assistant">To remove an integration instance from Home Assistant</a></li>
</ul>
</li>
</ul>
                  </div>
                </section>
              </aside> 

          
          <div class="grid__item two-thirds desk-wide-seven-twelfths lap-one-whole palm-one-whole">
          

            
              <article class="page">
  
  <header>
    
    
      <div class="breadcrumbs">
        <a href="/needlehack-blog/">Home</a>
        
          
            
            ▸ <a href="/integrations/">Integrations</a>
          
        
          
            ▸ 
          
        
      </div>
    
    <h1 class="title indent">
      
        Music Assistant
      
    </h1>
  </header>
  
    
    
    
  
  
  <p>The <strong>Music Assistant</strong> (MA) <span class="terminology">integration<span class="terminology-tooltip">Integrations connect and integrate Home Assistant with your devices, services, and more.<a class="terminology-link" href="/getting-started/concepts-terminology/#integrations"> [Learn more]</a></span></span> allows you to connect Home Assistant to a <a href="https://music-assistant.io/" rel="external nofollow">Music Assistant Server<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> (Required version 2.4 or later). Once configured, all <a href="https://music-assistant.io/player-support/" rel="external nofollow">MA Players<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> show up as Home Assistant <a href="/integrations/media_player/">media player entities</a>.  Media players will allow you to control media playback and see the currently playing item.</p>
<p>There is currently support for the following Home Assistant Platforms:</p>
<ul>
<li><a href="#media-player-entities">Media player</a></li>
<li><a href="#favorite-current-song-button">Button</a></li>
</ul>
<p>All of the Home Assistant <a href="https://www.home-assistant.io/integrations/media_player/#media-control-actions">Media Player Control Actions</a> are supported.</p>
<p>The <code>media_content_id</code> payload for <code>media_player.play_media</code> can be any of the following:</p>
<ul>
<li>The name of a track, artist, or album. For example, <code>Queen</code>.</li>
<li>A track or album combined with the artist’s name. For example, <code>Queen - Innuendo</code>.</li>
<li>A streaming provider URI. For example, <code>spotify://artist/12345</code>.</li>
<li>A streaming provider URL. For example, <code>https://open.spotify.com/track/31cWPvM99ZHxMl3mdgiw4I</code>.</li>
</ul>
<p>The <code>media_content_id</code> payload for <code>media_player.browse_media</code> must be a URI of the form <code>library://artist/1</code>, <code>library://album/20</code>, or <code>spotify://album/5zj4Ej0FrlJQaSo0d6cttH</code>. The type of item that the URI refers to must be an album or artist.</p>
<p>These URIs can be obtained from, for example, the output of the <code>get_library</code> or <code>search</code> actions described below or the <code>media_player.browse_media</code> action from Home Assistant.</p>
<p>Streaming provider URLs can be obtained from the web interface of the provider.</p>
<h2>Configuration <a class="title-link" name="configuration" href="#configuration"></a>
</h2>
<p>To add the <strong>Music Assistant</strong> integration to your Home Assistant instance, use this My button:</p>
<p><a href="https://my.home-assistant.io/redirect/config_flow_start?domain=music_assistant" class="my badge" target="_blank"><img src="https://my.home-assistant.io/badges/config_flow_start.svg"></a></p>
<p>Music Assistant can be auto-discovered by Home Assistant. If an instance was found,
it will be shown as <strong>Discovered</strong>. You can then set it up right away.</p>
<div class="details-block">
  <details class="details-block-item">
    <summary class="details-block-title">
      <span><iconify-icon inline icon="mdi:cursor-hand"></iconify-icon> Manual configuration steps</span>
      <div class="details-block-arrow">
      <svg class="down" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg>
      <svg class="up" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"></path></svg>
      </div>
    </summary>
    <div class="details-block-content" id="content_0">
<p>If it wasn’t discovered automatically, don’t worry! You can set up a
manual integration entry:</p>
<ul>
<li>
<p>Browse to your Home Assistant instance.</p>
</li>
<li>
<p>Go to <strong><a href="https://my.home-assistant.io/redirect/integrations" class="my" target="_blank"><iconify-icon inline icon="mdi:devices"></iconify-icon> Settings &gt; Devices &amp; Services</a></strong>.</p>
</li>
<li>
<p>In the bottom right corner, select the
<strong><a href="https://my.home-assistant.io/redirect/config_flow_start?domain=music_assistant" class="my" target="_blank"><iconify-icon inline icon="mdi:plus"></iconify-icon> Add Integration</a></strong> button.</p>
</li>
<li>
<p>From the list, select <strong>Music Assistant</strong>.</p>
</li>
<li>
<p>Follow the instructions on screen to complete the setup.</p>
</li>
</ul>
</div>
  </details>
</div>
<h3>Manual configuration <a class="title-link" name="manual-configuration" href="#manual-configuration"></a>
</h3>
<p>Under normal circumstances, Home Assistant automatically discovers your running Music Assistant Server. If there is something special about the Home Assistant or MA setup (for example, the MA server is running as a remote Docker container) or discovery is not working, you can manually specify the URL to your Music Assistant server. If the Music Assistant Server is not installed, then follow these <a href="https://music-assistant.io/installation/" rel="external nofollow">installation instructions<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</p>
<h2>Supported functionality <a class="title-link" name="supported-functionality" href="#supported-functionality"></a>
</h2>
<h3>Media player entities <a class="title-link" name="media-player-entities" href="#media-player-entities"></a>
</h3>
<p>The Music Assistant integration creates media player entities for all players and groups available in MA, including those imported from Home Assistant. This is needed to provide the full functionality Music Assistant has to offer. This full functionality includes transfer of the playing queue of music from one player to another, automatic pausing of playback during announcements, and richer options for selecting the media for playback. These entities will display media information, playback progress, and playback controls.</p>
<h3>Favorite current song button <a class="title-link" name="favorite-current-song-button" href="#favorite-current-song-button"></a>
</h3>
<p>The Music Assistant integration creates a button entity for each player to favorite the current song. Pressing this button (manually or by automation) adds the current song to your Music Assistant favorites. This works for songs stored locally as well as for tracks from streaming providers. It also works with remote content such as Spotify Connect, AirPlay, or a radio station, as long as the external source provides an artist and title combination (and optionally the album).</p>
<h2>Actions <a class="title-link" name="actions" href="#actions"></a>
</h2>
<h3>Action music_assistant.play_media <a class="title-link" name="action-music_assistantplay_media" href="#action-music_assistantplay_media"></a>
</h3>
<p>Play media on a Music Assistant player with more fine-grained control options. This action is more powerful than the <a href="https://www.home-assistant.io/integrations/media_player/#action-media_playerplay_media"><code>media_player.play_media</code></a> action because it allows multiple items to be added to the queue at once, it allows more specific control of the media item to be played (e.g. a track from a specific album can be specified) and Music Assistant’s radio mode (where the queue is filled with similar tracks to that enqueued) can be enabled.</p>
<ul>
<li>
<strong>Data attribute</strong>: <code>media_id</code>
<ul>
<li>
<strong>Optional</strong>: No.</li>
<li>
<strong>Description</strong>: URI or name of the item to be played. Specify a list if it is desired to play/enqueue multiple items.</li>
<li>
<strong>Example</strong>: <code>spotify://playlist/aabbccddeeff</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>media_type</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: The type of content to play. Select from artist, album, track, playlist or radio. Will be auto-determined if omitted.</li>
<li>
<strong>Example</strong>: <code>playlist</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>artist</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: When specifying a track or album by name in the Media ID field, you can optionally restrict results by this artist name.</li>
<li>
<strong>Example</strong>: <code>Queen</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>album</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: When specifying a track by name in the Media ID field, you can optionally restrict results by this album name.</li>
<li>
<strong>Example</strong>: <code>News of the world</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>enqueue</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: If the content should be played now or be added to the queue. Options are:
<ul>
<li>play: Play now</li>
<li>replace: Replace the existing queue and play now</li>
<li>next: Add to the current queue after the currently playing item</li>
<li>replace_next: Replace the current queue after the currently playing item</li>
<li>add: Add to the end of the queue</li>
</ul>
</li>
<li>
<strong>Example</strong>: <code>replace</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>radio_mode</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: Enable radio mode to auto-generate a playlist based on the selection.</li>
<li>
<strong>Example</strong>: <code>true</code>
</li>
</ul>
</li>
</ul>
<h3>Action music_assistant.play_announcement <a class="title-link" name="action-music_assistantplay_announcement" href="#action-music_assistantplay_announcement"></a>
</h3>
<p>Play an announcement which is accessible via URL on a Music Assistant player. Home Assistant <a href="https://www.home-assistant.io/integrations/tts/">TTS</a> actions are used for announcements provided as text.</p>
<ul>
<li>
<strong>Data attribute</strong>: <code>url</code>
<ul>
<li>
<strong>Optional</strong>: No.</li>
<li>
<strong>Description</strong>: URL to the notification sound.</li>
<li>
<strong>Example</strong>: <code>https://someremotesite.com/doorbell.mp3</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>use_pre_announce</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: Use pre-announcement sound. Omit to use the player default.</li>
<li>
<strong>Example</strong>: <code>true</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>announce_volume</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: Use a forced volume level for the announcement. Omit to use the player default.</li>
<li>
<strong>Example</strong>: <code>75</code>
</li>
</ul>
</li>
</ul>
<h3>Action music_assistant.transfer_queue <a class="title-link" name="action-music_assistanttransfer_queue" href="#action-music_assistanttransfer_queue"></a>
</h3>
<p>Transfer the player’s queue to another player. This could be combined with presence sensors to allow music to follow you around the house.</p>
<ul>
<li>
<strong>Data attribute</strong>: <code>source_player</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: The source media player which has the queue to be transferred. When omitted, the first playing player will be used.</li>
<li>
<strong>Example</strong>: <code>media_player.kitchen_speaker</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>auto_play</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: Start playing the queue on the target player. Omit to use the default behavior.</li>
<li>
<strong>Example</strong>: <code>true</code>
</li>
</ul>
</li>
</ul>
<h4>Example <a class="title-link" name="example" href="#example"></a>
</h4>
<p>In this example, the queue of the first player found playing will be transferred to the kitchen when a motion sensor is triggered in that room.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">automation</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s">auto_queue_transfer_kitchen</span>
    <span class="na">alias</span><span class="pi">:</span> <span class="s">Automatically Transfer Queue to Kitchen</span>
    <span class="na">trigger</span><span class="pi">:</span>
      <span class="na">platform</span><span class="pi">:</span> <span class="s">state</span>
      <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.kitchen_motion_sensor_occupancy</span>
      <span class="na">to</span><span class="pi">:</span> <span class="s1">'</span><span class="s">on'</span>
    <span class="na">action</span><span class="pi">:</span>
      <span class="na">service</span><span class="pi">:</span> <span class="s">music_assistant.transfer_queue</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">media_player.ma_kitchen_speaker</span>
</code></pre></div></div>
<h3>Action music_assistant.search <a class="title-link" name="action-music_assistantsearch" href="#action-music_assistantsearch"></a>
</h3>
<p>Perform a global search on the Music Assistant library and all providers. This allows programmatic access to all of the music provider’s catalogs and could be used to build a HA dashboard where any track could be found for playback.</p>
<ul>
<li>
<strong>Data attribute</strong>: <code>config_entry_id</code>
<ul>
<li>
<strong>Optional</strong>: No.</li>
<li>
<strong>Description</strong>: The Music Assistant instance that the search will be performed upon. Allows for multiple servers to be running. This is obtained from a dropdown in the GUI editor. Users of YAML can use the dev tools action tab and select from the dropdown and then switch to YAML to get the actual value.</li>
<li>
<strong>Example</strong>: <code>Music Assistant</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>name</code>
<ul>
<li>
<strong>Optional</strong>: No.</li>
<li>
<strong>Description</strong>: The name/title to search for.</li>
<li>
<strong>Example</strong>: <code>We Are The Champions</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>media_type</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: The type(s) of content to search for. Select from artist, album, track, radio, or playlist. All types if omitted.</li>
<li>
<strong>Example</strong>: <code>playlist</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>artist</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: When specifying a track or album in the name field, you can optionally restrict results by this artist name.</li>
<li>
<strong>Example</strong>: <code>Queen</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>album</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: When specifying a track in the name field, you can optionally restrict results by this album name.</li>
<li>
<strong>Example</strong>: <code>News of the world</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>limit</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: Maximum number of items to return (per media type).</li>
<li>
<strong>Example</strong>: <code>10</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>library_only</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: Only include results that are in the library.</li>
<li>
<strong>Example</strong>: <code>true</code>
</li>
</ul>
</li>
</ul>
<h3>Action music_assistant.get_library <a class="title-link" name="action-music_assistantget_library" href="#action-music_assistantget_library"></a>
</h3>
<p>Perform a local search on the Music Assistant library. This provides programmatic access to concise information about the media item. This information could be used to create a queue of tracks for playback.</p>
<ul>
<li>
<strong>Data attribute</strong>: <code>config_entry_id</code>
<ul>
<li>
<strong>Optional</strong>: No.</li>
<li>
<strong>Description</strong>: The Music Assistant instance that the search will be performed upon. Allows for multiple servers to be running.</li>
<li>
<strong>Example</strong>: <code>Music Assistant</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>media_type</code>
<ul>
<li>
<strong>Optional</strong>: No.</li>
<li>
<strong>Description</strong>: The type of content to search for. Select from artist, album, track, radio, or playlist.</li>
<li>
<strong>Example</strong>: <code>artist</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>favorite</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: When selected, only items marked as favorites will be returned.</li>
<li>
<strong>Example</strong>: <code>false</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>limit</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: Maximum number of items to return.</li>
<li>
<strong>Example</strong>: <code>25</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>offset</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: From what point in the list should results be returned.</li>
<li>
<strong>Example</strong>: <code>10</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>search</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: A string that will further filter the results.</li>
<li>
<strong>Example</strong>: <code>Home</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>order_by</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: Sort the list by this field. View available sorting options in the Developer Tools &gt; Actions &gt; music_assistant.get_library action.</li>
<li>
<strong>Example</strong>: <code>year</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>album_artists_only</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: When <code>artist</code> is the <code>media_type</code> then this option will restrict the result to album artists only.</li>
<li>
<strong>Example</strong>: <code>true</code>
</li>
</ul>
</li>
<li>
<strong>Data attribute</strong>: <code>album_type</code>
<ul>
<li>
<strong>Optional</strong>: Yes.</li>
<li>
<strong>Description</strong>: When <code>album</code> is the <code>media_type</code> then this option will restrict the result according to the selection of either album, single, compilation, EP or unknown.</li>
<li>
<strong>Example</strong>: <code>album</code>
</li>
</ul>
</li>
</ul>
<h4>Example <a class="title-link" name="example-1" href="#example-1"></a>
</h4>
<p>This example will start playback of ten random tracks.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">script</span><span class="pi">:</span>
  <span class="na">create_random_queue</span><span class="pi">:</span>
    <span class="na">mode</span><span class="pi">:</span> <span class="s">single</span>
    <span class="na">sequence</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">service</span><span class="pi">:</span> <span class="s">music_assistant.get_library</span>
        <span class="na">data</span><span class="pi">:</span>
          <span class="na">limit</span><span class="pi">:</span> <span class="m">10</span>
          <span class="na">media_type</span><span class="pi">:</span> <span class="s">track</span>
          <span class="na">config_entry_id</span><span class="pi">:</span> <span class="s">01JEXNDHT21V0BHJXM7A5SZANV</span>
          <span class="na">order_by</span><span class="pi">:</span> <span class="s">random</span>
        <span class="na">response_variable</span><span class="pi">:</span> <span class="s">random_tracks</span>
      <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">music_assistant.play_media</span>
        <span class="na">data</span><span class="pi">:</span> 
          <span class="na">media_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">random_tracks['items']</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">map(attribute='uri')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">list</span><span class="nv"> </span><span class="s">}}"</span> 
          <span class="na">media_type</span><span class="pi">:</span> <span class="s">track</span>
          <span class="na">enqueue</span><span class="pi">:</span> <span class="s">replace</span>
        <span class="na">target</span><span class="pi">:</span>
          <span class="na">entity_id</span><span class="pi">:</span> <span class="s">media_player.ma_kitchen_speaker</span>
</code></pre></div></div>
<h3>Action music_assistant.get_queue <a class="title-link" name="action-music_assistantget_queue" href="#action-music_assistantget_queue"></a>
</h3>
<p>Get the queue details of a Music Assistant player queue. This provides programmatic access to comprehensive information about the current and next media item in the queue. This information could be used to create a bespoke media dashboard.</p>
<ul>
<li>
<strong>Data attribute</strong>: <code>entity_id</code>
<ul>
<li>
<strong>Optional</strong>: No.</li>
<li>
<strong>Description</strong>: The entity_id of the player holding the queue to be retrieved.</li>
<li>
<strong>Example</strong>: <code>media_player.kitchen_speaker</code>
</li>
</ul>
</li>
</ul>
<h4>Example <a class="title-link" name="example-2" href="#example-2"></a>
</h4>
<p>This example sets the name of the currently playing track in an <a href="https://www.home-assistant.io/integrations/input_text/"><code>input_text</code></a> which could then be used on a dashboard.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">script</span><span class="pi">:</span>
  <span class="na">get_now_playing</span><span class="pi">:</span>
    <span class="na">mode</span><span class="pi">:</span> <span class="s">queued</span>
    <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Get</span><span class="nv"> </span><span class="s">Now</span><span class="nv"> </span><span class="s">Playing</span><span class="nv"> </span><span class="s">Track</span><span class="nv"> </span><span class="s">Name"</span>
    <span class="na">sequence</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">music_assistant.get_queue</span>
        <span class="na">data</span><span class="pi">:</span>
          <span class="na">entity_id</span><span class="pi">:</span> <span class="s">media_player.ma_kitchen_speaker</span>
        <span class="na">response_variable</span><span class="pi">:</span> <span class="s">queue_info</span>
      <span class="pi">-</span> <span class="na">service</span><span class="pi">:</span> <span class="s">input_text.set_value</span>
        <span class="na">data</span><span class="pi">:</span>
          <span class="na">entity_id</span><span class="pi">:</span> <span class="s">input_text.now_playing</span> 
          <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">queue_info['media_player.ma_kitchen_speaker'].current_item.name</span><span class="nv"> </span><span class="s">}}"</span> 
</code></pre></div></div>
<h2>Notes <a class="title-link" name="notes" href="#notes"></a>
</h2>
<ul>
<li>Any Home Assistant players added to Music Assistant will appear duplicated as the MA version of the player is created. The original HA player can be hidden if desired.</li>
</ul>
<h2>Known limitations <a class="title-link" name="known-limitations" href="#known-limitations"></a>
</h2>
<p>The data returned by the <code>get_queue</code> action will be partially limited if the item is not in the library (For example, if an item was selected for playback directly from Spotify). Metadata such as favorite status, explicit status, last played, played count, and disc art URL are only available for items that are in the MA library.</p>
<p>Radio mode is only available with certain music providers, and an error will be shown if attempting to enable radio mode on an item that isn’t linked to one of those providers. Review the <a href="https://www.music-assistant.io/music-providers/#summary" rel="external nofollow">Music Assistant documentation<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> to identify which providers support this functionality.</p>
<h2>Troubleshooting <a class="title-link" name="troubleshooting" href="#troubleshooting"></a>
</h2>
<h3>Can’t find the MA actions <a class="title-link" name="cant-find-the-ma-actions" href="#cant-find-the-ma-actions"></a>
</h3>
<h4>Symptom: No Music Assistant actions are shown in the editor <a class="title-link" name="symptom-no-music-assistant-actions-are-shown-in-the-editor" href="#symptom-no-music-assistant-actions-are-shown-in-the-editor"></a>
</h4>
<p>When trying to set up a script or automation via the GUI, no MA actions can be found.</p>
<h5>Description <a class="title-link" name="description" href="#description"></a>
</h5>
<p>This means the add-on may have been installed, but the integration has not.</p>
<h5>Resolution <a class="title-link" name="resolution" href="#resolution"></a>
</h5>
<p>Go to the <a href="https://www.home-assistant.io/integrations/music_assistant/#configuration">Configuration section</a> and install the integration.</p>
<h2>Removing the integration <a class="title-link" name="removing-the-integration" href="#removing-the-integration"></a>
</h2>
<p>This integration follows standard integration removal.</p>
<h3>To remove an integration instance from Home Assistant <a class="title-link" name="to-remove-an-integration-instance-from-home-assistant" href="#to-remove-an-integration-instance-from-home-assistant"></a>
</h3>
<ol>
<li>Go to <a href="https://my.home-assistant.io/redirect/integrations" class="my" target="_blank"><strong>Settings</strong> &gt; <strong>Devices &amp; services</strong></a> and select the integration card.</li>
<li>From the list of devices, select the integration instance you want to remove.</li>
<li>Next to the entry, select the three dots <iconify-icon inline icon="mdi:dots-vertical" title="Dots vertical"></iconify-icon> menu. Then, select <strong>Delete</strong>.</li>
</ol>
<p>After deleting the integration, go to the <a href="https://my.home-assistant.io/redirect/supervisor_addon?addon=music_assistant" class="my" target="_blank"><strong>Settings</strong> &gt; <strong>Add-ons</strong></a> and remove the <strong>Music Assistant</strong> add-on from there as well (if installed).</p>


  


  
<div class="material-card text feedback">
  <h4>
<iconify-icon inline icon="mdi:feedback" title="Feedback"></iconify-icon> <b> Help us improve our documentation</b><a href="#feedback_section" class="title-link" name="feedback_section"></a>
</h4>
  Suggest an edit to this page, or provide/view feedback for this page.
  <div class="links">
    <ul aria-label="Page feedback options">
    <li><a href="https://github.com/home-assistant/home-assistant.io/tree/current/source/_integrations/music_assistant.markdown" target="_blank" title="Edit this page"><iconify-icon inline icon="mdi:edit"></iconify-icon> Edit</a></li>
    
    <li><a href="https://github.com/home-assistant/home-assistant.io/issues/new?template=feedback.yml&amp;url=https%3A%2F%2Fivangrod.github.io%2Fintegrations%2Fmusic_assistant%2F&amp;version=2025.9.4&amp;labels=current,integration%3A%20music_assistant" target="_blank" title="Provide feedback on this page"><iconify-icon inline icon="mdi:comment-edit-outline"></iconify-icon> Provide feedback</a></li>
    <li><a href="https://github.com/home-assistant/home-assistant.io/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3A%22integration%3A+music_assistant%22" target="_blank" title="View pending feedback for this page"><iconify-icon inline icon="mdi:comment-text-multiple-outline"></iconify-icon> View pending feedback</a></li>
    
  </ul>
  </div>
</div>


</article>

            
          </div>


          
            
              <aside id="integration-sidebar" class="grid__item one-third desk-wide-one-quarter lap-one-whole palm-one-whole">
              
            <div class="grid">
  




  


<section class="aside-module grid__item one-whole lap-one-half">
  <div class='brand-logo-container section'>
      <img src='https://brands.home-assistant.io/_/music_assistant//logo.png' srcset='https://brands.home-assistant.io/_/music_assistant/logo@2x.png 2x' /><a href='https://my.home-assistant.io/redirect/config_flow_start?domain=music_assistant' class='my badge' target='_blank'><img src='https://my.home-assistant.io/badges/config_flow_start.svg' /></a></div>

  <div class='section'>The Music Assistant  integration  was introduced in Home Assistant 2024.12, and it's used by <a title="Open analytics.home-assistant.io" href="https://analytics.home-assistant.io/integrations" target="_blank" rel="noopener">
        
          7.6%</a> of the active installations.
        
      
    
  </div>
    <div class='section'>
      <iconify-icon icon='mdi:upload-network-outline'></iconify-icon>&nbsp;Its IoT class is <a href='/blog/2016/02/12/classifying-the-internet-of-things/#classifiers'>Local Push.</a>
    </div>
  <div class='section'>
    <a href="https://github.com/home-assistant/core/tree/dev/homeassistant/components/music_assistant" target="_blank"><iconify-icon inline icon='simple-icons:github' title='Github'></iconify-icon> View source on GitHub</a><br />
    <a href="https://github.com/home-assistant/core/issues?q=is%3Aissue+is%3Aopen+label%3A%22integration%3A+music_assistant%22" target="_blank"><iconify-icon inline icon='mdi:bug' title='Bug'></iconify-icon> View known issues</a>
  </div></section>

<section class="aside-module grid__item one-whole lap-one-half">
  <div class='section'>
    <h1 class="title epsilon"><iconify-icon inline icon='mdi:person-heart' title='Person heart'></iconify-icon> Integration owners</h1>
    
        
        

          
          <div class="section">
            We are incredibly grateful to the following contributors who currently maintain this integration:<br />
          </div>
          <div class="section"><a href="https://github.com/music-assistant" target="_blank"><img class="codeowner-avatar" src="https://avatars.githubusercontent.com/music-assistant?size=96" alt="@music-assistant"/> @music-assistant</a><br /></div>
        
    
  </div>
</section>






  <section id="toc-module" class="aside-module grid__item one-whole lap-one-half">
        <div class='section'>
          <h1 class="title epsilon"><iconify-icon inline icon='mdi:toc' title='Toc'></iconify-icon> On this page</h1>
          <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#configuration">Configuration</a>
<ul>
<li class="toc-entry toc-h3"><a href="#manual-configuration">Manual configuration</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#supported-functionality">Supported functionality</a>
<ul>
<li class="toc-entry toc-h3"><a href="#media-player-entities">Media player entities</a></li>
<li class="toc-entry toc-h3"><a href="#favorite-current-song-button">Favorite current song button</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#actions">Actions</a>
<ul>
<li class="toc-entry toc-h3"><a href="#action-music_assistantplay_media">Action music_assistant.play_media</a></li>
<li class="toc-entry toc-h3"><a href="#action-music_assistantplay_announcement">Action music_assistant.play_announcement</a></li>
<li class="toc-entry toc-h3"><a href="#action-music_assistanttransfer_queue">Action music_assistant.transfer_queue</a></li>
<li class="toc-entry toc-h3"><a href="#action-music_assistantsearch">Action music_assistant.search</a></li>
<li class="toc-entry toc-h3"><a href="#action-music_assistantget_library">Action music_assistant.get_library</a></li>
<li class="toc-entry toc-h3"><a href="#action-music_assistantget_queue">Action music_assistant.get_queue</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#notes">Notes</a></li>
<li class="toc-entry toc-h2"><a href="#known-limitations">Known limitations</a></li>
<li class="toc-entry toc-h2"><a href="#troubleshooting">Troubleshooting</a>
<ul>
<li class="toc-entry toc-h3"><a href="#cant-find-the-ma-actions">Can’t find the MA actions</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#removing-the-integration">Removing the integration</a>
<ul>
<li class="toc-entry toc-h3"><a href="#to-remove-an-integration-instance-from-home-assistant">To remove an integration instance from Home Assistant</a></li>
</ul>
</li>
</ul>
        </div>
      </section><section id="category-module" class="aside-module grid__item one-whole lap-one-half">
      <div class='section'>
        <h1 class="title epsilon"><iconify-icon inline icon='mdi:category' title='Category'></iconify-icon> Categories</h1>
        <ul class='divided'><li>
            <a href='/integrations/#media-player'>Media player</a>
          </li></ul>
      </div>
    </section></div>

          </aside>
          
        </div>
      </div>

      <footer>
        <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="skyline grid">
        <div class="skyline grid__item one-whole">
          <div class="footer-skyline">
          </div>
        </div>
      </div>
      <div class="footer-nav grid">
        <div class="company grid__item one-quarter lap-one-half palm-one-whole">
          <div class="title">
            <img
              src="/needlehack-blog/images/footer-logo-text.svg"
              height="72"
              alt="Home Assistant"
            />
          </div>
          <p>
            Home Assistant is a project from the <a href="https://www.openhomefoundation.org/">Open Home Foundation</a>, sponsored by <a href="https://www.nabucasa.com/">Nabu Casa</a>.
          </p>
        </div>

        <div class="grid__item one-quarter lap-one-half palm-one-whole">
          <h3>Join us and contribute!</h3>
          <ul>
            <li><a class="external-link" href="https://github.com/home-assistant/">GitHub repo <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://developers.home-assistant.io">Developers Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://design.home-assistant.io">Design Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://data.home-assistant.io">Data Science Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://community.home-assistant.io">Community Forum <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://creators.home-assistant.io/">Creator Network <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://works-with.home-assistant.io/">Works With Home Assistant <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a href="/needlehack-blog/community">Our community</li>
            <li><a href="/needlehack-blog/help/reporting_issues/">Reporting issues</a></li>
          </ul>
          <h3>System status</h3>
          <ul>
            <li>
              <a class="external-link"  href="https://alerts.home-assistant.io">Integration Alerts <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a>
            </li>
            <li><a href="/needlehack-blog/security/">Security Alerts</a></li>
            <li>
              <a class="external-link" href="https://status.home-assistant.io">System Status <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a>
            </li>
          </ul>
        </div>

        <div class="grid__item one-quarter lap-one-half palm-one-whole">
          <h3>Companion apps</h3>
          <ul>
            <li><a class="external-link" href="https://apps.apple.com/us/app/home-assistant/id1099568401">iOS and Apple devices</a></li>
            <li><a class="external-link" href="https://play.google.com/store/apps/details?id=io.homeassistant.companion.android">Android and Wear OS</a></li>
            <li><a class="external-link" href="https://companion.home-assistant.io/">...and more!</a></li>
          </ul>
          <h3>Governance</h3>
          <ul>
            <li><a href="/needlehack-blog/privacy/">Privacy Notices</a></li>
            <li><a href="/needlehack-blog/developers/cla/">Contributor License Agreement</a></li>
            <li><a href="/needlehack-blog/tos/">Terms of Service</a></li>
            <li><a href="/needlehack-blog/code_of_conduct/">Code of Conduct</a></li>
            <li><a href="/needlehack-blog/developers/credits/">Credits</a></li>
            <li><a href="/needlehack-blog/developers/license/">License</a></li>
          </ul>
        </div>

        <div class="socials grid__item one-quarter lap-one-half palm-one-whole">

          <h3>Follow us</h3>
          <p><a class="external-link" href='https://newsletter.openhomefoundation.org/#/portal'>Sign up for our newsletter <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></p>
          <div class="icons">
            <a
              rel="me"
              href="https://youtube.com/@home_assistant"
              title="YouTube"
              target="_blank"
              ><iconify-icon icon="simple-icons:youtube"></iconify-icon></a>
            <a
              rel="me"
              href="https://reddit.com/r/homeassistant"
              title="Reddit"
              target="_blank"
              ><iconify-icon icon="simple-icons:reddit"></iconify-icon></a>
            <a
              rel="me"
              href="https://github.com/home-assistant/home-assistant"
              title="GitHub"
              target="_blank"
              ><iconify-icon icon="simple-icons:github"></iconify-icon></a>
            <br />
            <a
              rel="me"
              href="https://fosstodon.org/@homeassistant"
              title="Mastodon"
              target="_blank"
              ><iconify-icon icon="simple-icons:mastodon"></iconify-icon></a>
            <a
              rel="me"
              href="https://bsky.app/profile/home-assistant.io"
              title="Bluesky"
              target="_blank"
             ><iconify-icon icon="simple-icons:bluesky"></iconify-icon></a>
            <a
              rel="me"
              href="https://x.com/home_assistant"
              title="X"
              target="_blank"
             ><iconify-icon icon="simple-icons:x"></iconify-icon></a>
            <br />
            <a
              rel="me"
              href="https://www.facebook.com/homeassistantio"
              title="Facebook"
              target="_blank"
              ><iconify-icon icon="simple-icons:facebook"></iconify-icon></a>
            <a
              rel="me"
              href="https://www.instagram.com/homeassistant/"
              title="Instagram"
              target="_blank"
              ><iconify-icon icon="simple-icons:instagram"></iconify-icon></a>
            <a
              rel="me"
              href="https://www.linkedin.com/company/home-assistant"
              title="LinkedIn"
              target="_blank"
              ><iconify-icon icon="simple-icons:linkedin"></iconify-icon></a>
          </div>

          <div class="web-notice">
            <p>
              For partnership inquiries please check out <a href="https://works-with.home-assistant.io/">Works With Home Assistant</a>. For media, get in touch <a href="mailto:media@openhomefoundation.org">here</a>. For other questions, you can contact us <a href="mailto:hello@home-assistant.io">here</a> (No technical support!)
            </p>
            <p>
              Website powered by <a href="https://jekyllrb.com/">Jekyll</a><br />
              Originally based on the <a href="https://github.com/coogie/oscailte">Oscailte theme</a>
            </p>
            <a href="https://www.netlify.com">
              <img
                src="/needlehack-blog/images/frontpage/netlify.svg"
                alt="Deploys by Netlify Badge"
              />
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

      </footer>

    </div>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@justinribeiro/lite-youtube@1.3.1/lite-youtube.js"></script>

<script src="/needlehack-blog/javascripts/terminology_tooltip.js" type="text/javascript" defer></script>

<script src="/needlehack-blog/javascripts/prism.js" type="text/javascript" defer></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@3/dist/umd/index.min.js"></script>
<script type="text/javascript">
  docsearch({
    container: '#docsearch',
    appId: 'FBHBYS3J0U',
    indexName: 'home-assistant',
    apiKey: "ba6f7e6d97b3d3d2f778978c742a47c6",
  });
  document.querySelector('.site-title').addEventListener('contextmenu', function (ev) {
    ev.preventDefault();
    document.location.assign("https://design.home-assistant.io/#brand/logo")
  });
</script>




<script type="text/javascript">
  {
    const article = document.querySelector("article.post");
    if (article) {
      const iframes = article.querySelectorAll("iframe[data-src]");
      let loaded = false;
      if (iframes) {
        document.addEventListener('mousemove', loadLazyFrames, { passive: true, once: true });
        document.addEventListener('touchmove', loadLazyFrames, { passive: true, once: true });
        document.addEventListener('scroll', loadLazyFrames, { passive: true, once: true });
  
        function loadLazyFrames() {
          if (loaded) return;
          loaded = true;
  
          iframes.forEach((iframe) => {
            const src = iframe.getAttribute("data-src");
            if (src) {
              iframe.setAttribute("src", src);
              iframe.removeAttribute("data-src");
            }
          });
        }
      }
    }
  }
</script>

  </body>
</html>
