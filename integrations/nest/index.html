



<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Google Nest - Home Assistant</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Instructions on how to integrate Nest into Home Assistant.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://www.home-assistant.io/integrations/nest/">

    <meta property="fb:app_id" content="338291289691179">
    <meta property="og:title" content="Google Nest">
    <meta property="og:site_name" content="Home Assistant">
    <meta property="og:url" content="https://www.home-assistant.io/integrations/nest/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Instructions on how to integrate Nest into Home Assistant.">
    <meta property="og:image" content="https://ivangrod.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@home_assistant">
    
    <meta name="twitter:title" content="Google Nest">
    <meta name="twitter:description" content="Instructions on how to integrate Nest into Home Assistant.">
    <meta name="twitter:image" content="https://ivangrod.github.io/images/default-social.png">
    <link rel="me" href="https://fosstodon.org/@homeassistant">

    <link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3/dist/style.min.css" rel="stylesheet" />
    <link href="/needlehack-blog/stylesheets/prism.css | cache_buster" rel="stylesheet">
    <link href="/needlehack-blog/stylesheets/screen.css' | cache_buster" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Home Assistant" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&amp;family=Instrument+Sans:ital,wdth,wght@0,99,400..700;1,99,400..700&amp;" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/2.1.0/iconify-icon.min.js"></script>
  </head>

  <body  class=" integration-page  ">
    <header class='site-header '>
      



<div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/needlehack-blog/" class="site-title">
        <div class="logo"></div>
      </a>
      <a class="release-date" href="/blog/2025/09/03/release-20259/" title="Latest version 2025.9.4 released September 19, 2025">
        2025.9.4
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle" />
        <label
          for="toggle"
          class="toggle"
          data-open="Main Menu"
          data-close="⨉"
        ></label>
        <ul class="menu pull-right">
          <li><a  href="/needlehack-blog/installation/">Getting started</a></li>
          <li>
            <a  href="/needlehack-blog/docs/">Documentation <iconify-icon inline icon='mdi:chevron-down' title='Chevron down'></iconify-icon></a>
            <ul>
              <li><a href="/needlehack-blog/installation/"><iconify-icon inline icon='simple-icons:homeassistant' title='Homeassistant'></iconify-icon> Installation</a></li>
              <li><a href="/needlehack-blog/docs/automation/"><iconify-icon inline icon='mdi:robot-happy' title='Robot happy'></iconify-icon> Automations</a></li>
              <li><a href="/needlehack-blog/dashboards/"><iconify-icon inline icon='mdi:gauge' title='Gauge'></iconify-icon> Dashboards</a></li>
              <li><a href="/needlehack-blog/voice_control/"><iconify-icon inline icon='mdi:comment-processing-outline' title='Comment processing outline'></iconify-icon> Voice assistants</a></li>
              <li><a href="/needlehack-blog/docs/organizing/"><iconify-icon inline icon='mdi:view-grid' title='View grid'></iconify-icon> Device organization</a></li>
              <li><a href="/needlehack-blog/docs/energy/"><iconify-icon inline icon='mdi:solar-power-variant' title='Solar power variant'></iconify-icon> Energy management</a></li>
              <li><a href="/needlehack-blog/docs/configuration/"><iconify-icon inline icon='mdi:cog' title='Cog'></iconify-icon> Advanced configuration</a></li>
            </ul>
          </li>
          <li><a class="active" href="/needlehack-blog/integrations/">Integrations</a></li>
          <li><a  href="/needlehack-blog/blog/">Blog</a></li>
          <li><a  href="/needlehack-blog/help/">Need help?</a></li>
          <li>
            <div class="docsearch" id="docsearch"></div>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>

    </header>

    <div class="page-content">

      

      <div class="grid-wrapper">
        <div class="grid grid-center">

          <aside id="toc-bar" class="grid__item desk-wide-one-sixth">
                <section class="aside-module grid__item one-whole">
                  <div class='section'>
                    <h1 class="title epsilon"><iconify-icon inline icon='mdi:toc' title='Toc'></iconify-icon> On this page</h1>
                    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#configuration">Configuration</a></li>
<li class="toc-entry toc-h2"><a href="#climate">Climate</a></li>
<li class="toc-entry toc-h2"><a href="#sensor">Sensor</a></li>
<li class="toc-entry toc-h2"><a href="#camera">Camera</a></li>
<li class="toc-entry toc-h2"><a href="#event">Event</a></li>
<li class="toc-entry toc-h2"><a href="#device-triggers">Device Triggers</a></li>
<li class="toc-entry toc-h2"><a href="#google-home-app-notification-settings">Google Home App Notification Settings</a></li>
<li class="toc-entry toc-h2"><a href="#media-source">Media source</a>
<ul>
<li class="toc-entry toc-h3"><a href="#media-attachments">Media Attachments</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#known-limitations">Known limitations</a>
<ul>
<li class="toc-entry toc-h3"><a href="#google-account-types">Google account types</a></li>
<li class="toc-entry toc-h3"><a href="#google-home-app-migration-and-cameras">Google Home App migration and cameras</a></li>
<li class="toc-entry toc-h3"><a href="#temperature-sensors-partially-supported">Temperature sensors partially supported</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#troubleshooting">Troubleshooting</a>
<ul>
<li class="toc-entry toc-h3"><a href="#cant-link-google-account">Can’t link Google account</a></li>
<li class="toc-entry toc-h3"><a href="#cant-find-devices">Can’t find devices</a></li>
<li class="toc-entry toc-h3"><a href="#authentication-problems">Authentication problems</a></li>
<li class="toc-entry toc-h3"><a href="#integration-set-up-failure">Integration set up failure</a></li>
<li class="toc-entry toc-h3"><a href="#nest-integration-data-issues">Nest integration data issues</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#removing-the-integration">Removing the integration</a>
<ul>
<li class="toc-entry toc-h3"><a href="#to-remove-an-integration-instance-from-home-assistant">To remove an integration instance from Home Assistant</a></li>
</ul>
</li>
</ul>
                  </div>
                </section>
              </aside> 

          
          <div class="grid__item two-thirds desk-wide-seven-twelfths lap-one-whole palm-one-whole">
          

            
              <article class="page">
  
  <header>
    
    
      <div class="breadcrumbs">
        <a href="/needlehack-blog/">Home</a>
        
          
            
            ▸ <a href="/integrations/">Integrations</a>
          
        
          
            ▸ 
          
        
      </div>
    
    <h1 class="title indent">
      
        Google Nest
      
    </h1>
  </header>
  
    
    
    
  
  
  <p>The <code>nest</code> integration allows you to integrate a few <a href="https://developers.google.com/nest/device-access/supported-devices" rel="external nofollow">supported<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> Google <a href="https://store.google.com/us/category/connected_home?" rel="external nofollow">Nest<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> devices in Home Assistant. This integration uses the <a href="https://developers.google.com/nest/device-access/api" rel="external nofollow">Smart Device Management<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> API and Google’s Cloud Pubsub to efficiently listen for changes in device state or other events. See <a href="https://developers.google.com/nest/device-access/supported-devices" rel="external nofollow">Supported Devices<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> for all devices supported by the SDM API.</p>
<p>There is currently support for the following device types within Home Assistant:</p>
<ul>
<li><a href="#climate">Climate</a></li>
<li><a href="#sensor">Sensor</a></li>
<li><a href="#camera">Camera</a></li>
<li><a href="#event">Event</a></li>
</ul>
<p>Cameras and doorbells use <a href="#automation-and-device-triggers">Automation and device triggers</a> for events and a <a href="#media-source">media source</a> for capturing media images on supported devices. Other device types like Smoke and CO Alarms or Security systems are not currently supported by the SDM API.</p>
<p>You are in control of the information and capabilities exposed to Home Assistant. You can authorize a single device, multiple devices, or different levels of functionality such as motion events, live streams, for any particular device. The integration is flexible enough to adapt based on what you allow.</p>
<h1>Prerequisites</h1>
<ul>
<li>
<p>The Nest Device Access Console Pub/Sub setup process has changed as of January 23rd 2025. <strong>Please make sure you are using the latest version of Home Assistant.</strong></p>
</li>
<li>
<p>The Nest Smart Device Management (SDM) API <strong>requires a US$5 fee</strong>. Before buying, make sure your device is <a href="https://developers.google.com/nest/device-access/supported-devices" rel="external nofollow">supported<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</p>
</li>
</ul>
<h2>Configuration <a class="title-link" name="configuration" href="#configuration"></a>
</h2>
<div class="details-block">
  <details class="details-block-item">
    <summary class="details-block-title">
      <span>Important: Remove existing Google credentials first</span>
      <div class="details-block-arrow">
      <svg class="down" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg>
      <svg class="up" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"></path></svg>
      </div>
    </summary>
    <div class="details-block-content" id="content_0">
<p>If you have previously set up the Google integration or a Nest integration, you should remove any existing Google integration credentials before proceeding.</p>
<p>To remove existing credentials:</p>
<ol>
<li>Go to <strong><a href="https://my.home-assistant.io/redirect/integrations" class="my" target="_blank">Settings &gt; Devices &amp; services</a></strong>.</li>
<li>Select the three dots (⋮) menu in the upper right corner.</li>
<li>Review the list for any previous Google or Nest integrations.</li>
<li>Remove any existing Google/Nest integration by selecting it and choosing “Delete”.</li>
</ol>
<p>This ensures that Home Assistant will use your latest Google integration configuration and prevents authentication conflicts.</p>
</div>
  </details>
</div>
<p>To add the <strong>Nest</strong> integration to your Home Assistant, use this My Button:
<a href="https://my.home-assistant.io/redirect/config_flow_start?domain=nest" class="my badge" target="_blank"><img src="https://my.home-assistant.io/badges/config_flow_start.svg"></a></p>
<p><img src="/images/integrations/nest/setup_prompt.png" alt="Screenshot of Setup prompt"></p>
<div class="details-block">
  <details class="details-block-item">
    <summary class="details-block-title">
      <span>Manual configuration steps</span>
      <div class="details-block-arrow">
      <svg class="down" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg>
      <svg class="up" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"></path></svg>
      </div>
    </summary>
    <div class="details-block-content" id="content_1">
<ol>
<li>Browse to your Home Assistant instance.</li>
<li>Go to <strong><a href="https://my.home-assistant.io/redirect/integrations" class="my" target="_blank">Settings &gt; Devices &amp; services</a></strong>.</li>
<li>In the bottom right corner, select the
<strong><a href="https://my.home-assistant.io/redirect/config_flow_start?domain=nest" class="my" target="_blank"><iconify-icon inline icon="mdi:plus"></iconify-icon> Add Integration</a></strong> button.</li>
<li>From the list, select <strong>Nest</strong> and follow the instructions on screen.</li>
</ol>
</div>
  </details>
</div>
<p>The integration setup steps will walk you through the process of configuring a Google Cloud Project, Device Access Project, and finally link your account to Home Assistant. Make sure you are running the most recent version of Home Assistant.</p>
<div class="details-block">
  <details class="details-block-item">
    <summary class="details-block-title">
      <span>Create and configure Cloud Project [Cloud Console]</span>
      <div class="details-block-arrow">
      <svg class="down" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg>
      <svg class="up" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"></path></svg>
      </div>
    </summary>
    <div class="details-block-content" id="content_2">
<p>By the end of this section you will have a Cloud Project with the necessary APIs enabled</p>
<ol>
<li>
<p>Go to the <a href="https://console.developers.google.com/apis/credentials" rel="external nofollow">Google Cloud Console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</p>
</li>
<li>
<p>If this is your first time here, you likely need to create a new Google Cloud project. Click <strong>Create Project</strong> then <strong>New
Project</strong>.
<img src="/images/integrations/nest/api_project_needed.png" alt="Screenshot of APIs and Services Cloud Console with no existing project"></p>
</li>
<li>
<p>Give your Cloud Project a name then click <strong>Create</strong>.</p>
</li>
<li>
<p>You will need to hold on to your <em>Cloud Project ID</em> to enable a subscription to receive updates from devices. Visit the <a href="https://console.cloud.google.com/home/dashboard" rel="external nofollow">Cloud Console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> and copy the <em>Project ID</em> needed by Home Assistant.</p>
<p><img src="/images/integrations/nest/console_project_id.png" alt="Screenshot of success"></p>
</li>
<li>
<p>Go to <a href="https://console.cloud.google.com/apis/library" rel="external nofollow">APIs &amp; Services &gt; Library<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> where you can enable APIs.</p>
</li>
<li>
<p>From the API Library search for <a href="https://console.cloud.google.com/apis/library/smartdevicemanagement.googleapis.com" rel="external nofollow">Smart Device management<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> and click <strong>Enable</strong>.</p>
<p><img src="/images/integrations/nest/enable_sdm_api.png" alt="Screenshot of Search for SDM API"></p>
</li>
<li>
<p>From the API Library search for <a href="https://console.developers.google.com/apis/library/pubsub.googleapis.com" rel="external nofollow">Cloud Pub/Sub API<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> in the Cloud Console and click <strong>Enable</strong>.</p>
</li>
</ol>
<p>You now have a cloud project ready for the next section to configure authentication with OAuth.</p>
</div>
  </details>
</div>
<div class="details-block">
  <details class="details-block-item">
    <summary class="details-block-title">
      <span>Configure OAuth Consent screen [Cloud Console]</span>
      <div class="details-block-arrow">
      <svg class="down" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg>
      <svg class="up" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"></path></svg>
      </div>
    </summary>
    <div class="details-block-content" id="content_3">
<p>By the end of this section you will have configured the OAuth Consent Screen, needed for giving Home Assistant access to
your cloud project.</p>
<ol>
<li>
<p>Go to the <a href="https://console.developers.google.com/apis/credentials" rel="external nofollow">Google API Console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</p>
</li>
<li>
<p>Click <a href="https://console.cloud.google.com/apis/credentials/consent" rel="external nofollow">OAuth consent screen<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> and configure it.</p>
</li>
<li>
<p>Select <strong>External</strong> then click <strong>Create</strong>. While you are here, you may click the <em>Let us know what you think</em> to give Google’s OAuth team any feedback about your experience configuring credentials for self-hosted software. They make regular improvements to this flow and appear to value feedback.
<img src="/images/integrations/nest/oauth_consent_create.png" alt="Screenshot of OAuth consent screen creation"></p>
</li>
<li>
<p>The <em>App Information</em> screen needs you to enter an <strong>App name</strong> and <strong>User support email</strong>, then enter your email again under <strong>Developer contact email</strong>. These are only shown while you later go through the OAuth flow to authorize Home Assistant to access your account. Click <strong>Save and Continue</strong>. Omit unnecessary information (e.g. logo) to avoid additional review by Google.</p>
</li>
<li>
<p>On the <em>Scopes</em> step click <strong>Save and Continue</strong>.</p>
</li>
<li>
<p>On the <em>Test Users</em> step, you need to add your Google Account (e.g., your @gmail.com address) to the list. Click <em>Save</em> on your test account then <strong>Save and Continue</strong> to finish the consent flow.
<img src="/images/integrations/nest/oauth_consent_test_users.png" alt="Screenshot of OAuth consent screen test users"></p>
</li>
<li>
<p>Navigate back to the <em>OAuth consent screen</em> and click <strong>Publish App</strong> to set the <em>Publishing status</em> is <strong>In Production</strong>.</p>
<p><img src="/images/integrations/nest/oauth_consent_production_status.png" alt="Screenshot of OAuth consent screen production status"></p>
</li>
<li>
<p>The warning says your <em>app will be available to any user with a Google Account</em> which refers to the fields you entered on the <em>App Information</em> screen if someone finds the URL. This does not expose your Google Account or Nest data.</p>
</li>
<li>
<p>Make sure the status is not <em>Testing</em>, or you will get logged out every 7 days.</p>
</li>
</ol>
</div>
  </details>
</div>
<div class="details-block">
  <details class="details-block-item">
    <summary class="details-block-title">
      <span>Configure OAuth Application Credentials [Cloud Console]</span>
      <div class="details-block-arrow">
      <svg class="down" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg>
      <svg class="up" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"></path></svg>
      </div>
    </summary>
    <div class="details-block-content" id="content_4">
<p>By the end of this section you will have the OAuth <em>Client ID</em> and <em>Client Secret</em> needed for Application Credentials setup.</p>
<p>The steps below use <em>Web Application Auth</em> with <em>My Home Assistant</em> to handle Google’s strict URL validation rules like requiring SSL and a publicly resolvable redirect URL.</p>
<ol>
<li>
<p>Navigate to the <a href="https://console.cloud.google.com/apis/credentials" rel="external nofollow">Credentials<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> page and click <strong>Create Credentials</strong>.
<img src="/images/integrations/nest/create_credentials.png" alt="Screenshot of APIs and Services Cloud Console"></p>
</li>
<li>
<p>From the drop-down list select <em>OAuth client ID</em>.
<img src="/images/integrations/nest/oauth_client_id.png" alt="Screenshot of OAuth client ID selection"></p>
</li>
<li>
<p>Enter <em>Web Application</em> for the Application type.</p>
</li>
<li>
<p>Pick a name for your credential.</p>
</li>
<li>
<p>Add <strong>Authorized redirect URIs</strong> end enter <code>https://my.home-assistant.io/redirect/oauth</code></p>
</li>
<li>
<p>Click <em>Create</em> to create the credential.
<img src="/images/integrations/nest/oauth_redirect_uri.png" alt="Screenshot of creating OAuth credentials"></p>
</li>
<li>
<p>You should now be presented with an <em>OAuth client created</em> message.</p>
<p><img src="/images/integrations/nest/oauth_created.png" alt="Screenshot of OAuth Client ID and Client Secret"></p>
</li>
<li>
<p>You now have <em>OAuth Client ID</em> and <em>OAuth Client Secret</em> needed by Home Assistant.  See <a href="/integrations/application_credentials">Application Credentials</a> for more general detail about how Home Assistant manages credentials.</p>
</li>
</ol>
</div>
  </details>
</div>
<div class="details-block">
  <details class="details-block-item">
    <summary class="details-block-title">
      <span>Create a Device Access Project [Device Access Console]</span>
      <div class="details-block-arrow">
      <svg class="down" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg>
      <svg class="up" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"></path></svg>
      </div>
    </summary>
    <div class="details-block-content" id="content_5">
<p>Now that you have authentication configured, you will create a Nest Device Access Project which <em>requires a US$5 fee</em>. Once completed, you will have a <em>Device Access Project ID</em>.</p>
<ol>
<li>Go to the <a href="https://developers.google.com/nest/device-access/registration" rel="external nofollow">Device Access Registration<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> page.</li>
</ol>
<div class="alert alert-note">
  <p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
  <div class="alert-content">
<p>Read the warnings on the page before proceeding, including Google Account type limitations.</p>
  </div>
</div>
<ol start="2">
<li>
<p>Select the button <strong><a href="https://console.nest.google.com/device-access/" rel="external nofollow">Go to the Device Access Console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a></strong>.
<img src="/images/integrations/nest/device_access.png" alt="Screenshot of Device Access Registration"></p>
</li>
<li>
<p>Check the box to “Accept the Terms of Service” and select <strong>Continue to Payment</strong> where you need to pay a fee (currently US$5).
<img src="/images/integrations/nest/accept_terms.png" alt="Screenshot of accepting terms"></p>
</li>
<li>
<p>Now the <a href="https://console.nest.google.com/device-access/project-list" rel="external nofollow">Device Access Console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> should be visible. Select  <strong>Create project</strong>.</p>
</li>
<li>
<p>Give your Device Access project a name and select <strong>Next</strong>.
<img src="/images/integrations/nest/project_name.png" alt="Screenshot of naming a project"></p>
</li>
<li>
<p>Next you will be asked for an <strong>OAuth client ID</strong>  which you created in the previous step and select <strong>Next</strong>.
<img src="/images/integrations/nest/device_access_oauth_client_id.png" alt="Screenshot of Device Access Console OAuth client ID"></p>
</li>
<li>
<p>Leave <strong>Enable Events</strong> unchecked for now and <strong>Create project</strong>. You need a Pub/Sub topic
(created in the next section) to enable events. This requires additional setup in the
Google Cloud Pub/Sub console so we will skip that step for now then come back to it in
the next section.</p>
</li>
<li>
<p>You now have a <em>Device Access Project ID</em> needed by Home Assistant.</p>
</li>
</ol>
</div>
  </details>
</div>
<div class="details-block">
  <details class="details-block-item">
    <summary class="details-block-title">
      <span>Enable events and Pub/Sub topic [Device Access &amp; Cloud Console]</span>
      <div class="details-block-arrow">
      <svg class="down" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg>
      <svg class="up" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"></path></svg>
      </div>
    </summary>
    <div class="details-block-content" id="content_6">
<p>The Nest Device Access Console Pub/Sub setup process has changed as of January 23rd 2025. <strong>Please make sure you are using the latest version of Home Assistant.</strong>.</p>
<p>This section describes how to configure your Device Access Project with a Pub/Sub topic
to publish events for devices in your home. Home Assistant and the Device Access Project must be configured to use the <em>Topic Name</em> otherwise you will not receive events.</p>
<p>If you previously set up events, then your Device Access Project may have already created a topic for you and you can use that topic name. For new projects, or if you disable events, you need to create the topic yourself following the instructions below.</p>
<ol>
<li>
<p>Go to the <a href="https://console.cloud.google.com/cloudpubsub/topic/list" rel="external nofollow">Pub/Sub Google Cloud Console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</p>
</li>
<li>
<p>Select <strong>Create Topic</strong>.</p>
</li>
<li>
<p>Enter a <strong>Topic ID</strong> such as <code>home-assistant-nest</code>. You may leave the default settings.</p>
</li>
</ol>
<p><img src="/images/integrations/nest/cloud_pubsub_create_topic.png" alt="Screenshot of OAuth confirmation"></p>
<ol start="4">
<li>
<p>Select <strong>Create</strong> to create the topic.</p>
</li>
<li>
<p>You now have a <strong>Topic Name</strong> needed by the Device Access Console and Home Assistant. The full <strong>Topic Name</strong> that contains your Cloud Project ID and the <strong>Topic ID</strong> such as <code>projects/&lt;cloud console id&gt;/topics/home-assistant-nest</code>.</p>
</li>
<li>
<p>Next, you need to give the Device Access Console permission to publish to your Topic. From the Pub/Sub Topic page select <strong>Add Principal</strong>.</p>
</li>
</ol>
<p><img src="/images/integrations/nest/cloud_pubsub_add_principal.png" alt="Screenshot of OAuth confirmation"></p>
<ol start="7">
<li>
<p>In <strong>New Principals</strong> enter <code>sdm-publisher@googlegroups.com</code></p>
</li>
<li>
<p>In <strong>Select a Role</strong> under <strong>Pub/Sub</strong> select <strong>Pub/Sub Publisher</strong> and <strong>Create</strong>.</p>
</li>
</ol>
<p><img src="/images/integrations/nest/cloud_pubsub_add_principal_role.png" alt="Screenshot of OAuth confirmation"></p>
<ol start="9">
<li>
<p>Next you can configure the Device Access Console to use this topic. Visit the <a href="https://console.nest.google.com/device-access/" rel="external nofollow">Device Access Console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</p>
</li>
<li>
<p>Select the Device Access Project you previously created. It should show the Pub/Sub topic
as disabled. If there is an existing topic shown, then you may delete it and use
the one you just created to avoid getting them mixed up.</p>
</li>
</ol>
<p><img src="/images/integrations/nest/device_access_topic_disabled.png" alt="Screenshot of OAuth confirmation"></p>
<ol start="11">
<li>
<p>Select <em>…</em> next to <strong>Pub/Sub topic</strong>, then <strong>Enable events with PubSub topic</strong>.</p>
</li>
<li>
<p>Enter the full Pub/Sub <strong>Topic Name</strong> and select <strong>Add &amp; Validate</strong>. If you see an error, then
review the previous steps again and configure the topic and permissions.</p>
</li>
</ol>
<p><img src="/images/integrations/nest/device_access_validate_pubsub.png" alt="Screenshot of OAuth confirmation"></p>
<ol start="13">
<li>You have successfully configured events and the Pub/Sub topic used by Home Assistant.</li>
</ol>
<p><img src="/images/integrations/nest/device_access_complete.png" alt="Screenshot of OAuth confirmation"></p>
</div>
  </details>
</div>
<div class="details-block">
  <details class="details-block-item">
    <summary class="details-block-title">
      <span>Link Google Account</span>
      <div class="details-block-arrow">
      <svg class="down" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg>
      <svg class="up" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"></path></svg>
      </div>
    </summary>
    <div class="details-block-content" id="content_7">
<p>In this section you will authorize Home Assistant to access your account by generating an <em>Authentication Token</em>.</p>
<p>See <a href="#troubleshooting">Troubleshooting</a> below for steps to resolve the common misconfigurations that result in errors such as <em>Can’t link…</em> or <em>Error 400</em> from Google.</p>
<ol>
<li>
<p>In Home Assistant, you should already be going through the setup flow. If not, go back and click the <em>My: Add Integration</em> button above to start the setup. The integration will ask you for all of the necessary integration configuration.</p>
</li>
<li>
<p>Once all configuration information is entered in Home Assistant, a new tab opens, allowing you to choose a Google account. This should be the same developer account you configured above.</p>
</li>
<li>
<p>The <em>Google Nest permissions</em> screen will allow you to choose which devices to configure and lets you select devices from multiple homes. You likely want to enable everything, however, you can leave out any feature you do not wish to use with Home Assistant.</p>
<p><img src="/images/integrations/nest/oauth_approve.png" alt="Screenshot of Nest permissions authorization"></p>
</li>
<li>
<p>You will get redirected to another account selection page.</p>
</li>
<li>
<p>You may see a warning screen that says <em>Google hasn’t verified this app</em> since you just set up an un-verified developer workflow. Click <em>Continue</em> to proceed.</p>
<p><img src="/images/integrations/nest/oauth_app_verification.png" alt="Screenshot OAuth warning"></p>
</li>
<li>
<p>Then you will be asked to grant access to additional permissions. Click <em>Allow</em>.
<img src="/images/integrations/nest/oauth_grant1.png" alt="Screenshot 1 of granting permissions">
<img src="/images/integrations/nest/oauth_grant2.png" alt="Screenshot 2 of granting permissions"></p>
</li>
<li>
<p>Confirm you want to allow persistent access to Home Assistant.
<img src="/images/integrations/nest/oauth_confirm.png" alt="Screenshot of OAuth confirmation"></p>
</li>
<li>
<p>You will now see a page hosted by <em>My Home Assistant</em> asking if you would like to <em>Link account to Home Assistant?</em> Click <strong>Link Account</strong> to continue.</p>
</li>
<li>
<p>If all went well, you will next configure events and Pub/Sub topic. Nest will attempt
to automatically find a Pub/sub topic either created by the Device Access Console
or manually by you.</p>
<p><img src="/images/integrations/nest/config_flow_with_topic.png" alt="Screenshot of OAuth confirmation"></p>
</li>
<li>
<p>If you instead see the error message <em>No eligible Pub/Sub topics found, please ensure Device Access Console has a Pub/Sub topic.</em> then follow the steps in the previous section to enable events and create a Pub/Sub topic in another browser tab. Once you have created and configured the topic, you may press on this screen <strong>Submit</strong> to refresh the list of topics and continue.</p>
</li>
<li>
<p>Home Assistant uses a <em>Subscription</em> to subscribe to device events published on the topic. You can select the subscription you created in the Device Access Console or the integration will automatically create one for you if you don’t have one already.
<img src="/images/integrations/nest/config_flow_subscription.png" alt="Screenshot of OAuth confirmation"></p>
</li>
<li>
<p>If all went well, you are ready to go!</p>
</li>
</ol>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>![Screenshot of success](/images/integrations/nest/finished.png)
</code></pre></div></div>
</div>
  </details>
</div>
<h2>Climate <a class="title-link" name="climate" href="#climate"></a>
</h2>
<p>All Google Nest Thermostat models are exposed as a <code>climate</code> entity that use the <a href="https://developers.google.com/nest/device-access/traits/device/thermostat-hvac" rel="external nofollow">Thermostat Traits<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> in the SDM API. State changes to the thermostat are reported to Home Assistant through the Cloud Pubsub subscriber.</p>
<p>Given a thermostat named <code>Upstairs</code> then the climate entity is created with a name such as <code>climate.upstairs</code></p>
<div class="alert alert-note">
  <p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
  <div class="alert-content">
<p>This feature is enabled by the following permissions:</p>
<ul>
<li>
<p><em>Allow Home Assistant to access and control your thermostat</em></p>
</li>
</ul>
</div>


</div>
<h2>Sensor <a class="title-link" name="sensor" href="#sensor"></a>
</h2>
<p>All Google Nest Thermostat models have traits exposed from the SDM API. The initial values of the sensors are fetched on startup, then updated regularly using the Cloud Pubsub subscriber. The following traits are supported with sensors:</p>
<ul>
<li><a href="https://developers.google.com/nest/device-access/traits/device/temperature" rel="external nofollow">Temperature<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a></li>
<li><a href="https://developers.google.com/nest/device-access/traits/device/humidity" rel="external nofollow">Humidity<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a></li>
</ul>
<p>Given a thermostat named <code>Upstairs</code> then sensors are created with names such as <code>sensor.upstairs_temperature</code> or <code>sensor.upstairs_humidity</code>.</p>
<div class="alert alert-note">
  <p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
  <div class="alert-content">
<p>This feature is enabled by the following permissions:</p>
<ul>
<li>
<p><em>Allow Home Assistant to access and control your thermostat</em></p>
</li>
</ul>
</div>


</div>
<h2>Camera <a class="title-link" name="camera" href="#camera"></a>
</h2>
<p>Home Assistant supports all SDM API features. However, every Camera or Doorbell device has a different set of built-in capabilities. A Camera device has one of the following live stream types:</p>
<ul>
<li>
<strong>RTSP</strong>: These devices have an HLS stream served by the Home Assistant Core. These cameras support server-side <code>camera</code> actions like stream recording or image preview. See <a href="/integrations/stream#ll-hls">Low Latency HLS</a> as a great option to enable to reduce stream latency.</li>
<li>
<strong>WebRTC</strong>: These devices support direct browser to camera communication and a super low latency stream. A <a href="/dashboards/picture-glance/">Picture Glance Card</a> can show the live stream in the grid with the <em>Camera View</em> set to <code>live</code> (not recommended for battery-powered cameras). <code>camera</code> actions like stream recording are <em>not supported</em>.</li>
</ul>
<p>Given a camera named <code>Front Yard</code>, then the camera is created with a name such as <code>camera.front_yard</code>.</p>
<div class="alert alert-note">
  <p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
  <div class="alert-content">
<p>This feature is enabled by the following permissions:</p>
<ul>
<li>
<p><em>Allow Home Assistant to see and display your camera’s livestream</em></p>
</li>
<li>
<p><em>Other permissions in the Nest or Google Home apps</em>.</p>
</li>
</ul>
</div>


</div>
<p>All cameras also expose event entities for automation. Some camera models also
support capturing media (snapshots or clips) through device triggers. The table below summarizes the <a href="https://developers.google.com/nest/device-access/supported-devices" rel="external nofollow">supported SDM API features<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> for each device.</p>
<table>
<thead>
<tr>
<th>Device</th>
<th align="center">Live stream</th>
<th align="center">Event entities / triggers</th>
<th align="center">Media source<br> for triggers</th>
</tr>
</thead>
<tbody>
<tr>
<td>Nest Cam (indoor, wired)<br>Nest Cam (outdoor, battery)</td>
<td align="center">WebRTC</td>
<td align="center">Motion<br>Person</td>
<td align="center">N/A</td>
</tr>
<tr>
<td>Nest Cam Indoor<br>Nest Cam IQ Indoor<br>Nest Cam IQ Outdoor<br>Nest Cam Outdoor</td>
<td align="center">RTSP<br>Recording</td>
<td align="center">Motion<br>Person<br>Sound</td>
<td align="center">Snapshot (jpg)</td>
</tr>
<tr>
<td>Nest Cam with floodlight</td>
<td align="center">WebRTC</td>
<td align="center">Motion<br>Person</td>
<td align="center">N/A</td>
</tr>
<tr>
<td>Nest Doorbell (battery)</td>
<td align="center">WebRTC</td>
<td align="center">Motion<br>Person<br>Chime</td>
<td align="center">Clip Preview (mp4, gif)</td>
</tr>
<tr>
<td>Nest Doorbell (wired, 1st gen)</td>
<td align="center">RTSP<br>Recording</td>
<td align="center">Motion<br>Person<br>Sound<br>Chime</td>
<td align="center">Snapshot (jpg)</td>
</tr>
<tr>
<td>Nest Doorbell (wired, 2nd gen)</td>
<td align="center">WebRTC</td>
<td align="center">Motion<br>Person<br>Chime</td>
<td align="center">Clip Preview (mp4, gif)</td>
</tr>
<tr>
<td>Nest Hub Max</td>
<td align="center">RTSP<br>Recording</td>
<td align="center">Motion<br>Person<br>Sound<br>
</td>
<td align="center">Snapshot (jpg)</td>
</tr>
</tbody>
</table>
<h2>Event <a class="title-link" name="event" href="#event"></a>
</h2>
<p>All doorbells and cameras support event entities. See the <a href="https://www.home-assistant.io/integrations/event/">Event</a> integration documentation for more about how to use event entities in automations.</p>
<p>There are two classes of event entities that are available based on the above camera features:</p>
<ul>
<li>
<code>motion</code> for cameras that support any of the event types <code>camera_motion</code>, <code>camera_person</code>, or <code>camera_sound</code>
</li>
<li>
<code>doorbell</code> for all cameras that are doorbells and support <code>doorbell_chime</code> events</li>
</ul>
<p>Nest event entities are updated immediately when an event message is received
without waiting for any media to be fetched. See Device Triggers for media support.</p>
<h2>Device Triggers <a class="title-link" name="device-triggers" href="#device-triggers"></a>
</h2>
<p>The Nest integration provides <a href="/docs/automation/trigger/#device-triggers">device triggers</a> to enable automation in Home Assistant. You should review the <a href="/getting-started/automation/">Automating Home Assistant</a> getting started guide on automations or the <a href="/docs/automation/">Automation</a> documentation for full details.</p>
<p>Device triggers will wait to fire after any media associated with the event is downloaded. Use an
event entity for immediate notifications without media.</p>
<p><a href="https://my.home-assistant.io/redirect/automations" class="my badge" target="_blank"><img src="https://my.home-assistant.io/badges/automations.svg"></a></p>
<p><img src="/images/integrations/nest/device_triggers.png" alt="Screenshot Device Triggers"></p>
<div class="details-block">
  <details class="details-block-item">
    <summary class="details-block-title">
      <span>Example Device Trigger / Event payload</span>
      <div class="details-block-arrow">
      <svg class="down" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg>
      <svg class="up" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"></path></svg>
      </div>
    </summary>
    <div class="details-block-content" id="content_8">
<p>This is an example of what the <code>nest_event</code> payload looks like for a Device Trigger that you can use to power automations.</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nl">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nest_event"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"device_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EXAMPLE_DEVICE_ID"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"doorbell_chime"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-01-26T04:56:54.031000+00:00"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"nest_event_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EXAMPLE_EVENT_ID"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"attachment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/nest/event_media/DEVICE_ID/EVENT_ID/thumbnail"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"video"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/nest/event_media/DEVICE_ID/EVENT_ID"</span><span class="p">,</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="nl">"zones"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Zone 1"</span><span class="p">],</span><span class="w">
    </span><span class="p">},</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<ul>
<li>
<code>device_id</code>: The Home Assistant device identifier for the camera</li>
<li>
<code>nest_event_id</code>: is an opaque identifier that identifies the event.</li>
<li>
<code>attachment</code>: May be present if the device supports snapshots or clips and depends on the device’s capabilities. This is a URL where media can be fetched from the media source.</li>
<li>
<code>zones</code>: Zones triggering the event if available. Zones are configured in the Google Home App, though not supported by all cameras. Events in the area outside of a named zone will be an empty zone name.</li>
</ul>
</div>
  </details>
</div>
<p>Continue reading below to <em>Media Source Attachments</em> to see how to use media with notification actions.</p>
<div class="alert alert-note">
  <p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
  <div class="alert-content">
<p>This feature is enabled by the following permissions:</p>
<ul>
<li>
<p><em>Allow Home Assistant to know when there’s a camera event</em></p>
</li>
<li>
<p><em>Allow Home Assistant to know when there’s a doorbell event</em></p>
</li>
<li>
<p><em>Other permissions and notification settings in the Nest or Google Home apps</em>.</p>
</li>
</ul>
</div>


</div>
<h2>Google Home App Notification Settings <a class="title-link" name="google-home-app-notification-settings" href="#google-home-app-notification-settings"></a>
</h2>
<p>The Google Home App Notifications settings control not only which notifications are sent to your phone,
but also what gets published to the Pub/Sub feed.</p>
<p>For example, if you enable <em>Away-only notifications</em>, Home Assistant will only receive events when your phone is away from home.</p>
<p>Another thing that may not be intuitive, is that seeing the event in your device history does not mean it was published to the feed.
However, if you are getting push notifications, the settings are likely working.</p>
<p>Note: The exact settings and effect they have on the feed may vary by camera model or app version.</p>
<p>If you are still not getting notifications, you can read this [troubleshooting guide from Google]<!-- textlint-disable -->
(<a href="https://support.google.com/googlenest/answer/9230439#zippy=%2Cyour-camera-detected-something-but-you-didnt-get-a-camera-alert" rel="external nofollow">https://support.google.com/googlenest/answer/9230439#zippy=%2Cyour-camera-detected-something-but-you-didnt-get-a-camera-alert<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>)</p>
<!-- textlint-enable -->
<div class="details-block">
  <details class="details-block-item">
    <summary class="details-block-title">
      <span>Google Home App Notification Settings</span>
      <div class="details-block-arrow">
      <svg class="down" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg>
      <svg class="up" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"></path></svg>
      </div>
    </summary>
    <div class="details-block-content" id="content_9">
<table>
<thead>
<tr>
<th>Google Home App Setting</th>
<th align="center">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Notifications: Push</td>
<td align="center">Required for any detection event to be published</td>
</tr>
<tr>
<td>Notifications: Away-Only</td>
<td align="center">Events will only be published when a user is detected as away from home</td>
</tr>
<tr>
<td>Seen: Motion</td>
<td align="center">Required for <code>Motion</code> events to be published</td>
</tr>
<tr>
<td>Seen: Person</td>
<td align="center">Required for <code>Person</code> events to be published</td>
</tr>
</tbody>
</table>
<p><img src="/images/integrations/nest/google_home_notification_settings.png" alt="Screenshot of Google Home App Notification Settings"></p>
</div>
  </details>
</div>
<h2>Media source <a class="title-link" name="media-source" href="#media-source"></a>
</h2>
<p>The Nest <a href="/integrations/media_source">media source</a> platform allows you to browse clips for recent camera events. Home Assistant is not intended to be a Network Video Recorder (NVR) platform, however, basic support for capturing recent events is supported.</p>
<p>The table above describes which devices support image snapshots or 10-frame mp4 video clips.</p>
<h3>Media Attachments <a class="title-link" name="media-attachments" href="#media-attachments"></a>
</h3>
<p>The Media Source APIs can be used in <a href="https://companion.home-assistant.io/docs/notifications/notification-attachments">Companion App Attachments</a> for Notifications as actions for Device Triggers above like <em>Doorbell Pressed</em>. You will need to be familiar with both the Media Sources supported for your camera, as well as the media capabilities of the companion apps.</p>
<ul>
<li>
<p><code>/api/nest/event_media/DEVICE_ID/EVENT_ID</code>: Media for the event, which supports image snapshots (jpg) or clip previews (mp4) depending on the camera type.</p>
</li>
<li>
<p><code>/api/nest/event_media/DEVICE_ID/EVENT_ID/thumbnail</code>: A thumbnail preview of the media, which supports image snapshots (jpg) or clip previews (gif) depending on the camera type.</p>
</li>
</ul>
<p>You can use the Nest Device Trigger payload fields <code>attachment.image</code> or <code>attachment.video</code>in an <a href="/getting-started/automation/">automation</a> to send a notification from an <a href="/getting-started/automation-action/">actions</a> as shown in the examples below.</p>
<div class="details-block">
  <details class="details-block-item">
    <summary class="details-block-title">
      <span>Example Action: Clip Preview (mp4) attachment for Android or iOS</span>
      <div class="details-block-arrow">
      <svg class="down" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg>
      <svg class="up" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"></path></svg>
      </div>
    </summary>
    <div class="details-block-content" id="content_10">
<p>Example for cameras that support Clip Previews used with iOS which can render video in notifications.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">action</span><span class="pi">:</span> <span class="s">notify.mobile_app_iphone</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="na">message</span><span class="pi">:</span> <span class="s">Doorbell Pressed</span>
  <span class="na">title</span><span class="pi">:</span> <span class="s">Someone pressed the doorbell</span>
  <span class="na">data</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">trigger.event.data.attachment.image</span><span class="nv"> </span><span class="s">}}"</span>
    <span class="na">video</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">trigger.event.data.attachment.video</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
</div>
  </details>
</div>
<div class="details-block">
  <details class="details-block-item">
    <summary class="details-block-title">
      <span>Example Action: Clip Preview thumbnail (gif) for Android or iOS</span>
      <div class="details-block-arrow">
      <svg class="down" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg>
      <svg class="up" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"></path></svg>
      </div>
    </summary>
    <div class="details-block-content" id="content_11">
<p>Example for cameras that support Clip Previews, but transcoded to an animated gif (Android does not render video notifications).</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">action</span><span class="pi">:</span> <span class="s">notify.mobile_app_android</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="na">message</span><span class="pi">:</span> <span class="s">Doorbell Pressed</span>
  <span class="na">title</span><span class="pi">:</span> <span class="s">Someone pressed the doorbell</span>
  <span class="na">data</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">trigger.event.data.attachment.image</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
</div>
  </details>
</div>
<div class="details-block">
  <details class="details-block-item">
    <summary class="details-block-title">
      <span>Example Action: Snapshot (jpg) attachment for Android or iOS</span>
      <div class="details-block-arrow">
      <svg class="down" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg>
      <svg class="up" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"></path></svg>
      </div>
    </summary>
    <div class="details-block-content" id="content_12">
<p>Example for cameras that support Snapshot (jpg) on either Android or iOS.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">action</span><span class="pi">:</span> <span class="s">notify.mobile_app</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="na">message</span><span class="pi">:</span> <span class="s">Doorbell Pressed</span>
  <span class="na">title</span><span class="pi">:</span> <span class="s">Someone pressed the doorbell</span>
  <span class="na">data</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">trigger.event.data.attachment.image</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
</div>
  </details>
</div>
<div class="alert alert-note">
  <p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
  <div class="alert-content">
<p>This feature is enabled by the following permissions:</p>
<ul>
<li>
<p><em>Based on the events you’ve selected to share from this device, allow Home Assistant to access camera video clips</em></p>
</li>
<li>
<p><em>Based on the events you’ve selected to share from this device, allow Home Assistant to access camera snapshots</em></p>
</li>
<li>
<p><em>Other permissions in the Nest or Google Home apps</em>.</p>
</li>
</ul>
</div>


</div>
<h2>Known limitations <a class="title-link" name="known-limitations" href="#known-limitations"></a>
</h2>
<h3>Google account types <a class="title-link" name="google-account-types" href="#google-account-types"></a>
</h3>
<p>There are limitations to which Google accounts can use the SDM API. See the <a href="https://developers.google.com/nest/device-access/registration" rel="external nofollow">Device Access Registration<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> documentation for details.</p>
<p>The primary limitations are the following:</p>
<ul>
<li>Google Workspace accounts are not supported. Only consumer accounts (for example, gmail.com) can be used.</li>
<li>Once a Google Account is associated with your Device Access Project, it cannot be changed. Be sure you are signed in to the correct Google Account before continuing.</li>
</ul>
<p>Keep in mind, the US$5 registration fee is non-refundable.</p>
<h3>Google Home App migration and cameras <a class="title-link" name="google-home-app-migration-and-cameras" href="#google-home-app-migration-and-cameras"></a>
</h3>
<p>Migrating your cameras to the Google Home App converts cameras from RTSP to WebRTC, which results in the loss of snapshot functionality. Additionally, there is a known issue where media is not currently published for these events; this has been reported to the Nest SDM team and is an unexpected side effect of their migration.</p>
<h3>Temperature sensors partially supported <a class="title-link" name="temperature-sensors-partially-supported" href="#temperature-sensors-partially-supported"></a>
</h3>
<p>Additional Nest temperature sensors are not supported by the SDM API. The temperature reported by the API will be pulled from whichever device is currently configured as the Active Sensor, which can be adjusted via manual selection or the schedule offered in the Nest App. If multiple sensors are available, only the temperature from the active sensor will be displayed.</p>
<h2>Troubleshooting <a class="title-link" name="troubleshooting" href="#troubleshooting"></a>
</h2>
<h3>Can’t link Google account <a class="title-link" name="cant-link-google-account" href="#cant-link-google-account"></a>
</h3>
<h4>Symptom: Can’t link to [Project Name]: Please contact [Project Name] if the issue persists <a class="title-link" name="symptom-cant-link-to-project-name-please-contact-project-name-if-the-issue-persists" href="#symptom-cant-link-to-project-name-please-contact-project-name-if-the-issue-persists"></a>
</h4>
<h5>Description <a class="title-link" name="description" href="#description"></a>
</h5>
<p>The error <em>Can’t link to [Project Name]</em> typically means that the <em>OAuth Client ID</em> used is
mismatched in Home Assistant <a href="/integrations/application_credentials/">Application Credentials</a>.</p>
<h5>Resolution <a class="title-link" name="resolution" href="#resolution"></a>
</h5>
<p>The simplest approach is to remove Application Credentials from Home Assistant and then verify
that the <em>OAuth Client ID</em> used must be consistent across these three places:</p>
<ul>
<li>
<p><a href="https://console.cloud.google.com/apis/credentials" rel="external nofollow">Google Cloud Console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> - See instructions above to create new Web Auth OAuth Credentials if needed.</p>
</li>
<li>
<p><a href="https://console.nest.google.com/device-access/project-list" rel="external nofollow">Device Access Project<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> - The OAuth Client ID for your Device Access Project must refer to the Web Auth OAuth Client ID in the Google Cloud Console.</p>
</li>
<li>
<p>Make sure you are using the same Google Account in the Device Access Console and Google Cloud Console. For example, double-check the photo and account name in the top right of the screen.</p>
</li>
<li>
<p><a href="/integrations/application_credentials/">Application Credentials</a> - Home Assistant needs to be configured with the same credentials. Delete any existing entries if they do not match, then either manually enter or re-enter as part of the setup.</p>
<p><img src="/images/integrations/nest/application_credentials.png" alt="Screenshot of success"></p>
</li>
</ul>
<h4>Symptom: No access to partner information or Information could not be retrieved <a class="title-link" name="symptom-no-access-to-partner-information-or-information-could-not-be-retrieved" href="#symptom-no-access-to-partner-information-or-information-could-not-be-retrieved"></a>
</h4>
<h5>Description <a class="title-link" name="description-1" href="#description-1"></a>
</h5>
<p>The error <em>No access to partner information</em> or <em>Information could not be retrieved</em> shown
during the account linking process means that the Google Account used cannot access the Google Home.</p>
<h5>Resolution <a class="title-link" name="resolution-1" href="#resolution-1"></a>
</h5>
<ul>
<li>You can organize your homes and devices in the Google Home App and <a href="https://support.google.com/googlenest/answer/9155535" rel="external nofollow">share homes and devices<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> across accounts. Ensure the account being used has access to the Home.</li>
<li>If you formerly had a Nest account, ensure that it is migrated successfully to a Google Account. If your Google Home has multiple members, please note that the individual who initially set up the home must complete the migration of their Nest Account to a Google Account before you can establish a connection with Home Assistant.</li>
</ul>
<h4>Symptom: Error 400: redirect_uri_mismatch <a class="title-link" name="symptom-error-400-redirect_uri_mismatch" href="#symptom-error-400-redirect_uri_mismatch"></a>
</h4>
<h5>Description <a class="title-link" name="description-2" href="#description-2"></a>
</h5>
<p>This error <em>Error 400: redirect_uri_mismatch</em> means that your OAuth Client ID is not configured to match the <em>My Home Assistant</em> callback URL. Home Assistant’s redirect URL behavior may have changed since you initially set this up!</p>
<h5>Resolution <a class="title-link" name="resolution-2" href="#resolution-2"></a>
</h5>
<p>For users with a default configuration:</p>
<ul>
<li>
<p>This should show the redirect URI <code>https://my.home-assistant.io/redirect/oauth</code> in the error message. If the error message has a different URL, then you are running an older version of Home Assistant need to upgrade or manually disabled My Home Assistant (see below).</p>
<p><img src="/images/integrations/nest/redirect_uri_mismatch.png" alt="Screenshot of success"></p>
</li>
<li>
<p>Go back to the <a href="https://console.developers.google.com/apis/credentials" rel="external nofollow">API Console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> and select your <em>OAuth 2.0 Client ID</em>.</p>
</li>
<li>
<p>Add the URL <code>https://my.home-assistant.io/redirect/oauth</code> to the list of <em>Authorized redirect URIs</em> and click <strong>Save</strong> and start the flow over.</p>
<p><img src="/images/integrations/nest/redirect_uris_fix.png" alt="Screenshot of success"></p>
</li>
</ul>
<p>For users who have manually disabled <em>My Home Assistant</em>:</p>
<ul>
<li>
<p>Google applies strict <a href="https://developers.google.com/identity/protocols/oauth2/web-server#uri-validation" rel="external nofollow">Redirect URI validation rules<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> to keep your login credentials secure. In practice, this means that you must access Home Assistant <em>over SSL</em> and a <em>public top-level domain</em>. See the documentation on <a href="/docs/configuration/securing/">Securing</a> and note that you don’t actually need to enable remote access.</p>
</li>
<li>
<p>If you don’t have <a href="/integrations/my">My Home Assistant</a> on your installation,
you can use <code>&lt;HOME_ASSISTANT_URL&gt;/auth/external/callback</code> as the redirect URI
instead.</p>
</li>
<li>
<p>The <code>&lt;HOME_ASSISTANT_URL&gt;</code> must be the same as used during the configuration/
authentication process.</p>
</li>
</ul>
<h4>Symptom: Something went wrong: Please contact the developer of this app if the issue persists <a class="title-link" name="symptom-something-went-wrong-please-contact-the-developer-of-this-app-if-the-issue-persists" href="#symptom-something-went-wrong-please-contact-the-developer-of-this-app-if-the-issue-persists"></a>
</h4>
<h5>Description <a class="title-link" name="description-3" href="#description-3"></a>
</h5>
<p>This typically means you are using the wrong type of credential or have credentials
mixed up between accounts.</p>
<h5>Resolution <a class="title-link" name="resolution-3" href="#resolution-3"></a>
</h5>
<p>Make sure the credential in the <a href="https://console.developers.google.com/apis/credentials" rel="external nofollow">Google Cloud Console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> is a <em>Web Application</em> credential following the instructions above. If you have multiple Google accounts logged into the current browser session, Google may default to the first logged in account while switching between pages. To avoid this, log out of other accounts or use a private/incognito browser window with only the desired Google account logged in.</p>
<h4>Symptom: Something went wrong, please try again in a few minutes <a class="title-link" name="symptom-something-went-wrong-please-try-again-in-a-few-minutes" href="#symptom-something-went-wrong-please-try-again-in-a-few-minutes"></a>
</h4>
<h5>Description <a class="title-link" name="description-4" href="#description-4"></a>
</h5>
<p>According to Google’s <a href="https://developers.google.com/nest/device-access/reference/errors/pcm" rel="external nofollow">Partner Connections Manager Error Reference<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>, this error covers all other undocumented internal errors within Partner Connections. One of the issues that cause this error is synchronization problems between the Nest and Google Home apps.</p>
<h5>Resolution <a class="title-link" name="resolution-4" href="#resolution-4"></a>
</h5>
<p>Confirm that your Nest device is visible within the Google Home App and Nest App under the same Home. If it is missing within Google Home, create a new dummy home on the Nest app, which triggers the synchronization process. (This is the workaround recommended by the Google support team). The dummy entry can be deleted once the Nest device is visible within the Google Home app.</p>
<h4>Symptom: Error 403: access_denied or Access blocked: home-assistant.io has not completed Google’s verification process <a class="title-link" name="symptom-error-403-access_denied-or-access-blocked-home-assistantio-has-not-completed-googles-verification-process" href="#symptom-error-403-access_denied-or-access-blocked-home-assistantio-has-not-completed-googles-verification-process"></a>
</h4>
<h5>Description <a class="title-link" name="description-5" href="#description-5"></a>
</h5>
<p>The error <em>Error 403: access_denied</em> means that the OAuth Consent screen may be misconfigured,
either because it does not allow access to your Google Account or because you have entered
extra information that triggered Google’s verification process. Google will require
verification when you add extra information to the branding page.</p>
<h4>Resolution <a class="title-link" name="resolution-5" href="#resolution-5"></a>
</h4>
<p>Visit the OAuth <a href="https://console.cloud.google.com/auth/verification" rel="external nofollow">Verification Center<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> and
confirm the <em>Verification Status</em> is <em>Verification not required</em>. If verification
is required:</p>
<ol>
<li>Navigate to the <a href="https://console.cloud.google.com/auth/branding" rel="external nofollow">Branding<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> page.</li>
<li>Remove additional fields that are not required and Save. See the set up instruction above and
make sure not to enter extra fields.</li>
<li>Go back to the Verification Center and confirm the status is correct.</li>
</ol>
<p>Additionally you need to make sure the Audience configuration is correct by following these steps:</p>
<ol>
<li>Visit the OAuth <a href="https://console.cloud.google.com/auth/audience" rel="external nofollow">Audience<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> page.</li>
<li>Make sure the account is set to <em>In production</em>.</li>
</ol>
<p>You may now repeat the integration setup and account linking steps.</p>
<h4>Symptom: Error: invalid_client no application name <a class="title-link" name="symptom-error-invalid_client-no-application-name" href="#symptom-error-invalid_client-no-application-name"></a>
</h4>
<h5>Description <a class="title-link" name="description-6" href="#description-6"></a>
</h5>
<p>The error <em>Error: invalid_client no application name</em> means the OAuth Consent screen has not been
fully configured for the project and needs additional information.</p>
<h4>Resolution <a class="title-link" name="resolution-6" href="#resolution-6"></a>
</h4>
<p>Visit the <a href="https://console.developers.google.com/apis/credentials/consent" rel="external nofollow">OAuth Consent Screen<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> and
enter the required fields (App Name, Support Email, Developer Email) and leave everything else as default.</p>
<h3>Can’t find devices <a class="title-link" name="cant-find-devices" href="#cant-find-devices"></a>
</h3>
<h4>Symptom: Devices do not appear in Home Assistant <a class="title-link" name="symptom-devices-do-not-appear-in-home-assistant" href="#symptom-devices-do-not-appear-in-home-assistant"></a>
</h4>
<h5>Description <a class="title-link" name="description-7" href="#description-7"></a>
</h5>
<p>This typically means that Home Assistant does not have access to the device because it was not returned
from the SDM API.</p>
<h5>Resolution <a class="title-link" name="resolution-7" href="#resolution-7"></a>
</h5>
<p>You can add or remove devices and permissions granted to Home Assistant in the Nest <a href="https://nestservices.google.com/partnerconnections" rel="external nofollow">Partner Connections Manager<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>. Reload the Nest integration to make new devices available. See the <a href="https://developers.google.com/nest/device-access/authorize#modify_account_permissions" rel="external nofollow">SDM API Troubleshooting<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> documentation for more details.</p>
<h4>Symptom: Thermostats do not appear in Home Assistant or are unavailable <a class="title-link" name="symptom-thermostats-do-not-appear-in-home-assistant-or-are-unavailable" href="#symptom-thermostats-do-not-appear-in-home-assistant-or-are-unavailable"></a>
</h4>
<p>There have been reports that Thermostats may not appear or are unavailable due to a bug in the SDM API. A common fix to get the API to work again is to try these steps:</p>
<ul>
<li>Restart the Thermostat device. See <a href="https://support.google.com/googlenest/answer/9247296" rel="external nofollow">How to restart or reset a Nest thermostat<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> for more details.</li>
<li>In the official Nest app or on <a href="https://home.nest.com" rel="external nofollow">https://home.nest.com<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>: Move the Thermostat to a different or fake/temporary room.</li>
<li>Reload the integration in Home Assistant:  Navigate to <a href="https://my.home-assistant.io/redirect/integrations" class="my" target="_blank"><strong>Settings</strong> &gt; <strong>Devices &amp; services</strong></a>, select <iconify-icon inline icon="mdi:dots-vertical" title="Dots vertical"></iconify-icon> next to <em>Nest</em> and choose <strong>Reload</strong>.</li>
</ul>
<h4>Symptom: Devices do not appear when the API is disabled <a class="title-link" name="symptom-devices-do-not-appear-when-the-api-is-disabled" href="#symptom-devices-do-not-appear-when-the-api-is-disabled"></a>
</h4>
<h5>Description <a class="title-link" name="description-8" href="#description-8"></a>
</h5>
<p>The SDM API may not return devices for the authorized account when the SDM API is disabled.</p>
<h5>Resolution <a class="title-link" name="resolution-8" href="#resolution-8"></a>
</h5>
<p>Double-check that GCP is configured correctly and <a href="https://developers.google.com/nest/device-access/get-started#set_up_google_cloud_platform" rel="external nofollow">Enable the API<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> and authorize at least one device in the OAuth setup flow. If you have trouble here, then you may want to walk through the Google instructions and issue commands directly against the API until you successfully get back the devices.</p>
<h3>Authentication problems <a class="title-link" name="authentication-problems" href="#authentication-problems"></a>
</h3>
<h4>Symptom: Re-authentication required often <a class="title-link" name="symptom-re-authentication-required-often" href="#symptom-re-authentication-required-often"></a>
</h4>
<h5>Description <a class="title-link" name="description-9" href="#description-9"></a>
</h5>
<p>You may be asked to reauthenticate more often than you expect, such as every 7 days. This means an OAuth Consent Screen is misconfigured, or your authentication token was revoked by Google for some other reason.</p>
<h5>Resolution <a class="title-link" name="resolution-9" href="#resolution-9"></a>
</h5>
<ul>
<li>This most likely reason is the <em>OAuth Consent Screen</em> is set to <em>Testing</em> by default which expires the token after 7 days.</li>
<li>Follow the steps above to set it to <em>Production</em> to resolve this and reauthorize your integration one more time to get a new token.</li>
<li>You may also see this as the error message <em>invalid_grant: Token has been expired or revoked</em>.</li>
<li>See <a href="https://developers.google.com/identity/protocols/oauth2#expiration" rel="external nofollow">Google Identity: Refresh token expiration<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> for more reasons on why your token may have expired.</li>
</ul>
<h3>Integration set up failure <a class="title-link" name="integration-set-up-failure" href="#integration-set-up-failure"></a>
</h3>
<h4>Symptom: Configuration error: Failed to create subscriber subscription/name was not found <a class="title-link" name="symptom-configuration-error-failed-to-create-subscriber-subscriptionname-was-not-found" href="#symptom-configuration-error-failed-to-create-subscriber-subscriptionname-was-not-found"></a>
</h4>
<h5>Description <a class="title-link" name="description-10" href="#description-10"></a>
</h5>
<p>The integration fails to start because it attempts to create a subscriber with a subscription
name that is not found in your Google Account. By default, Google pub/sub subscriptions will be deleted after 31 days of inactivity (<a href="https://cloud.google.com/knowledge/kb/pub-sub-subscriptions-disappeared-without-any-deletion-logs-000004170" rel="external nofollow">reference<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>). If this happens, then the integration will fail, and you will see the preceding log line in your Home Assistant logs.</p>
<h5>Resolution. <a class="title-link" name="resolution-10" href="#resolution-10"></a>
</h5>
<p>To repair the subscriber:</p>
<ol>
<li>Go to the <a href="https://console.nest.google.com/device-access/project-list" rel="external nofollow">Device Access Console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> and re-enable the Pub/Sub topic.</li>
<li>The Nest integration may need to be recreated to pick up the new Pub/Sub topic.</li>
<li>(Optional) To prevent future expirations, go to your <a href="https://console.cloud.google.com/cloudpubsub/subscription/list" rel="external nofollow">Google Cloud Console Pub/Sub subscription page<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> and edit the Pub/Sub subscription created by Nest to not expire by default.</li>
</ol>
<h3>Nest integration data issues <a class="title-link" name="nest-integration-data-issues" href="#nest-integration-data-issues"></a>
</h3>
<h4>Symptom: Not receiving camera motion and person events <a class="title-link" name="symptom-not-receiving-camera-motion-and-person-events" href="#symptom-not-receiving-camera-motion-and-person-events"></a>
</h4>
<p>The Nest integration subscribes a Google Pub/sub subscription to listen for camera motion
or person events. The settings in the Google Home app also control which events
are published, so if they are not set properly you may not receive events.</p>
<h4>Resolution <a class="title-link" name="resolution-11" href="#resolution-11"></a>
</h4>
<ul>
<li>Verify that you have allowed Home Assistant to access camera streams, and permissions are correctly set in <a href="https://nestservices.google.com/partnerconnections" rel="external nofollow">Partner Connections Manager<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</li>
<li>If you are then still not seeing events, it’s possible you need to adjust the Google Home App settings. Refer to the <a href="#google-home-app-notification-settings">Google Home App Notification Settings</a> for details.</li>
</ul>
<h4>Symptom: Devices not receiving updated information <a class="title-link" name="symptom-devices-not-receiving-updated-information" href="#symptom-devices-not-receiving-updated-information"></a>
</h4>
<h5>Description <a class="title-link" name="description-11" href="#description-11"></a>
</h5>
<p>You may see changes in Google Home that are unexpectedly not reflected in Home Assistant. The Nest integration subscribes to updates from a Google Pub/sub subscription and problems with stale information
usually indicate a problem with subscriber configuration.</p>
<p>Changes for things like sensors or thermostat temperature set points should be instantly published to a topic and received by the Home Assistant subscriber when everything is configured correctly.</p>
<h5>Resolution <a class="title-link" name="resolution-12" href="#resolution-12"></a>
</h5>
<p>To learn more about how Google Pub/Sub works see the <a href="https://cloud.google.com/pubsub/docs/pull#pull-workflow" rel="external nofollow">Pull subscription workflow documentation<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>. To investigate subscription related issues follow these steps:</p>
<ul>
<li>Check the logs for any relevant error messages.</li>
<li>View stats about your subscriber in the <a href="https://console.cloud.google.com/cloudpubsub/subscription/list" rel="external nofollow">Cloud Console<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>. The stats include the number of messages published by your devices, and how many have been acknowledged by your Home Assistant subscriber. You can also <code>View Messages</code> to see examples of published. Many old unacknowledged messages indicate the subscriber is not receiving the messages and working properly or not connected at all.</li>
<li>Note that it is normal to see info messages such as <em>API error in streaming pull: 503 The service was unable to fulfill your request. Please try again</em> as part of the streaming pull flow. The pull requests are long
running requests that will send an error after a few minutes and then are retried as needed. These are described in more detail in the <a href="https://cloud.google.com/pubsub/docs/pull#pull-workflow" rel="external nofollow">Pull subscription workflow documentation<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</li>
<li>Enable verbose logging by adding some or all of these to your <span class="terminology"><code>configuration.yaml</code><span class="terminology-tooltip">The configuration.yaml file is the main configuration file for Home Assistant. It lists the integrations to be loaded and their specific configurations. In some cases, the configuration needs to be edited manually directly in the configuration.yaml file. Most integrations can be configured in the UI.<a class="terminology-link" href="/docs/configuration/"> [Learn more]</a></span></span> depending on where you are having trouble:</li>
</ul>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml">
<span class="na">logger</span><span class="pi">:</span>
  <span class="na">default</span><span class="pi">:</span> <span class="s">info</span>
  <span class="na">logs</span><span class="pi">:</span>
    <span class="na">homeassistant.components.nest</span><span class="pi">:</span> <span class="s">debug</span>
    <span class="na">homeassistant.components.nest.climate_sdm</span><span class="pi">:</span> <span class="s">debug</span>
    <span class="na">homeassistant.components.nest.camera_sdm</span><span class="pi">:</span> <span class="s">debug</span>
    <span class="na">homeassistant.components.nest.sensor_sdm</span><span class="pi">:</span> <span class="s">debug</span>
    <span class="na">homeassistant.helpers.config_entry_flow</span><span class="pi">:</span> <span class="s">debug</span>
    <span class="na">homeassistant.helpers.config_entry_oauth2_flow</span><span class="pi">:</span> <span class="s">debug</span>
    <span class="na">google_nest_sdm</span><span class="pi">:</span> <span class="s">debug</span>
    <span class="na">google_nest_sdm.device</span><span class="pi">:</span> <span class="s">debug</span>
    <span class="na">google_nest_sdm.device_manager</span><span class="pi">:</span> <span class="s">debug</span>
    <span class="na">google_nest_sdm.google_nest_subscriber</span><span class="pi">:</span> <span class="s">debug</span>
    <span class="na">google_nest_sdm.event</span><span class="pi">:</span> <span class="s">debug</span>
</code></pre></div></div>
<h2>Removing the integration <a class="title-link" name="removing-the-integration" href="#removing-the-integration"></a>
</h2>
<p>This integration follows standard integration removal. No extra steps are required.</p>
<h3>To remove an integration instance from Home Assistant <a class="title-link" name="to-remove-an-integration-instance-from-home-assistant" href="#to-remove-an-integration-instance-from-home-assistant"></a>
</h3>
<ol>
<li>Go to <a href="https://my.home-assistant.io/redirect/integrations" class="my" target="_blank"><strong>Settings</strong> &gt; <strong>Devices &amp; services</strong></a> and select the integration card.</li>
<li>From the list of devices, select the integration instance you want to remove.</li>
<li>Next to the entry, select the three dots <iconify-icon inline icon="mdi:dots-vertical" title="Dots vertical"></iconify-icon> menu. Then, select <strong>Delete</strong>.</li>
</ol>
<p>After deleting the integration, you may also want to remove any unused information in
your Google Account that was added during the set up process.  See the integration
configuration instructions for how to find where OAuth credentials and Device Access projects
are configured.</p>


  


  
<div class="material-card text feedback">
  <h4>
<iconify-icon inline icon="mdi:feedback" title="Feedback"></iconify-icon> <b> Help us improve our documentation</b><a href="#feedback_section" class="title-link" name="feedback_section"></a>
</h4>
  Suggest an edit to this page, or provide/view feedback for this page.
  <div class="links">
    <ul aria-label="Page feedback options">
    <li><a href="https://github.com/home-assistant/home-assistant.io/tree/current/source/_integrations/nest.markdown" target="_blank" title="Edit this page"><iconify-icon inline icon="mdi:edit"></iconify-icon> Edit</a></li>
    
    <li><a href="https://github.com/home-assistant/home-assistant.io/issues/new?template=feedback.yml&amp;url=https%3A%2F%2Fivangrod.github.io%2Fintegrations%2Fnest%2F&amp;version=2025.9.4&amp;labels=current,integration%3A%20nest" target="_blank" title="Provide feedback on this page"><iconify-icon inline icon="mdi:comment-edit-outline"></iconify-icon> Provide feedback</a></li>
    <li><a href="https://github.com/home-assistant/home-assistant.io/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3A%22integration%3A+nest%22" target="_blank" title="View pending feedback for this page"><iconify-icon inline icon="mdi:comment-text-multiple-outline"></iconify-icon> View pending feedback</a></li>
    
  </ul>
  </div>
</div>


</article>

            
          </div>


          
            
              <aside id="integration-sidebar" class="grid__item one-third desk-wide-one-quarter lap-one-whole palm-one-whole">
              
            <div class="grid">
  




  


<section class="aside-module grid__item one-whole lap-one-half">
  <div class='brand-logo-container section'>
      <img src='https://brands.home-assistant.io/_/nest//logo.png' srcset='https://brands.home-assistant.io/_/nest/logo@2x.png 2x' /><a href='https://my.home-assistant.io/redirect/config_flow_start?domain=nest' class='my badge' target='_blank'><img src='https://my.home-assistant.io/badges/config_flow_start.svg' /></a></div>

  <div class='section'>The Google Nest  integration  was introduced in Home Assistant 0.7, and it's used by <a title="Open analytics.home-assistant.io" href="https://analytics.home-assistant.io/integrations" target="_blank" rel="noopener">
        
          4.3%</a> of the active installations.
        
      
    
  </div>
    <div class='section'>
      <iconify-icon icon='mdi:cloud-download'></iconify-icon>&nbsp;Its IoT class is <a href='/blog/2016/02/12/classifying-the-internet-of-things/#classifiers'>Cloud Push.</a>
    </div>
  <div class='section'>
    <a href="https://github.com/home-assistant/core/tree/dev/homeassistant/components/nest" target="_blank"><iconify-icon inline icon='simple-icons:github' title='Github'></iconify-icon> View source on GitHub</a><br />
    <a href="https://github.com/home-assistant/core/issues?q=is%3Aissue+is%3Aopen+label%3A%22integration%3A+nest%22" target="_blank"><iconify-icon inline icon='mdi:bug' title='Bug'></iconify-icon> View known issues</a>
  </div></section>

<section class="aside-module grid__item one-whole lap-one-half">
  <div class='section'>
    <h1 class="title epsilon"><iconify-icon inline icon='mdi:person-heart' title='Person heart'></iconify-icon> Integration owners</h1>
    
        
        

          
          <div class="section">
            We are incredibly grateful to the following contributors who currently maintain this integration:<br />
          </div>
          <div class="section"><a href="https://github.com/allenporter" target="_blank"><img class="codeowner-avatar" src="https://avatars.githubusercontent.com/allenporter?size=96" alt="@allenporter"/> @allenporter</a><br /></div>
        
    
  </div>
</section>






  <section id="toc-module" class="aside-module grid__item one-whole lap-one-half">
        <div class='section'>
          <h1 class="title epsilon"><iconify-icon inline icon='mdi:toc' title='Toc'></iconify-icon> On this page</h1>
          <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#configuration">Configuration</a></li>
<li class="toc-entry toc-h2"><a href="#climate">Climate</a></li>
<li class="toc-entry toc-h2"><a href="#sensor">Sensor</a></li>
<li class="toc-entry toc-h2"><a href="#camera">Camera</a></li>
<li class="toc-entry toc-h2"><a href="#event">Event</a></li>
<li class="toc-entry toc-h2"><a href="#device-triggers">Device Triggers</a></li>
<li class="toc-entry toc-h2"><a href="#google-home-app-notification-settings">Google Home App Notification Settings</a></li>
<li class="toc-entry toc-h2"><a href="#media-source">Media source</a>
<ul>
<li class="toc-entry toc-h3"><a href="#media-attachments">Media Attachments</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#known-limitations">Known limitations</a>
<ul>
<li class="toc-entry toc-h3"><a href="#google-account-types">Google account types</a></li>
<li class="toc-entry toc-h3"><a href="#google-home-app-migration-and-cameras">Google Home App migration and cameras</a></li>
<li class="toc-entry toc-h3"><a href="#temperature-sensors-partially-supported">Temperature sensors partially supported</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#troubleshooting">Troubleshooting</a>
<ul>
<li class="toc-entry toc-h3"><a href="#cant-link-google-account">Can’t link Google account</a></li>
<li class="toc-entry toc-h3"><a href="#cant-find-devices">Can’t find devices</a></li>
<li class="toc-entry toc-h3"><a href="#authentication-problems">Authentication problems</a></li>
<li class="toc-entry toc-h3"><a href="#integration-set-up-failure">Integration set up failure</a></li>
<li class="toc-entry toc-h3"><a href="#nest-integration-data-issues">Nest integration data issues</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#removing-the-integration">Removing the integration</a>
<ul>
<li class="toc-entry toc-h3"><a href="#to-remove-an-integration-instance-from-home-assistant">To remove an integration instance from Home Assistant</a></li>
</ul>
</li>
</ul>
        </div>
      </section><section id="category-module" class="aside-module grid__item one-whole lap-one-half">
      <div class='section'>
        <h1 class="title epsilon"><iconify-icon inline icon='mdi:category' title='Category'></iconify-icon> Categories</h1>
        <ul class='divided'><li>
            <a href='/integrations/#camera'>Camera</a>
          </li><li>
            <a href='/integrations/#climate'>Climate</a>
          </li><li>
            <a href='/integrations/#doorbell'>Doorbell</a>
          </li><li>
            <a href='/integrations/#event'>Event</a>
          </li><li>
            <a href='/integrations/#hub'>Hub</a>
          </li><li>
            <a href='/integrations/#media-source'>Media source</a>
          </li><li>
            <a href='/integrations/#sensor'>Sensor</a>
          </li></ul>
      </div>
    </section></div>

          </aside>
          
        </div>
      </div>

      <footer>
        <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="skyline grid">
        <div class="skyline grid__item one-whole">
          <div class="footer-skyline">
          </div>
        </div>
      </div>
      <div class="footer-nav grid">
        <div class="company grid__item one-quarter lap-one-half palm-one-whole">
          <div class="title">
            <img
              src="/needlehack-blog/images/footer-logo-text.svg"
              height="72"
              alt="Home Assistant"
            />
          </div>
          <p>
            Home Assistant is a project from the <a href="https://www.openhomefoundation.org/">Open Home Foundation</a>, sponsored by <a href="https://www.nabucasa.com/">Nabu Casa</a>.
          </p>
        </div>

        <div class="grid__item one-quarter lap-one-half palm-one-whole">
          <h3>Join us and contribute!</h3>
          <ul>
            <li><a class="external-link" href="https://github.com/home-assistant/">GitHub repo <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://developers.home-assistant.io">Developers Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://design.home-assistant.io">Design Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://data.home-assistant.io">Data Science Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://community.home-assistant.io">Community Forum <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://creators.home-assistant.io/">Creator Network <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://works-with.home-assistant.io/">Works With Home Assistant <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a href="/needlehack-blog/community">Our community</li>
            <li><a href="/needlehack-blog/help/reporting_issues/">Reporting issues</a></li>
          </ul>
          <h3>System status</h3>
          <ul>
            <li>
              <a class="external-link"  href="https://alerts.home-assistant.io">Integration Alerts <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a>
            </li>
            <li><a href="/needlehack-blog/security/">Security Alerts</a></li>
            <li>
              <a class="external-link" href="https://status.home-assistant.io">System Status <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a>
            </li>
          </ul>
        </div>

        <div class="grid__item one-quarter lap-one-half palm-one-whole">
          <h3>Companion apps</h3>
          <ul>
            <li><a class="external-link" href="https://apps.apple.com/us/app/home-assistant/id1099568401">iOS and Apple devices</a></li>
            <li><a class="external-link" href="https://play.google.com/store/apps/details?id=io.homeassistant.companion.android">Android and Wear OS</a></li>
            <li><a class="external-link" href="https://companion.home-assistant.io/">...and more!</a></li>
          </ul>
          <h3>Governance</h3>
          <ul>
            <li><a href="/needlehack-blog/privacy/">Privacy Notices</a></li>
            <li><a href="/needlehack-blog/developers/cla/">Contributor License Agreement</a></li>
            <li><a href="/needlehack-blog/tos/">Terms of Service</a></li>
            <li><a href="/needlehack-blog/code_of_conduct/">Code of Conduct</a></li>
            <li><a href="/needlehack-blog/developers/credits/">Credits</a></li>
            <li><a href="/needlehack-blog/developers/license/">License</a></li>
          </ul>
        </div>

        <div class="socials grid__item one-quarter lap-one-half palm-one-whole">

          <h3>Follow us</h3>
          <p><a class="external-link" href='https://newsletter.openhomefoundation.org/#/portal'>Sign up for our newsletter <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></p>
          <div class="icons">
            <a
              rel="me"
              href="https://youtube.com/@home_assistant"
              title="YouTube"
              target="_blank"
              ><iconify-icon icon="simple-icons:youtube"></iconify-icon></a>
            <a
              rel="me"
              href="https://reddit.com/r/homeassistant"
              title="Reddit"
              target="_blank"
              ><iconify-icon icon="simple-icons:reddit"></iconify-icon></a>
            <a
              rel="me"
              href="https://github.com/home-assistant/home-assistant"
              title="GitHub"
              target="_blank"
              ><iconify-icon icon="simple-icons:github"></iconify-icon></a>
            <br />
            <a
              rel="me"
              href="https://fosstodon.org/@homeassistant"
              title="Mastodon"
              target="_blank"
              ><iconify-icon icon="simple-icons:mastodon"></iconify-icon></a>
            <a
              rel="me"
              href="https://bsky.app/profile/home-assistant.io"
              title="Bluesky"
              target="_blank"
             ><iconify-icon icon="simple-icons:bluesky"></iconify-icon></a>
            <a
              rel="me"
              href="https://x.com/home_assistant"
              title="X"
              target="_blank"
             ><iconify-icon icon="simple-icons:x"></iconify-icon></a>
            <br />
            <a
              rel="me"
              href="https://www.facebook.com/homeassistantio"
              title="Facebook"
              target="_blank"
              ><iconify-icon icon="simple-icons:facebook"></iconify-icon></a>
            <a
              rel="me"
              href="https://www.instagram.com/homeassistant/"
              title="Instagram"
              target="_blank"
              ><iconify-icon icon="simple-icons:instagram"></iconify-icon></a>
            <a
              rel="me"
              href="https://www.linkedin.com/company/home-assistant"
              title="LinkedIn"
              target="_blank"
              ><iconify-icon icon="simple-icons:linkedin"></iconify-icon></a>
          </div>

          <div class="web-notice">
            <p>
              For partnership inquiries please check out <a href="https://works-with.home-assistant.io/">Works With Home Assistant</a>. For media, get in touch <a href="mailto:media@openhomefoundation.org">here</a>. For other questions, you can contact us <a href="mailto:hello@home-assistant.io">here</a> (No technical support!)
            </p>
            <p>
              Website powered by <a href="https://jekyllrb.com/">Jekyll</a><br />
              Originally based on the <a href="https://github.com/coogie/oscailte">Oscailte theme</a>
            </p>
            <a href="https://www.netlify.com">
              <img
                src="/needlehack-blog/images/frontpage/netlify.svg"
                alt="Deploys by Netlify Badge"
              />
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

      </footer>

    </div>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@justinribeiro/lite-youtube@1.3.1/lite-youtube.js"></script>

<script src="/needlehack-blog/javascripts/terminology_tooltip.js' | cache_buster" type="text/javascript" defer></script>

<script src="/needlehack-blog/javascripts/prism.js' | cache_buster" type="text/javascript" defer></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@3/dist/umd/index.min.js"></script>
<script type="text/javascript">
  docsearch({
    container: '#docsearch',
    appId: 'FBHBYS3J0U',
    indexName: 'home-assistant',
    apiKey: "ba6f7e6d97b3d3d2f778978c742a47c6",
  });
  document.querySelector('.site-title').addEventListener('contextmenu', function (ev) {
    ev.preventDefault();
    document.location.assign("https://design.home-assistant.io/#brand/logo")
  });
</script>




<script type="text/javascript">
  {
    const article = document.querySelector("article.post");
    if (article) {
      const iframes = article.querySelectorAll("iframe[data-src]");
      let loaded = false;
      if (iframes) {
        document.addEventListener('mousemove', loadLazyFrames, { passive: true, once: true });
        document.addEventListener('touchmove', loadLazyFrames, { passive: true, once: true });
        document.addEventListener('scroll', loadLazyFrames, { passive: true, once: true });
  
        function loadLazyFrames() {
          if (loaded) return;
          loaded = true;
  
          iframes.forEach((iframe) => {
            const src = iframe.getAttribute("data-src");
            if (src) {
              iframe.setAttribute("src", src);
              iframe.removeAttribute("data-src");
            }
          });
        }
      }
    }
  }
</script>

  </body>
</html>
