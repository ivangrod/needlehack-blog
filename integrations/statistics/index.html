



<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Statistics - Home Assistant</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Instructions on how to integrate statistical sensors into Home Assistant.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://www.home-assistant.io/integrations/statistics/">

    <meta property="fb:app_id" content="338291289691179">
    <meta property="og:title" content="Statistics">
    <meta property="og:site_name" content="Home Assistant">
    <meta property="og:url" content="https://www.home-assistant.io/integrations/statistics/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Instructions on how to integrate statistical sensors into Home Assistant.">
    <meta property="og:image" content="https://ivangrod.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@home_assistant">
    
    <meta name="twitter:title" content="Statistics">
    <meta name="twitter:description" content="Instructions on how to integrate statistical sensors into Home Assistant.">
    <meta name="twitter:image" content="https://ivangrod.github.io/images/default-social.png">
    <link rel="me" href="https://fosstodon.org/@homeassistant">

    <link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3/dist/style.min.css" rel="stylesheet" />
    <link href="/needlehack-blog/stylesheets/prism.css | cache_buster" rel="stylesheet">
    <link href="/needlehack-blog/stylesheets/screen.css' | cache_buster" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Home Assistant" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&amp;family=Instrument+Sans:ital,wdth,wght@0,99,400..700;1,99,400..700&amp;" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/2.1.0/iconify-icon.min.js"></script>
  </head>

  <body  class=" integration-page  ">
    <header class='site-header '>
      



<div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/needlehack-blog/" class="site-title">
        <div class="logo"></div>
      </a>
      <a class="release-date" href="/blog/2025/09/03/release-20259/" title="Latest version 2025.9.4 released September 19, 2025">
        2025.9.4
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle" />
        <label
          for="toggle"
          class="toggle"
          data-open="Main Menu"
          data-close="⨉"
        ></label>
        <ul class="menu pull-right">
          <li><a  href="/needlehack-blog/installation/">Getting started</a></li>
          <li>
            <a  href="/needlehack-blog/docs/">Documentation <iconify-icon inline icon='mdi:chevron-down' title='Chevron down'></iconify-icon></a>
            <ul>
              <li><a href="/needlehack-blog/installation/"><iconify-icon inline icon='simple-icons:homeassistant' title='Homeassistant'></iconify-icon> Installation</a></li>
              <li><a href="/needlehack-blog/docs/automation/"><iconify-icon inline icon='mdi:robot-happy' title='Robot happy'></iconify-icon> Automations</a></li>
              <li><a href="/needlehack-blog/dashboards/"><iconify-icon inline icon='mdi:gauge' title='Gauge'></iconify-icon> Dashboards</a></li>
              <li><a href="/needlehack-blog/voice_control/"><iconify-icon inline icon='mdi:comment-processing-outline' title='Comment processing outline'></iconify-icon> Voice assistants</a></li>
              <li><a href="/needlehack-blog/docs/organizing/"><iconify-icon inline icon='mdi:view-grid' title='View grid'></iconify-icon> Device organization</a></li>
              <li><a href="/needlehack-blog/docs/energy/"><iconify-icon inline icon='mdi:solar-power-variant' title='Solar power variant'></iconify-icon> Energy management</a></li>
              <li><a href="/needlehack-blog/docs/configuration/"><iconify-icon inline icon='mdi:cog' title='Cog'></iconify-icon> Advanced configuration</a></li>
            </ul>
          </li>
          <li><a class="active" href="/needlehack-blog/integrations/">Integrations</a></li>
          <li><a  href="/needlehack-blog/blog/">Blog</a></li>
          <li><a  href="/needlehack-blog/help/">Need help?</a></li>
          <li>
            <div class="docsearch" id="docsearch"></div>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>

    </header>

    <div class="page-content">

      

      <div class="grid-wrapper">
        <div class="grid grid-center">

          <aside id="toc-bar" class="grid__item desk-wide-one-sixth">
                <section class="aside-module grid__item one-whole">
                  <div class='section'>
                    <h1 class="title epsilon"><iconify-icon inline icon='mdi:toc' title='Toc'></iconify-icon> On this page</h1>
                    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#configuration">Configuration</a></li>
<li class="toc-entry toc-h2"><a href="#characteristics">Characteristics</a>
<ul>
<li class="toc-entry toc-h3"><a href="#numeric-source-sensor">Numeric Source Sensor</a></li>
<li class="toc-entry toc-h3"><a href="#binary-source-sensor">Binary Source Sensor</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#attributes">Attributes</a></li>
<li class="toc-entry toc-h2"><a href="#yaml-configuration">YAML configuration</a>
<ul>
<li class="toc-entry toc-h3"><a href="#an-important-note-on-max_age-and-sampling_size">An important note on max_age and sampling_size</a></li>
</ul>
</li>
</ul>
                  </div>
                </section>
              </aside> 

          
          <div class="grid__item two-thirds desk-wide-seven-twelfths lap-one-whole palm-one-whole">
          

            
              <article class="page">
  
  <header>
    
    
      <div class="breadcrumbs">
        <a href="/needlehack-blog/">Home</a>
        
          
            
            ▸ <a href="/integrations/">Integrations</a>
          
        
          
            ▸ 
          
        
      </div>
    
    <h1 class="title indent">
      
        Statistics
      
    </h1>
  </header>
  
    
    
    
  
  
  <p>The <code>statistics</code> integration observes the state of a source sensor and provides aggregated statistical characteristics about its recent past. This integration can be useful in automation, for example, to trigger an action when the air humidity in the bathroom settles after a hot shower or when the number of brewed coffees over a day gets too high.</p>
<p>The statistics sensor can use either the numeric sensor or binary_sensor as its input. The configuration must include the time period and/or a number of recent state changes that should be considered. Check the configuration section below for details.</p>
<p>Assuming the <a href="/integrations/recorder/"><code>recorder</code></a> integration is running, historical sensor data is read from the database on startup and is available immediately after a restart of the platform. If the <a href="/integrations/recorder/"><code>recorder</code></a> integration is <em>not</em> running, it can take some time for the sensor to start reporting data because some characteristics calculations require more than one source sensor value.</p>
<div class="alert alert-tip">
  <p class="alert-title"><iconify-icon inline icon="mdi:lightbulb-outline"></iconify-icon> Tip</p>
  <div class="alert-content">
<p>The statistics integration is different from <span class="terminology">Long-term statistics<span class="terminology-tooltip">Home Assistant saves long-term statistics for a sensor if the entity has a state_class of measurement, total, or total_increasing. For short-term statistics, a snapshot is taken every 5 minutes. For long-term statistics, an hourly aggregate is stored of the short-term statistics. Short-term statistics are automatically purged after a predefined period (default is 10 days). Long-term statistics are never purged.<a class="terminology-link" href="/blog/2021/08/04/release-20218/#long-term-statistics"> [Learn more]</a></span></span>.</p>
  </div>
</div>
<p>The statistics sensor has an internal buffer that stores the values it needs for the computation of the various functions (for example, average step). The sensor is updated whenever new values are added to the buffer or when elements are removed. This is triggered either by a change of the source sensor (which may or may not change its actual value) or by values expiring (in cases where max age was specified). This means that the buffer can hold a sequence of identical values in cases where values are not changing over time.</p>
<p>When using a time-based buffer (by providing a max-age), it is recommended that the buffer contains at least a decent number of values spanning the full range of time. For sensors that don’t change much, this can be achieved by using a template sensor with a time-based trigger as input. If the input values don’t cover most of the time range, the computed output values could lead to unexpected results.
Example: To find out whether a switch was used in the last 5 minutes, “Count on” could be used. However, if there are no frequent readings a single “Off” (maybe only a second ago) in the buffer would produce 0 even though the sensor was “On” for most of the last five minutes.</p>
<h2>Configuration <a class="title-link" name="configuration" href="#configuration"></a>
</h2>
<p>To add the <strong>Statistics</strong> helper to your Home Assistant instance, use this My button:</p>
<p><a href="https://my.home-assistant.io/redirect/config_flow_start?domain=statistics" class="my badge" target="_blank"><img src="https://my.home-assistant.io/badges/config_flow_start.svg"></a></p>
<div class="details-block">
  <details class="details-block-item">
    <summary class="details-block-title">
      <span><iconify-icon inline icon="mdi:cursor-hand"></iconify-icon> Manual configuration steps</span>
      <div class="details-block-arrow">
      <svg class="down" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg>
      <svg class="up" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"></path></svg>
      </div>
    </summary>
    <div class="details-block-content" id="content_0">
<p>If the above My button doesn’t work, you can also perform the following steps
manually:</p>
<ul>
<li>
<p>Browse to your Home Assistant instance.</p>
</li>
<li>
<p>Go to <strong><a href="https://my.home-assistant.io/redirect/integrations" class="my" target="_blank"><iconify-icon inline icon="mdi:devices"></iconify-icon> Settings &gt; Devices &amp; Services</a></strong>.</p>
</li>
<li>
<p>At the top of the screen, select the tab: <strong><a href="https://my.home-assistant.io/redirect/helpers" class="my" target="_blank">Helpers</a></strong>.</p>
</li>
<li>
<p>In the bottom right corner, select the
<strong><a href="https://my.home-assistant.io/redirect/config_flow_start?domain=statistics" class="my" target="_blank"><iconify-icon inline icon="mdi:plus"></iconify-icon> Create helper</a></strong> button.</p>
</li>
<li>
<p>From the list, select <strong>Statistics</strong>.</p>
</li>
<li>
<p>Follow the instructions on screen to complete the setup.</p>
</li>
</ul>
</div>
  </details>
</div>
<p>Further information about these configuration options can be found under the <a href="#yaml-configuration">YAML configuration</a></p>
<div class="config-vars basic">
  <div class="">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name">Name</span><a name="name" class="title-link" href="#name"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The name the sensor should have.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name">Entity</span><a name="entity" class="title-link" href="#entity"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The entity that provides the input. Numeric <code>sensor</code> and <code>binary_sensor</code> are supported.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name">State_characteristic</span><a name="state_characteristic" class="title-link" href="#state_characteristic"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of statistical characteristics to choose from.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name">Sampling size</span><a name="sampling-size" class="title-link" href="#sampling-size"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Maximum number of source sensor measurements stored.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name">Max age</span><a name="max-age" class="title-link" href="#max-age"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Maximum age of source sensor measurements stored.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name">Keep last sample</span><a name="keep-last-sample" class="title-link" href="#keep-last-sample"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines whether the most recent sampled value should be preserved regardless of the “Max age” setting.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name">Percentile</span><a name="percentile" class="title-link" href="#percentile"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Only relevant in combination with the percentile characteristic. Must be a value between 1 and 99.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name">Precision</span><a name="precision" class="title-link" href="#precision"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines the number of decimal places of the calculated sensor value.</p>
</span></div>
</div>
</div>
</div>
<h2>Characteristics <a class="title-link" name="characteristics" href="#characteristics"></a>
</h2>
<p>The following options for the configuration parameter <code>state_characteristic</code> are available as staticical characteristics. Pay close attention to the correct configuration of <code>sampling_size</code> and/or <code>max_age</code>, as most characteristics are directly influenced by these settings.</p>
<h3>Numeric Source Sensor <a class="title-link" name="numeric-source-sensor" href="#numeric-source-sensor"></a>
</h3>
<p>The following are supported for <code>sensor</code> source sensors <code>state_characteristic</code>:</p>
<table>
<thead>
<tr>
<th>State Characteristic</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>average_linear</code></td>
<td>The average value of stored measurements under consideration of the time distances between them. A linear interpolation is applied per measurement pair. Suited to observe a source sensor with frequent, non-periodic sensor updates and when continuous behavior is represented by the measurements (e.g. your electricity consumption). WARNING: This doesn’t compute the exact average over the full interval defined by <code>max_age</code>. It will only consider the interval between the first and the last value in the buffer.</td>
</tr>
<tr>
<td><code>average_step</code></td>
<td>The average value of stored measurements under consideration of the time distances between them. LOCF (last observation carried forward weighting) is applied, meaning, that the old value is assumed between two measurements. This is a better fit to how Home Assistant deals with constant values (compared to the linear function) and it is also better fitting to sensors that are switching between stable phases (e.g. a heating level set to either 1, 2 or 3). WARNING: This doesn’t compute the exact average over the full interval defined by <code>max_age</code>. It will only consider the interval between the first and the last value in the buffer.</td>
</tr>
<tr>
<td><code>average_timeless</code></td>
<td>The average value of stored measurements. This method assumes that all measurements are equally spaced and, therefore, time is ignored and a simple average of values is computed. Equal to <code>mean</code>.</td>
</tr>
<tr>
<td><code>change_sample</code></td>
<td>The average change per sample. The difference between the newest and the oldest measurement is divided by the number of in-between measurements (n-1).</td>
</tr>
<tr>
<td><code>change_second</code></td>
<td>The average change per second. The difference between the newest and the oldest measurement is divided by seconds between them.</td>
</tr>
<tr>
<td><code>change</code></td>
<td>The difference between the newest and the oldest measurement.</td>
</tr>
<tr>
<td><code>count</code></td>
<td>The number of stored source sensor readings. This number is limited by <code>sampling_size</code> and can be low within the bounds of <code>max_age</code>.</td>
</tr>
<tr>
<td><code>datetime_newest</code></td>
<td>The timestamp of the newest measurement.</td>
</tr>
<tr>
<td><code>datetime_oldest</code></td>
<td>The timestamp of the oldest measurement.</td>
</tr>
<tr>
<td><code>datetime_value_max</code></td>
<td>The timestamp of the numerically biggest measurement.</td>
</tr>
<tr>
<td><code>datetime_value_min</code></td>
<td>The timestamp of the numerically smallest measurement.</td>
</tr>
<tr>
<td><code>distance_95_percent_of_values</code></td>
<td>A statistical indicator derived from the standard deviation of an assumed normal distribution. 95% of all stored values fall into a range of returned size.</td>
</tr>
<tr>
<td><code>distance_99_percent_of_values</code></td>
<td>A statistical indicator derived from the standard deviation of an assumed normal distribution. 99% of all stored values fall into a range of returned size.</td>
</tr>
<tr>
<td><code>distance_absolute</code></td>
<td>The difference or “spread” between the extreme values of measurements. Equals <code>value_max</code> minus <code>value_min</code>.</td>
</tr>
<tr>
<td><code>mean</code></td>
<td>The average value computed for all measurements. Be aware that this does not consider uneven time intervals between measurements.</td>
</tr>
<tr>
<td><code>mean_circular</code></td>
<td>The <a href="https://en.wikipedia.org/wiki/Circular_mean" rel="external nofollow">circular mean<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> for angular measurements (<em>e.g.</em> wind direction). Assumes that measurements are expressed in degrees (<em>e.g.</em>, 180° or -90°), and outputs the mean in positive degrees (0-360°).</td>
</tr>
<tr>
<td><code>median</code></td>
<td>The <a href="https://en.wikipedia.org/wiki/Mode_(statistics)#Comparison_of_mean,_median_and_mode" rel="external nofollow">median<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> value computed for all measurements.</td>
</tr>
<tr>
<td><code>noisiness</code></td>
<td>A simplified version of a signal-to-noise ratio. A high value indicates a quickly changing source sensor value, a small value will be seen for a steady source sensor. The absolute change between subsequent source sensor measurement values is summed up and divided by the number of intervals.</td>
</tr>
<tr>
<td><code>percentile</code></td>
<td>
<a href="https://en.wikipedia.org/wiki/Percentile" rel="external nofollow">Percentiles<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> divide the range of a distribution of all considered source sensor measurements into 100 continuous intervals of equal probability. The characteristic calculates the value for which a given percentage of source sensor measurements are smaller in value. The 20th percentile is the value below which 20 percent of the measurements may be found. The additional configuration parameters <code>percentile</code> is needed, see below.</td>
</tr>
<tr>
<td><code>standard_deviation</code></td>
<td>The <a href="https://en.wikipedia.org/wiki/Standard_deviation" rel="external nofollow">standard deviation<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> of an assumed normal distribution from all measurements.</td>
</tr>
<tr>
<td><code>sum</code></td>
<td>The mathematical sum of all source sensor measurement values within the given time and sampling size limits.</td>
</tr>
<tr>
<td><code>sum_differences</code></td>
<td>The mathematical sum of differences between subsequent source sensor measurement values within the given time and sampling size limits.</td>
</tr>
<tr>
<td><code>sum_differences_nonnegative</code></td>
<td>The mathematical sum of non-negative differences between subsequent source sensor measurement values within the given time and sampling size limits. The characteristic assumes that the source sensor value can only increase, but might occasionally be reset to zero. If a value is smaller than the previous value, the function assumes the previous value should have been a zero.</td>
</tr>
<tr>
<td><code>total</code></td>
<td>The mathematical sum of all source sensor measurement values within the given time and sampling size limits. Equal to <code>sum</code>.</td>
</tr>
<tr>
<td><code>value_max</code></td>
<td>The largest value among the number of measurements.</td>
</tr>
<tr>
<td><code>value_min</code></td>
<td>The smallest value among the number of measurements.</td>
</tr>
<tr>
<td><code>variance</code></td>
<td>The <a href="https://en.wikipedia.org/wiki/Variance" rel="external nofollow">variance<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> of an assumed normal distribution from all measurements.</td>
</tr>
</tbody>
</table>
<h3>Binary Source Sensor <a class="title-link" name="binary-source-sensor" href="#binary-source-sensor"></a>
</h3>
<p>The following are supported for <code>binary_sensor</code> source sensors <code>state_characteristic</code>:</p>
<table>
<thead>
<tr>
<th>State Characteristic</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>average_step</code></td>
<td>A percentage of time across all stored measurements, in which the binary source sensor was “On”. If over the course of one hour, movement was detected for 6 minutes, the <code>average_step</code> is 10%.</td>
</tr>
<tr>
<td><code>average_timeless</code></td>
<td>The percentage of stored measurements, for which the binary source sensor was “On”. Time in on/off states is ignored. If over the course of one hour, a single movement was detected, the <code>average_timeless</code> is 33.3% (assuming the stored measurements “Off”, “On”, “Off”). Equal to <code>mean</code>.</td>
</tr>
<tr>
<td><code>count</code></td>
<td>The number of stored source sensor readings.</td>
</tr>
<tr>
<td><code>count_on</code></td>
<td>The number of stored source sensor readings with the value “On”. Be aware that only value changes are registered by default, except if the source sensor has the property <code>force_update</code> set to true.</td>
</tr>
<tr>
<td><code>count_off</code></td>
<td>The number of stored source sensor readings with the value “Off”. Be aware that only value changes are registered by default, except if the source sensor has the property <code>force_update</code> set to true.</td>
</tr>
<tr>
<td><code>datetime_newest</code></td>
<td>The timestamp of the newest measurement.</td>
</tr>
<tr>
<td><code>datetime_oldest</code></td>
<td>The timestamp of the oldest measurement.</td>
</tr>
<tr>
<td><code>mean</code></td>
<td>The percentage of stored measurements, for which the binary source sensor was “On”. Time in on/off states is ignored. If over the course of one hour, a single movement was detected, the <code>average_timeless</code> is 33.3% (assuming the stored measurements “Off”, “On”, “Off”).</td>
</tr>
</tbody>
</table>
<h2>Attributes <a class="title-link" name="attributes" href="#attributes"></a>
</h2>
<p>A statistics sensor presents the following attributes for context about its internal status.</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>age_coverage_ratio</code></td>
<td>Only when <code>max_age</code> is defined. Ratio (0.0-1.0) of the configured age of source sensor measurements considered (time period <code>max_age</code>) covered in-between the oldest and newest stored values. A low number can indicate an unwanted mismatch between the configured limits and the source sensor behavior. The value 1.0 represents at least two values covering the full time period. Value 0 is the result of only one measurement considered. The sensor turns <code>Unknown</code> if no measurements are stored.</td>
</tr>
<tr>
<td><code>buffer_usage_ratio</code></td>
<td>Only when <code>sampling_size</code> is defined. Ratio (0.0-1.0) of the configured buffer size used by the stored source sensor measurements. A low number can indicate an unwanted mismatch between the configured limits and the source sensor behavior. The value 1.0 represents a full buffer, value 0 stands for an empty one.</td>
</tr>
<tr>
<td><code>source_value_valid</code></td>
<td>True/false indication whether the source sensor supplies valid values to the statistics sensor (judged by the last value received).</td>
</tr>
</tbody>
</table>
<h2>YAML configuration <a class="title-link" name="yaml-configuration" href="#yaml-configuration"></a>
</h2>
<p>Define a statistics sensor by adding lines similar to the following examples to your <code>configuration.yaml</code>:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">sensor</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">statistics</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Bathroom</span><span class="nv"> </span><span class="s">humidity</span><span class="nv"> </span><span class="s">mean</span><span class="nv"> </span><span class="s">over</span><span class="nv"> </span><span class="s">last</span><span class="nv"> </span><span class="s">24</span><span class="nv"> </span><span class="s">hours"</span>
    <span class="na">entity_id</span><span class="pi">:</span> <span class="s">sensor.bathroom_humidity</span>
    <span class="na">state_characteristic</span><span class="pi">:</span> <span class="s">mean</span>
    <span class="na">max_age</span><span class="pi">:</span>
      <span class="na">hours</span><span class="pi">:</span> <span class="m">24</span>

  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">statistics</span>
    <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.movement</span>
    <span class="na">state_characteristic</span><span class="pi">:</span> <span class="s">count_on</span>
    <span class="na">sampling_size</span><span class="pi">:</span> <span class="m">100</span>

  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">statistics</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Bathroom</span><span class="nv"> </span><span class="s">humidity</span><span class="nv"> </span><span class="s">change</span><span class="nv"> </span><span class="s">over</span><span class="nv"> </span><span class="s">5</span><span class="nv"> </span><span class="s">minutes"</span>
    <span class="na">entity_id</span><span class="pi">:</span> <span class="s">sensor.bathroom_humidity</span>
    <span class="na">state_characteristic</span><span class="pi">:</span> <span class="s">change</span>
    <span class="na">max_age</span><span class="pi">:</span>
      <span class="na">minutes</span><span class="pi">:</span> <span class="m">5</span>
    <span class="na">sampling_size</span><span class="pi">:</span> <span class="m">50</span>
    <span class="na">precision</span><span class="pi">:</span> <span class="m">1</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="statistics-configuration-variables" href="#statistics-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class="">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> entity_id </span><span class="config-vars-type">string</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="entity_id" class="title-link" href="#entity_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The source sensor to observe and compute statistical characteristics for. Only <a href="/integrations/sensor/">sensors</a> and <a href="/integrations/binary_sensor/">binary sensors</a> are supported.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> name </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: Stats</span>)</span><a name="name" class="title-link" href="#name"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Name of the new statistics sensor.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> state_characteristic </span><span class="config-vars-type">string</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="state_characteristic" class="title-link" href="#state_characteristic"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The characteristic that should be used as the state of the statistics sensor (see tables above).</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> sampling_size </span><span class="config-vars-type">integer</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="sampling_size" class="title-link" href="#sampling_size"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Maximum number of source sensor measurements stored. Be sure to choose a reasonably high number or omit if the samples should be driven by <code>max_age</code> instead. A statistics sensor requires <code>sampling_size</code>, <code>max_age</code>, or both to be defined.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> max_age </span><span class="config-vars-type">time</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="max_age" class="title-link" href="#max_age"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Maximum age of source sensor measurements stored. Setting this to a time period will cause older values to be discarded. If omitted, the number of considered source sensor measurements is limited by <code>sampling_size</code> only. Set both parameters appropriately to create suited limits for your use case. The sensor value will become <code>unknown</code> if the source sensor is not updated within the time period. A statistics sensor requires <code>sampling_size</code>, <code>max_age</code>, or both to be defined.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> keep_last_sample </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="keep_last_sample" class="title-link" href="#keep_last_sample"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines whether the most recent sampled value should be preserved regardless of the <code>max_age</code> setting.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> percentile </span><span class="config-vars-type">integer</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: 50</span>)</span><a name="percentile" class="title-link" href="#percentile"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Only relevant in combination with the <code>percentile</code> characteristic. Must be a value between 1 and 99. The value defines the percentile value to consider. The 25th percentile is also known as the first quartile, the 50th percentile as the median.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> precision </span><span class="config-vars-type">integer</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: 2</span>)</span><a name="precision" class="title-link" href="#precision"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines the number of decimal places of the calculated sensor value.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unique_id </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="unique_id" class="title-link" href="#unique_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>An ID that uniquely identifies the statistics sensor. Set this to a unique value to allow customization through the UI. Change the unique ID after switching the <code>state_characteristic</code> of a previously configured sensor, to start with a fresh recorder history.</p>
</span></div>
</div>
</div>
</div>
<h3>An important note on max_age and sampling_size <a class="title-link" name="an-important-note-on-max_age-and-sampling_size" href="#an-important-note-on-max_age-and-sampling_size"></a>
</h3>
<p>If both <code>max_age</code> and <code>sampling_size</code> are given, the considered samples are those within the <code>max_age</code> time window but limited to the number of <code>sampling_size</code> newest samples.  Specify a wide-enough <code>sampling_size</code> if using an extended <code>max_age</code> (e.g., when looking for <code>max_age</code> 1 hour, a sensor that produces one measurement per minute should have at least a <code>sampling_size</code> of 60 to use all samples within the <code>max_age</code> timeframe.)</p>
<p>If only <code>sampling_size</code> is given there is no time limit. If only <code>max_age</code> is given the considered number of samples is unlimited.</p>


  


  
<div class="material-card text feedback">
  <h4>
<iconify-icon inline icon="mdi:feedback" title="Feedback"></iconify-icon> <b> Help us improve our documentation</b><a href="#feedback_section" class="title-link" name="feedback_section"></a>
</h4>
  Suggest an edit to this page, or provide/view feedback for this page.
  <div class="links">
    <ul aria-label="Page feedback options">
    <li><a href="https://github.com/home-assistant/home-assistant.io/tree/current/source/_integrations/statistics.markdown" target="_blank" title="Edit this page"><iconify-icon inline icon="mdi:edit"></iconify-icon> Edit</a></li>
    
    <li><a href="https://github.com/home-assistant/home-assistant.io/issues/new?template=feedback.yml&amp;url=https%3A%2F%2Fivangrod.github.io%2Fintegrations%2Fstatistics%2F&amp;version=2025.9.4&amp;labels=current,integration%3A%20statistics" target="_blank" title="Provide feedback on this page"><iconify-icon inline icon="mdi:comment-edit-outline"></iconify-icon> Provide feedback</a></li>
    <li><a href="https://github.com/home-assistant/home-assistant.io/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3A%22integration%3A+statistics%22" target="_blank" title="View pending feedback for this page"><iconify-icon inline icon="mdi:comment-text-multiple-outline"></iconify-icon> View pending feedback</a></li>
    
  </ul>
  </div>
</div>


</article>

            
          </div>


          
            
              <aside id="integration-sidebar" class="grid__item one-third desk-wide-one-quarter lap-one-whole palm-one-whole">
              
            <div class="grid">
  




  


<section class="aside-module grid__item one-whole lap-one-half">
  <div class='brand-logo-container section'>
      <img src='https://brands.home-assistant.io/_/statistics//logo.png' srcset='https://brands.home-assistant.io/_/statistics/logo@2x.png 2x' /><a href='https://my.home-assistant.io/redirect/config_flow_start?domain=statistics' class='my badge' target='_blank'><img src='https://my.home-assistant.io/badges/config_flow_start.svg' /></a></div>

  <div class='section'>The Statistics  helper  was introduced in Home Assistant 0.30, and it's used by <a title="Open analytics.home-assistant.io" href="https://analytics.home-assistant.io/integrations" target="_blank" rel="noopener">
        
          3.9%</a> of the active installations.
        
      
    
  </div>
    <div class='section'>
      <iconify-icon icon='mdi:download-network-outline'></iconify-icon>&nbsp;Its IoT class is <a href='/blog/2016/02/12/classifying-the-internet-of-things/#classifiers'>Local Polling.</a>
    </div>
  <div class='section'>
    <a href='/docs/quality_scale/#-internal'>🏠 Internal integration</a><br /></div>
  <div class='section'>
    <a href="https://github.com/home-assistant/core/tree/dev/homeassistant/components/statistics" target="_blank"><iconify-icon inline icon='simple-icons:github' title='Github'></iconify-icon> View source on GitHub</a><br />
    <a href="https://github.com/home-assistant/core/issues?q=is%3Aissue+is%3Aopen+label%3A%22integration%3A+statistics%22" target="_blank"><iconify-icon inline icon='mdi:bug' title='Bug'></iconify-icon> View known issues</a>
  </div></section>

<section class="aside-module grid__item one-whole lap-one-half">
  <div class='section'>
    <h1 class="title epsilon"><iconify-icon inline icon='mdi:person-heart' title='Person heart'></iconify-icon> Integration owners</h1>
    
        
        

          
          <div class="section">
            We are incredibly grateful to the following contributors who currently maintain this integration:<br />
          </div>
          <div class="section"><a href="https://github.com/ThomDietrich" target="_blank"><img class="codeowner-avatar" src="https://avatars.githubusercontent.com/ThomDietrich?size=96" alt="@ThomDietrich"/> @ThomDietrich</a><br /><a href="https://github.com/gjohansson-ST" target="_blank"><img class="codeowner-avatar" src="https://avatars.githubusercontent.com/gjohansson-ST?size=96" alt="@gjohansson-ST"/> @gjohansson-ST</a><br /></div>
        
    
  </div>
</section>






  <section id="toc-module" class="aside-module grid__item one-whole lap-one-half">
        <div class='section'>
          <h1 class="title epsilon"><iconify-icon inline icon='mdi:toc' title='Toc'></iconify-icon> On this page</h1>
          <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#configuration">Configuration</a></li>
<li class="toc-entry toc-h2"><a href="#characteristics">Characteristics</a>
<ul>
<li class="toc-entry toc-h3"><a href="#numeric-source-sensor">Numeric Source Sensor</a></li>
<li class="toc-entry toc-h3"><a href="#binary-source-sensor">Binary Source Sensor</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#attributes">Attributes</a></li>
<li class="toc-entry toc-h2"><a href="#yaml-configuration">YAML configuration</a>
<ul>
<li class="toc-entry toc-h3"><a href="#an-important-note-on-max_age-and-sampling_size">An important note on max_age and sampling_size</a></li>
</ul>
</li>
</ul>
        </div>
      </section><section id="category-module" class="aside-module grid__item one-whole lap-one-half">
      <div class='section'>
        <h1 class="title epsilon"><iconify-icon inline icon='mdi:category' title='Category'></iconify-icon> Categories</h1>
        <ul class='divided'><li>
            <a href='/integrations/#helper'>Helper</a>
          </li><li>
            <a href='/integrations/#sensor'>Sensor</a>
          </li><li>
            <a href='/integrations/#utility'>Utility</a>
          </li></ul>
      </div>
    </section></div>

          </aside>
          
        </div>
      </div>

      <footer>
        <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="skyline grid">
        <div class="skyline grid__item one-whole">
          <div class="footer-skyline">
          </div>
        </div>
      </div>
      <div class="footer-nav grid">
        <div class="company grid__item one-quarter lap-one-half palm-one-whole">
          <div class="title">
            <img
              src="/needlehack-blog/images/footer-logo-text.svg"
              height="72"
              alt="Home Assistant"
            />
          </div>
          <p>
            Home Assistant is a project from the <a href="https://www.openhomefoundation.org/">Open Home Foundation</a>, sponsored by <a href="https://www.nabucasa.com/">Nabu Casa</a>.
          </p>
        </div>

        <div class="grid__item one-quarter lap-one-half palm-one-whole">
          <h3>Join us and contribute!</h3>
          <ul>
            <li><a class="external-link" href="https://github.com/home-assistant/">GitHub repo <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://developers.home-assistant.io">Developers Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://design.home-assistant.io">Design Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://data.home-assistant.io">Data Science Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://community.home-assistant.io">Community Forum <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://creators.home-assistant.io/">Creator Network <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://works-with.home-assistant.io/">Works With Home Assistant <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a href="/needlehack-blog/community">Our community</li>
            <li><a href="/needlehack-blog/help/reporting_issues/">Reporting issues</a></li>
          </ul>
          <h3>System status</h3>
          <ul>
            <li>
              <a class="external-link"  href="https://alerts.home-assistant.io">Integration Alerts <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a>
            </li>
            <li><a href="/needlehack-blog/security/">Security Alerts</a></li>
            <li>
              <a class="external-link" href="https://status.home-assistant.io">System Status <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a>
            </li>
          </ul>
        </div>

        <div class="grid__item one-quarter lap-one-half palm-one-whole">
          <h3>Companion apps</h3>
          <ul>
            <li><a class="external-link" href="https://apps.apple.com/us/app/home-assistant/id1099568401">iOS and Apple devices</a></li>
            <li><a class="external-link" href="https://play.google.com/store/apps/details?id=io.homeassistant.companion.android">Android and Wear OS</a></li>
            <li><a class="external-link" href="https://companion.home-assistant.io/">...and more!</a></li>
          </ul>
          <h3>Governance</h3>
          <ul>
            <li><a href="/needlehack-blog/privacy/">Privacy Notices</a></li>
            <li><a href="/needlehack-blog/developers/cla/">Contributor License Agreement</a></li>
            <li><a href="/needlehack-blog/tos/">Terms of Service</a></li>
            <li><a href="/needlehack-blog/code_of_conduct/">Code of Conduct</a></li>
            <li><a href="/needlehack-blog/developers/credits/">Credits</a></li>
            <li><a href="/needlehack-blog/developers/license/">License</a></li>
          </ul>
        </div>

        <div class="socials grid__item one-quarter lap-one-half palm-one-whole">

          <h3>Follow us</h3>
          <p><a class="external-link" href='https://newsletter.openhomefoundation.org/#/portal'>Sign up for our newsletter <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></p>
          <div class="icons">
            <a
              rel="me"
              href="https://youtube.com/@home_assistant"
              title="YouTube"
              target="_blank"
              ><iconify-icon icon="simple-icons:youtube"></iconify-icon></a>
            <a
              rel="me"
              href="https://reddit.com/r/homeassistant"
              title="Reddit"
              target="_blank"
              ><iconify-icon icon="simple-icons:reddit"></iconify-icon></a>
            <a
              rel="me"
              href="https://github.com/home-assistant/home-assistant"
              title="GitHub"
              target="_blank"
              ><iconify-icon icon="simple-icons:github"></iconify-icon></a>
            <br />
            <a
              rel="me"
              href="https://fosstodon.org/@homeassistant"
              title="Mastodon"
              target="_blank"
              ><iconify-icon icon="simple-icons:mastodon"></iconify-icon></a>
            <a
              rel="me"
              href="https://bsky.app/profile/home-assistant.io"
              title="Bluesky"
              target="_blank"
             ><iconify-icon icon="simple-icons:bluesky"></iconify-icon></a>
            <a
              rel="me"
              href="https://x.com/home_assistant"
              title="X"
              target="_blank"
             ><iconify-icon icon="simple-icons:x"></iconify-icon></a>
            <br />
            <a
              rel="me"
              href="https://www.facebook.com/homeassistantio"
              title="Facebook"
              target="_blank"
              ><iconify-icon icon="simple-icons:facebook"></iconify-icon></a>
            <a
              rel="me"
              href="https://www.instagram.com/homeassistant/"
              title="Instagram"
              target="_blank"
              ><iconify-icon icon="simple-icons:instagram"></iconify-icon></a>
            <a
              rel="me"
              href="https://www.linkedin.com/company/home-assistant"
              title="LinkedIn"
              target="_blank"
              ><iconify-icon icon="simple-icons:linkedin"></iconify-icon></a>
          </div>

          <div class="web-notice">
            <p>
              For partnership inquiries please check out <a href="https://works-with.home-assistant.io/">Works With Home Assistant</a>. For media, get in touch <a href="mailto:media@openhomefoundation.org">here</a>. For other questions, you can contact us <a href="mailto:hello@home-assistant.io">here</a> (No technical support!)
            </p>
            <p>
              Website powered by <a href="https://jekyllrb.com/">Jekyll</a><br />
              Originally based on the <a href="https://github.com/coogie/oscailte">Oscailte theme</a>
            </p>
            <a href="https://www.netlify.com">
              <img
                src="/needlehack-blog/images/frontpage/netlify.svg"
                alt="Deploys by Netlify Badge"
              />
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

      </footer>

    </div>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@justinribeiro/lite-youtube@1.3.1/lite-youtube.js"></script>

<script src="/needlehack-blog/javascripts/terminology_tooltip.js' | cache_buster" type="text/javascript" defer></script>

<script src="/needlehack-blog/javascripts/prism.js' | cache_buster" type="text/javascript" defer></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@3/dist/umd/index.min.js"></script>
<script type="text/javascript">
  docsearch({
    container: '#docsearch',
    appId: 'FBHBYS3J0U',
    indexName: 'home-assistant',
    apiKey: "ba6f7e6d97b3d3d2f778978c742a47c6",
  });
  document.querySelector('.site-title').addEventListener('contextmenu', function (ev) {
    ev.preventDefault();
    document.location.assign("https://design.home-assistant.io/#brand/logo")
  });
</script>




<script type="text/javascript">
  {
    const article = document.querySelector("article.post");
    if (article) {
      const iframes = article.querySelectorAll("iframe[data-src]");
      let loaded = false;
      if (iframes) {
        document.addEventListener('mousemove', loadLazyFrames, { passive: true, once: true });
        document.addEventListener('touchmove', loadLazyFrames, { passive: true, once: true });
        document.addEventListener('scroll', loadLazyFrames, { passive: true, once: true });
  
        function loadLazyFrames() {
          if (loaded) return;
          loaded = true;
  
          iframes.forEach((iframe) => {
            const src = iframe.getAttribute("data-src");
            if (src) {
              iframe.setAttribute("src", src);
              iframe.removeAttribute("data-src");
            }
          });
        }
      }
    }
  }
</script>

  </body>
</html>
