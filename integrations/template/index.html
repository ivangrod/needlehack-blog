



<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Template - Home Assistant</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Instructions on how to integrate Template Sensors into Home Assistant.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://www.home-assistant.io/integrations/template/">

    <meta property="fb:app_id" content="338291289691179">
    <meta property="og:title" content="Template">
    <meta property="og:site_name" content="Home Assistant">
    <meta property="og:url" content="https://www.home-assistant.io/integrations/template/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Instructions on how to integrate Template Sensors into Home Assistant.">
    <meta property="og:image" content="https://ivangrod.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@home_assistant">
    
    <meta name="twitter:title" content="Template">
    <meta name="twitter:description" content="Instructions on how to integrate Template Sensors into Home Assistant.">
    <meta name="twitter:image" content="https://ivangrod.github.io/images/default-social.png">
    <link rel="me" href="https://fosstodon.org/@homeassistant">

    <link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3/dist/style.min.css" rel="stylesheet" />
    <link href="/needlehack-blog/stylesheets/prism.css | cache_buster" rel="stylesheet">
    <link href="/needlehack-blog/stylesheets/screen.css' | cache_buster" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Home Assistant" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&amp;family=Instrument+Sans:ital,wdth,wght@0,99,400..700;1,99,400..700&amp;" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/2.1.0/iconify-icon.min.js"></script>
  </head>

  <body  class=" integration-page  ">
    <header class='site-header '>
      



<div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/needlehack-blog/" class="site-title">
        <div class="logo"></div>
      </a>
      <a class="release-date" href="/blog/2025/09/03/release-20259/" title="Latest version 2025.9.4 released September 19, 2025">
        2025.9.4
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle" />
        <label
          for="toggle"
          class="toggle"
          data-open="Main Menu"
          data-close="⨉"
        ></label>
        <ul class="menu pull-right">
          <li><a  href="/needlehack-blog/installation/">Getting started</a></li>
          <li>
            <a  href="/needlehack-blog/docs/">Documentation <iconify-icon inline icon='mdi:chevron-down' title='Chevron down'></iconify-icon></a>
            <ul>
              <li><a href="/needlehack-blog/installation/"><iconify-icon inline icon='simple-icons:homeassistant' title='Homeassistant'></iconify-icon> Installation</a></li>
              <li><a href="/needlehack-blog/docs/automation/"><iconify-icon inline icon='mdi:robot-happy' title='Robot happy'></iconify-icon> Automations</a></li>
              <li><a href="/needlehack-blog/dashboards/"><iconify-icon inline icon='mdi:gauge' title='Gauge'></iconify-icon> Dashboards</a></li>
              <li><a href="/needlehack-blog/voice_control/"><iconify-icon inline icon='mdi:comment-processing-outline' title='Comment processing outline'></iconify-icon> Voice assistants</a></li>
              <li><a href="/needlehack-blog/docs/organizing/"><iconify-icon inline icon='mdi:view-grid' title='View grid'></iconify-icon> Device organization</a></li>
              <li><a href="/needlehack-blog/docs/energy/"><iconify-icon inline icon='mdi:solar-power-variant' title='Solar power variant'></iconify-icon> Energy management</a></li>
              <li><a href="/needlehack-blog/docs/configuration/"><iconify-icon inline icon='mdi:cog' title='Cog'></iconify-icon> Advanced configuration</a></li>
            </ul>
          </li>
          <li><a class="active" href="/needlehack-blog/integrations/">Integrations</a></li>
          <li><a  href="/needlehack-blog/blog/">Blog</a></li>
          <li><a  href="/needlehack-blog/help/">Need help?</a></li>
          <li>
            <div class="docsearch" id="docsearch"></div>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>

    </header>

    <div class="page-content">

      

      <div class="grid-wrapper">
        <div class="grid grid-center">

          <aside id="toc-bar" class="grid__item desk-wide-one-sixth">
                <section class="aside-module grid__item one-whole">
                  <div class='section'>
                    <h1 class="title epsilon"><iconify-icon inline icon='mdi:toc' title='Toc'></iconify-icon> On this page</h1>
                    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#configuration">Configuration</a></li>
<li class="toc-entry toc-h2"><a href="#yaml-configuration">YAML configuration</a>
<ul>
<li class="toc-entry toc-h3"><a href="#state-based-template-entities">State-based template entities</a></li>
<li class="toc-entry toc-h3"><a href="#trigger-based-template-entities">Trigger-based template entities</a></li>
<li class="toc-entry toc-h3"><a href="#configuration-reference">Configuration reference</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#common-device-configuration-options">Common Device Configuration Options</a></li>
<li class="toc-entry toc-h2"><a href="#alarm-control-panel">Alarm Control Panel</a></li>
<li class="toc-entry toc-h2"><a href="#binary-sensor">Binary Sensor</a>
<ul>
<li class="toc-entry toc-h3"><a href="#state-based-binary-sensor---washing-machine-running">State based binary sensor - Washing Machine Running</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-binary-sensor---is-anyone-home">State based binary sensor - Is Anyone Home</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-binary-sensor---device-tracker-sensor-with-latitude-and-longitude-attributes">State based binary sensor - device tracker sensor with latitude and longitude attributes</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-binary-sensor---change-the-icon-when-a-state-changes">State based binary sensor - Change the icon when a state changes</a></li>
<li class="toc-entry toc-h3"><a href="#trigger-based-binary-sensor---change-state-and-icon-when-a-custom-event-is-received">Trigger based binary sensor - Change state and icon when a custom event is received</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#button">Button</a></li>
<li class="toc-entry toc-h2"><a href="#cover">Cover</a>
<ul>
<li class="toc-entry toc-h3"><a href="#cover-optimistic-mode">Cover Optimistic Mode</a></li>
<li class="toc-entry toc-h3"><a href="#combining-state-and-position-templates">Combining state and position templates</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-cover---garage-door">State based cover - Garage Door</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-cover---optimistic-garage-door-with-momentary-switch">State based cover - Optimistic Garage Door with Momentary Switch</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#event">Event</a></li>
<li class="toc-entry toc-h2"><a href="#fan">Fan</a>
<ul>
<li class="toc-entry toc-h3"><a href="#converting-from-speeds-to-percentage">Converting from speeds to percentage</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-fan---helper-fan">State based fan - Helper fan</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-fan---fan-with-preset-modes">State based fan - Fan with preset modes</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#image">Image</a></li>
<li class="toc-entry toc-h2"><a href="#light">Light</a>
<ul>
<li class="toc-entry toc-h3"><a href="#light-considerations">Light Considerations</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-light---theater-volume-control">State based light - Theater Volume Control</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-light---make-a-global-light-entity-for-a-multi-segment-wled-light">State based light - Make a global light entity for a multi-segment WLED light</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#lock">Lock</a>
<ul>
<li class="toc-entry toc-h3"><a href="#state-based-lock---lock-from-a-switch">State based lock - Lock from a switch</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-lock---optimistic-mode">State based lock - Optimistic mode</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-lock---sensor-and-two-switches">State based lock - Sensor and Two Switches</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-lock---secret-code">State based lock - Secret code</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#number">Number</a>
<ul>
<li class="toc-entry toc-h3"><a href="#state-based-number---changing-the-unit-of-measurement-of-another-number">State based number - Changing the unit of measurement of another number</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#select">Select</a>
<ul>
<li class="toc-entry toc-h3"><a href="#state-based-select---control-daynight-mode-of-a-camera">State based select - Control Day/Night mode of a camera</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#sensor">Sensor</a>
<ul>
<li class="toc-entry toc-h3"><a href="#state-based-sensor---exposing-sun-angle">State based sensor - Exposing sun angle</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-sensor---modifying-another-sensors-output">State based sensor - Modifying another sensor’s output</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-sensor---changing-the-unit-of-measurement-of-another-sensor">State based sensor - Changing the unit of measurement of another sensor</a></li>
<li class="toc-entry toc-h3"><a href="#trigger-based-sensor---using-conditions-to-control-updates">Trigger based sensor - Using conditions to control updates</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#switch">Switch</a>
<ul>
<li class="toc-entry toc-h3"><a href="#state-based-switch---invert-a-switch">State based switch - Invert a Switch</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-switch---toggle-switch">State based switch - Toggle Switch</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-switch---sensor-and-two-switches">State based switch - Sensor and Two Switches</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-switch---optimistic-switch">State based switch - Optimistic Switch</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#update">Update</a></li>
<li class="toc-entry toc-h2"><a href="#vacuum">Vacuum</a>
<ul>
<li class="toc-entry toc-h3"><a href="#state-based-vacuum---control-vacuum-with-harmony-hub">State based vacuum - Control vacuum with Harmony Hub</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-vacuum---custom-attributes">State based vacuum - Custom attributes</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#weather">Weather</a>
<ul>
<li class="toc-entry toc-h3"><a href="#trigger-based-weather---weather-forecast-from-response-data">Trigger based weather - Weather Forecast from response data</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#combining-multiple-template-entities">Combining multiple template entities</a>
<ul>
<li class="toc-entry toc-h3"><a href="#trigger-based-sensor-and-binary-sensor-storing-webhook-information">Trigger based sensor and binary sensor storing webhook information</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#template-and-action-variables">Template and action variables</a>
<ul>
<li class="toc-entry toc-h3"><a href="#self-referencing">Self referencing</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#optimistic-mode">Optimistic mode</a></li>
<li class="toc-entry toc-h2"><a href="#rate-limiting-updates">Rate limiting updates</a></li>
<li class="toc-entry toc-h2"><a href="#considerations">Considerations</a>
<ul>
<li class="toc-entry toc-h3"><a href="#startup">Startup</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#using-blueprints">Using blueprints</a>
<ul>
<li class="toc-entry toc-h3"><a href="#importing-blueprints">Importing blueprints</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#event-event_template_reloaded">Event event_template_reloaded</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-alarm-control-panel-configuration-format">Legacy Alarm Control Panel configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-binary-sensor-configuration-format">Legacy Binary Sensor configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-cover-configuration-format">Legacy Cover configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-fan-configuration-format">Legacy Fan configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-light-configuration-format">Legacy Light configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-lock-configuration-format">Legacy Lock configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-sensor-configuration-format">Legacy Sensor configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-switch-configuration-format">Legacy Switch configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-vacuum-configuration-format">Legacy Vacuum configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-weather-configuration-format">Legacy Weather configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#related-topics">Related topics</a></li>
</ul>
                  </div>
                </section>
              </aside> 

          
          <div class="grid__item two-thirds desk-wide-seven-twelfths lap-one-whole palm-one-whole">
          

            
              <article class="page">
  
  <header>
    
    
      <div class="breadcrumbs">
        <a href="/needlehack-blog/">Home</a>
        
          
            
            ▸ <a href="/integrations/">Integrations</a>
          
        
          
            ▸ 
          
        
      </div>
    
    <h1 class="title indent">
      
        Template
      
    </h1>
  </header>
  
    
    
    
  
  
  <p>The <code>template</code> integration allows creating entities which derive their values from other data. This is done by specifying <a href="/docs/configuration/templating/">templates</a> for properties of an entity, like the name or the state.</p>
<p>There is currently support for the following device types within Home Assistant:</p>
<ul>
<li><a href="#alarm-control-panel">Alarm control panel</a></li>
<li><a href="#binary-sensor">Binary sensor</a></li>
<li><a href="#button">Button</a></li>
<li><a href="#cover">Cover</a></li>
<li><a href="#event">Event</a></li>
<li><a href="#fan">Fan</a></li>
<li><a href="#image">Image</a></li>
<li><a href="#light">Light</a></li>
<li><a href="#lock">Lock</a></li>
<li><a href="#number">Number</a></li>
<li><a href="#select">Select</a></li>
<li><a href="#sensor">Sensor</a></li>
<li><a href="#switch">Switch</a></li>
<li><a href="#update">Update</a></li>
<li><a href="#vacuum">Vacuum</a></li>
<li><a href="#weather">Weather</a></li>
</ul>
<h2>Configuration <a class="title-link" name="configuration" href="#configuration"></a>
</h2>
<p>To add the <strong>Template</strong> helper to your Home Assistant instance, use this My button:</p>
<p><a href="https://my.home-assistant.io/redirect/config_flow_start?domain=template" class="my badge" target="_blank"><img src="https://my.home-assistant.io/badges/config_flow_start.svg"></a></p>
<div class="details-block">
  <details class="details-block-item">
    <summary class="details-block-title">
      <span><iconify-icon inline icon="mdi:cursor-hand"></iconify-icon> Manual configuration steps</span>
      <div class="details-block-arrow">
      <svg class="down" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg>
      <svg class="up" width="24" height="24" viewbox="0 0 24 24"><path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"></path></svg>
      </div>
    </summary>
    <div class="details-block-content" id="content_0">
<p>If the above My button doesn’t work, you can also perform the following steps
manually:</p>
<ul>
<li>
<p>Browse to your Home Assistant instance.</p>
</li>
<li>
<p>Go to <strong><a href="https://my.home-assistant.io/redirect/integrations" class="my" target="_blank"><iconify-icon inline icon="mdi:devices"></iconify-icon> Settings &gt; Devices &amp; Services</a></strong>.</p>
</li>
<li>
<p>At the top of the screen, select the tab: <strong><a href="https://my.home-assistant.io/redirect/helpers" class="my" target="_blank">Helpers</a></strong>.</p>
</li>
<li>
<p>In the bottom right corner, select the
<strong><a href="https://my.home-assistant.io/redirect/config_flow_start?domain=template" class="my" target="_blank"><iconify-icon inline icon="mdi:plus"></iconify-icon> Create helper</a></strong> button.</p>
</li>
<li>
<p>From the list, select <strong>Template</strong>.</p>
</li>
<li>
<p>Follow the instructions on screen to complete the setup.</p>
</li>
</ul>
</div>
  </details>
</div>
<div class="alert alert-important">
  <p class="alert-title"><iconify-icon inline icon="mdi:message-alert-outline"></iconify-icon> Important</p>
  <div class="alert-content">
<p>To be able to add <strong><a href="https://my.home-assistant.io/redirect/helpers" class="my" target="_blank">Helpers</a></strong> via the user interface, you should have <code>default_config:</code> in your <span class="terminology"><code>configuration.yaml</code><span class="terminology-tooltip">The configuration.yaml file is the main configuration file for Home Assistant. It lists the integrations to be loaded and their specific configurations. In some cases, the configuration needs to be edited manually directly in the configuration.yaml file. Most integrations can be configured in the UI.<a class="terminology-link" href="/docs/configuration/"> [Learn more]</a></span></span>. It should already be there by default unless you removed it.</p>
  </div>
</div>
<div class="alert alert-note">
  <p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
  <div class="alert-content">
<p>Configuration using our user interface provides a more limited subset of options, making this integration more accessible while covering most use cases.</p>
<p>If you need more specific features for your use case, the manual <a href="#yaml-configuration">YAML-configuration section</a> of this integration might provide them.</p>
  </div>
</div>
<h2>YAML configuration <a class="title-link" name="yaml-configuration" href="#yaml-configuration"></a>
</h2>
<p>Entities are defined in your YAML configuration files under the <code>template:</code> key. You can define multiple configuration blocks as a list. Each block defines sensor/binary sensor/number/select entities and can contain optional update triggers.</p>
<h3>State-based template entities <a class="title-link" name="state-based-template-entities" href="#state-based-template-entities"></a>
</h3>
<p>Template entities will by default update as soon as any of the referenced data in the template updates.</p>
<p>For example, you can have a template that takes the averages of two sensors. Home Assistant will update your template sensor as soon as either source sensor updates.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Average</span><span class="nv"> </span><span class="s">temperature"</span>
        <span class="na">unit_of_measurement</span><span class="pi">:</span> <span class="s2">"</span><span class="s">°C"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="pi">&gt;</span>
          <span class="s">{% set bedroom = states('sensor.bedroom_temperature') | float %}</span>
          <span class="s">{% set kitchen = states('sensor.kitchen_temperature') | float %}</span>

          <span class="s">{{ ((bedroom + kitchen) / 2) | round(1, default=0) }}</span>
</code></pre></div></div>
<h3>Trigger-based template entities <a class="title-link" name="trigger-based-template-entities" href="#trigger-based-template-entities"></a>
</h3>
<p>If you want more control over when an entity updates, you can define triggers. Triggers follow the same format and work exactly the same as <a href="/docs/automation/trigger">triggers in automations</a>. This feature is a great way to create entities based on webhook data (<a href="#trigger-based-sensor-and-binary-sensor-storing-webhook-information">example</a>), or update entities based on a schedule.</p>
<p>Whenever a trigger fires, all related entities will re-render and it will have access to <a href="/docs/automation/templating/">the trigger data</a> in the templates.</p>
<p>Trigger-based entities do not automatically update when states referenced in the templates change. This functionality can be added back by defining a <a href="/docs/automation/trigger/#state-trigger">state trigger</a> for each entity that you want to trigger updates.</p>
<p>The state, including attributes, of trigger-based sensors and binary sensors is restored when Home Assistant is restarted. The state of other trigger-based template entities is not restored.</p>
<div class="alert alert-note">
  <p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
  <div class="alert-content">
<p>Buttons do not support using <code>trigger</code> or <code>action</code> options.</p>
  </div>
</div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">time_pattern</span>
        <span class="c1"># This will update every night</span>
        <span class="na">hours</span><span class="pi">:</span> <span class="m">0</span>
        <span class="na">minutes</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">sensor</span><span class="pi">:</span>
      <span class="c1"># Keep track how many days have past since a date</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Not</span><span class="nv"> </span><span class="s">smoking"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s1">'</span><span class="s">{{</span><span class="nv"> </span><span class="s">(</span><span class="nv"> </span><span class="s">(</span><span class="nv"> </span><span class="s">as_timestamp(now())</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">as_timestamp(strptime("06.07.2018",</span><span class="nv"> </span><span class="s">"%d.%m.%Y"))</span><span class="nv"> </span><span class="s">)</span><span class="nv"> </span><span class="s">/</span><span class="nv"> </span><span class="s">86400</span><span class="nv"> </span><span class="s">)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">round(default=0)</span><span class="nv"> </span><span class="s">}}'</span>
        <span class="na">unit_of_measurement</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Days"</span>
</code></pre></div></div>
<h3>Configuration reference <a class="title-link" name="configuration-reference" href="#configuration-reference"></a>
</h3>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="trigger-based-configuration-variables" href="#trigger-based-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class="">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> actions </span><span class="config-vars-type">list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="actions" class="title-link" href="#actions"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Define actions to be executed when the trigger fires (for trigger-based entities only). Optional. Variables set by the action script are available when evaluating entity templates. This can be used to interact with anything using actions, in particular actions with <a href="/docs/scripts/perform-actions#use-templates-to-handle-response-data">response data</a>. <a href="/docs/automation/action">See action documentation</a>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> conditions </span><span class="config-vars-type">list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="conditions" class="title-link" href="#conditions"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Define conditions that have to be met after a trigger fires and before any actions are executed or sensor updates are performed (for trigger-based entities only). Optional. <a href="/docs/automation/condition">See condition documentation</a>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> triggers </span><span class="config-vars-type">list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="triggers" class="title-link" href="#triggers"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Define one or multiple automation triggers to update the entities. Optional. If omitted will update based on referenced entities. <a href="/docs/automation/trigger">See trigger documentation</a>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unique_id </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="unique_id" class="title-link" href="#unique_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The unique ID for this config block. This will be prefixed to all unique IDs of all entities in this block.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> variables </span><span class="config-vars-type">map</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="variables" class="title-link" href="#variables"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Key-value pairs of variable definitions which can be referenced and used in the templates below (for trigger-based entities only). Mostly used by blueprints. With State-based template entities, variables are only resolved when the configuration is loaded or reloaded. Trigger based template entities resolve variables between triggers and actions.</p>
</span></div>
<div class="nested"><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> variable_name: value </span><span class="config-vars-type">string</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="variable_name-value" class="title-link" href="#variable_name-value"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The variable name and corresponding value.</p>
</span></div>
</div></div>
</div>
</div>
</div>
<h2>Common Device Configuration Options <a class="title-link" name="common-device-configuration-options" href="#common-device-configuration-options"></a>
</h2>
<p>Each entity platform has its own set of configuration options, but there are some common options that can be used across all entity platforms.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">binary_sensor</span><span class="pi">:</span>
      <span class="c1"># Common configuration options</span>
    <span class="pi">-</span> <span class="na">default_entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.my_alert</span>
      <span class="na">unique_id</span><span class="pi">:</span> <span class="s">my_unique_sensor_id</span>
      <span class="na">variables</span><span class="pi">:</span>
        <span class="na">my_entity</span><span class="pi">:</span> <span class="s">sensor.watts</span>
      <span class="na">availability</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">my_entity</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">has_value</span><span class="nv"> </span><span class="s">}}"</span>
      <span class="na">icon</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">'mdi:flash-alert'</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">states(my_entity)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">100</span><span class="nv"> </span><span class="s">else</span><span class="nv"> </span><span class="s">'mdi:flash'</span><span class="nv"> </span><span class="s">}}"</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states(my_entity)</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">Alert"</span>
      <span class="c1"># Entity specific configuration options</span>
      <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states(my_entity)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">100}}"</span>
      <span class="na">device_class</span><span class="pi">:</span> <span class="s">problem</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="device-configuration-variables" href="#device-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class="">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> availability </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: true</span>)</span><a name="availability" class="title-link" href="#availability"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the <code>available</code> state of the entity. If the template either fails to render or returns <code>True</code>, <code>"1"</code>, <code>"true"</code>, <code>"yes"</code>, <code>"on"</code>, <code>"enable"</code>, or a non-zero number, the entity will be <code>available</code>. If the template returns any other value, the entity will be <code>unavailable</code>. If not configured, the entity will always be <code>available</code>. Note that the string comparison is not case sensitive; <code>"TrUe"</code> and <code>"yEs"</code> are allowed.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> default_entity_id </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="default_entity_id" class="title-link" href="#default_entity_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Use <code>default_entity_id</code> instead of name for automatic generation of the entity id. E.g. <code>sensor.my_awesome_sensor</code>. When used without a <code>unique_id</code>, the entity id will update during restart or reload if the entity id is available.  If the entity id already exists, the entity id will be created with a number at the end. When used with a <code>unique_id</code>, the <code>default_entity_id</code> is only used when the entity is added for the first time. When set, this overrides a user-customized Entity ID in case the entity was deleted and added again.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> icon </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="icon" class="title-link" href="#icon"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template for the icon of the entity.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> picture </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="picture" class="title-link" href="#picture"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template for the entity picture of the sensor.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> name </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="name" class="title-link" href="#name"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the name of the entity.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unique_id </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="unique_id" class="title-link" href="#unique_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>An ID that uniquely identifies this entity. Will be combined with the unique ID of the configuration block if available. This allows changing the <code>name</code>, <code>icon</code> and <code>entity_id</code> from the web interface.  Changing the <code>entity_id</code> from the web interface will overwrite the value in <code>default_entity_id</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> variables </span><span class="config-vars-type">map</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="variables" class="title-link" href="#variables"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Key-value pairs of variable definitions which can be referenced and used in the templates below (for trigger-based entities only). Mostly used by blueprints. With State-based template entities, variables are only resolved when the configuration is loaded or reloaded. Trigger based template entities resolve variables between triggers and actions.</p>
</span></div>
<div class="nested"><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> variable_name: value </span><span class="config-vars-type">string</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="variable_name-value" class="title-link" href="#variable_name-value"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The variable name and corresponding value.</p>
</span></div>
</div></div>
</div>
</div>
</div>
<h2>Alarm Control Panel <a class="title-link" name="alarm-control-panel" href="#alarm-control-panel"></a>
</h2>
<p>The template alarm control panel platform allows you to create a alarm control panels with templates to define the state and scripts to define each actions.</p>
<p>Alarm control panel entities can be created from the frontend in the Helpers section or via YAML.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example state-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">alarm_control_panel</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Alarm</span><span class="nv"> </span><span class="s">Control</span><span class="nv"> </span><span class="s">Panel</span><span class="nv"> </span><span class="s">1"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_select.panel_1_state')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">arm_away</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.arm_panel_away</span>
        <span class="na">arm_home</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.arm_panel_home</span>
        <span class="na">disarm</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.disarm_panel</span>
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example trigger-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">input_select.panel_1_state</span>
    <span class="na">alarm_control_panel</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Alarm</span><span class="nv"> </span><span class="s">Control</span><span class="nv"> </span><span class="s">Panel</span><span class="nv"> </span><span class="s">1"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_select.panel_1_state')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">arm_away</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.arm_panel_away</span>
        <span class="na">arm_home</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.arm_panel_home</span>
        <span class="na">disarm</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.disarm_panel</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="alarm_control_panel-configuration-variables" href="#alarm_control_panel-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> alarm_control_panel </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="alarm_control_panel" class="title-link" href="#alarm_control_panel"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of alarm control panels</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> arm_away </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="arm_away" class="title-link" href="#arm_away"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the alarm is armed to away mode.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> arm_custom_bypass </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="arm_custom_bypass" class="title-link" href="#arm_custom_bypass"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the alarm is armed to custom bypass mode.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> arm_home </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="arm_home" class="title-link" href="#arm_home"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the alarm is armed to home mode.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> arm_night </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="arm_night" class="title-link" href="#arm_night"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the alarm is armed to night mode.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> arm_vacation </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="arm_vacation" class="title-link" href="#arm_vacation"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the alarm is armed to vacation mode.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> code_arm_required </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: true</span>)</span><a name="code_arm_required" class="title-link" href="#code_arm_required"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>If true, the code is required to arm the alarm.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> code_format </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: number</span>)</span><a name="code_format" class="title-link" href="#code_format"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>One of <code>number</code>, <code>text</code> or <code>no_code</code>. Format for the code used to arm/disarm the alarm.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> disarm </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="disarm" class="title-link" href="#disarm"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the alarm is disarmed.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> optimistic </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="optimistic" class="title-link" href="#optimistic"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Flag that defines if the alarm control panel works in optimistic mode. When enabled, the alarm control panel’s state will update immediately when a new option is chosen through the UI or service calls, without waiting for the template defined in <code>state</code> to update. When disabled (default), the alarm control panel will only update when the <code>state</code> template returns a new value.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> state </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="state" class="title-link" href="#state"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to set the state of the alarm panel. Only the states <code>armed_away</code>, <code>armed_home</code>, <code>armed_night</code>, <code>armed_vacation</code>, <code>arming</code>, <code>disarmed</code>, <code>pending</code>, <code>triggered</code> and <code>unavailable</code> are used.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> trigger </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="trigger" class="title-link" href="#trigger"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the alarm is triggered.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h2>Binary Sensor <a class="title-link" name="binary-sensor" href="#binary-sensor"></a>
</h2>
<p>The template binary sensor platform allows you to create binary sensors with templates to define the state and attributes.</p>
<p>Binary sensor entities can be created from the frontend in the Helpers section or via YAML.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example state-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">binary_sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Sun Up</span>
        <span class="na">state</span><span class="pi">:</span> <span class="pi">&gt;</span>
          <span class="s">{{ is_state("sun.sun", "above_horizon") }}</span>
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example trigger-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
      <span class="na">entity_id</span><span class="pi">:</span> <span class="s">sun.sun</span>
    <span class="na">binary_sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Sun Up</span>
        <span class="na">state</span><span class="pi">:</span> <span class="pi">&gt;</span>
          <span class="s">{{ is_state("sun.sun", "above_horizon") }}</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="binary-sensor-configuration-variables" href="#binary-sensor-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> binary_sensor </span><span class="config-vars-type">list</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="binary_sensor" class="title-link" href="#binary_sensor"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of binary sensors</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> attributes </span><span class="config-vars-type">map</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="attributes" class="title-link" href="#attributes"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines templates for attributes of the entity.</p>
</span></div>
<div class="nested"><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> attribute: template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="attribute-template" class="title-link" href="#attribute-template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The attribute and corresponding template.</p>
</span></div>
</div></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> auto_off </span><span class="config-vars-type">time</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="auto_off" class="title-link" href="#auto_off"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p><strong>Requires a trigger.</strong> After how much time the entity should turn off after it rendered ‘on’.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> delay_off </span><span class="config-vars-type">time</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="delay_off" class="title-link" href="#delay_off"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The amount of time the template state must be <em><strong>not met</strong></em> before this sensor will switch to <code>off</code>. This can also be a template.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> delay_on </span><span class="config-vars-type">time</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="delay_on" class="title-link" href="#delay_on"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The amount of time (e.g. <code>0:00:05</code>) the template state must be <em><strong>met</strong></em> before this sensor will switch to <code>on</code>. This can also be a template.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> device_class </span><span class="config-vars-type"><a href="/integrations/homeassistant/#device-class">device_class</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: None</span>)</span><a name="device_class" class="title-link" href="#device_class"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Sets the class of the device, changing the device state and icon that is displayed on the UI (see below). It does not set the <code>unit_of_measurement</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> state </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="state" class="title-link" href="#state"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The sensor is <code>on</code> if the template evaluates as <code>True</code>, <code>yes</code>, <code>on</code>, <code>enable</code> or a positive number. The sensor is <code>unknown</code> if the template evaluates as <code>None</code>. Any other value will render it as <code>off</code>. The actual appearance in the frontend (<code>Open</code>/<code>Closed</code>, <code>Detected</code>/<code>Clear</code> etc) depends on the sensor’s device_class value</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h3>State based binary sensor - Washing Machine Running <a class="title-link" name="state-based-binary-sensor---washing-machine-running" href="#state-based-binary-sensor---washing-machine-running"></a>
</h3>
<p>This example creates a washing machine “load running” sensor by monitoring an
energy meter connected to the washer. During the washer’s operation, the energy meter will fluctuate wildly, hitting zero frequently even before the load is finished. By utilizing <code>delay_off</code>, we can have this sensor only turn off if there has been no washer activity for 5 minutes.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="c1"># Determine when the washing machine has a load running.</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">binary_sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Washing</span><span class="nv"> </span><span class="s">Machine"</span>
        <span class="na">delay_off</span><span class="pi">:</span>
          <span class="na">minutes</span><span class="pi">:</span> <span class="m">5</span>
        <span class="na">state</span><span class="pi">:</span> <span class="pi">&gt;</span>
          <span class="s">{{ states('sensor.washing_machine_power')|float &gt; 0 }}</span>
</code></pre></div></div>
<h3>State based binary sensor - Is Anyone Home <a class="title-link" name="state-based-binary-sensor---is-anyone-home" href="#state-based-binary-sensor---is-anyone-home"></a>
</h3>
<p>This example is determining if anyone is home based on the combination of device tracking and motion sensors. It’s extremely useful if you have kids/baby sitter/grand parents who might still be in your house that aren’t represented by a trackable device in Home Assistant. This is providing a composite of Wi-Fi based device tracking and Z-Wave multisensor presence sensors.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">binary_sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">People home</span>
        <span class="na">state</span><span class="pi">:</span> <span class="pi">&gt;</span>
          <span class="s">{{ is_state('device_tracker.sean', 'home')</span>
             <span class="s">or is_state('device_tracker.susan', 'home')</span>
             <span class="s">or is_state('binary_sensor.office_124', 'on')</span>
             <span class="s">or is_state('binary_sensor.hallway_134', 'on')</span>
             <span class="s">or is_state('binary_sensor.living_room_139', 'on')</span>
             <span class="s">or is_state('binary_sensor.porch_ms6_1_129', 'on')</span>
             <span class="s">or is_state('binary_sensor.family_room_144', 'on') }}</span>
</code></pre></div></div>
<h3>State based binary sensor - device tracker sensor with latitude and longitude attributes <a class="title-link" name="state-based-binary-sensor---device-tracker-sensor-with-latitude-and-longitude-attributes" href="#state-based-binary-sensor---device-tracker-sensor-with-latitude-and-longitude-attributes"></a>
</h3>
<p>This example shows how to combine a non-GPS (e.g., NMAP) and GPS device tracker while still including latitude and longitude attributes</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">binary_sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">My Device</span>
        <span class="na">state</span><span class="pi">:</span> <span class="pi">&gt;</span>
          <span class="s">{{ is_state('device_tracker.my_device_nmap', 'home') or is_state('device_tracker.my_device_gps', 'home') }}</span>
        <span class="na">device_class</span><span class="pi">:</span> <span class="s2">"</span><span class="s">presence"</span>
        <span class="na">attributes</span><span class="pi">:</span>
          <span class="na">latitude</span><span class="pi">:</span> <span class="pi">&gt;</span>
            <span class="s">{% if is_state('device_tracker.my_device_nmap', 'home') %}</span>
              <span class="s">{{ state_attr('zone.home', 'latitude') }}</span>
            <span class="s">{% else %}</span>
              <span class="s">{{ state_attr('device_tracker.my_device_gps', 'latitude') }}</span>
            <span class="s">{% endif %}</span>
          <span class="na">longitude</span><span class="pi">:</span> <span class="pi">&gt;</span>
            <span class="s">{% if is_state('device_tracker.my_device_nmap', 'home') %}</span>
              <span class="s">{{ state_attr('zone.home', 'longitude') }}</span>
            <span class="s">{% else %}</span>
              <span class="s">{{ state_attr('device_tracker.my_device_gps', 'longitude') }}</span>
            <span class="s">{% endif %}</span>
</code></pre></div></div>
<h3>State based binary sensor - Change the icon when a state changes <a class="title-link" name="state-based-binary-sensor---change-the-icon-when-a-state-changes" href="#state-based-binary-sensor---change-the-icon-when-a-state-changes"></a>
</h3>
<p>This example demonstrates how to use template to change the icon as its state changes. This icon is referencing its own state.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">binary_sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Sun Up</span>
        <span class="na">state</span><span class="pi">:</span> <span class="pi">&gt;</span>
          <span class="s">{{ is_state("sun.sun", "above_horizon") }}</span>
        <span class="na">icon</span><span class="pi">:</span> <span class="pi">&gt;</span>
          <span class="s">{% if is_state("binary_sensor.sun_up", "on") %}</span>
            <span class="s">mdi:weather-sunset-up</span>
          <span class="s">{% else %}</span>
            <span class="s">mdi:weather-sunset-down</span>
          <span class="s">{% endif %}</span>
</code></pre></div></div>
<h3>Trigger based binary sensor - Change state and icon when a custom event is received <a class="title-link" name="trigger-based-binary-sensor---change-state-and-icon-when-a-custom-event-is-received" href="#trigger-based-binary-sensor---change-state-and-icon-when-a-custom-event-is-received"></a>
</h3>
<p>A more advanced use case could be to set the icon based on the sensor’s own state like above, but when triggered by an event. This example demonstrates a binary sensor that turns on momentarily, such as when a doorbell button is pressed.</p>
<p>The binary sensor turns on and sets the matching icon when the appropriate event is received. After 5 seconds, the binary sensor turns off automatically. To ensure the icon gets updated, there must be a trigger for when the state changes to off.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">event</span>
        <span class="na">event_type</span><span class="pi">:</span> <span class="s">YOUR_EVENT</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.doorbell_rang</span>
        <span class="na">to</span><span class="pi">:</span> <span class="s2">"</span><span class="s">off"</span>
    <span class="na">binary_sensor</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">doorbell_rang</span>
      <span class="na">icon</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">(trigger.platform</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">'event')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">iif('mdi:bell-ring-outline',</span><span class="nv"> </span><span class="s">'mdi:bell-outline')</span><span class="nv"> </span><span class="s">}}"</span>
      <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">trigger.platform</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">'event'</span><span class="nv"> </span><span class="s">}}"</span>
      <span class="na">auto_off</span><span class="pi">:</span>
        <span class="na">seconds</span><span class="pi">:</span> <span class="m">5</span>
</code></pre></div></div>
<h2>Button <a class="title-link" name="button" href="#button"></a>
</h2>
<p>The template button platform allows you to create button entities with scripts to define each action.</p>
<p>Button entities can be created from the frontend in the Helpers section or via YAML.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">button</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Fast Forward</span>
        <span class="na">press</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">remote.send_command</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">remote.living_room</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">command</span><span class="pi">:</span> <span class="s">fast_forward</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="button-configuration-variables" href="#button-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> button </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="button" class="title-link" href="#button"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of buttons</p>
</span></div>
<div class="nested"><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> press </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="press" class="title-link" href="#press"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines actions to run to press the button.</p>
</span></div>
</div></div>
</div></div>
</div>
<h2>Cover <a class="title-link" name="cover" href="#cover"></a>
</h2>
<p>The template cover platform allows you to create covers with templates to define the state and scripts to define each action.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example state-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">cover</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Garage Door</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.garage_door')|float</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">device_class</span><span class="pi">:</span> <span class="s">garage</span>
        <span class="na">open_cover</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.open_garage_door</span>
        <span class="na">close_cover</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.close_garage_door</span>
        <span class="na">stop_cover</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.stop_garage_door</span>
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example trigger-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">sensor.garage_door</span>
    <span class="na">cover</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Garage Door</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">trigger.to_state.state|float(0)</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">device_class</span><span class="pi">:</span> <span class="s">garage</span>
        <span class="na">open_cover</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.open_garage_door</span>
        <span class="na">close_cover</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.close_garage_door</span>
        <span class="na">stop_cover</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.stop_garage_door</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="cover-configuration-variables" href="#cover-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> cover </span><span class="config-vars-type">map</span><a name="cover" class="title-link" href="#cover"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Characteristics of a cover</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> close_cover </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="inclusive">Inclusive</span><span class="default"></span>)</span><a name="close_cover" class="title-link" href="#close_cover"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to close the cover.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> device_class </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="device_class" class="title-link" href="#device_class"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Sets the <a href="/integrations/cover/">class of the device</a>, changing the device state and icon that is displayed on the frontend.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> open_cover </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="inclusive">Inclusive</span><span class="default"></span>)</span><a name="open_cover" class="title-link" href="#open_cover"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to open the cover. If <code>open_cover</code> is specified, <code>close_cover</code> must also be specified. At least one of <code>open_cover</code> and <code>set_cover_position</code> must be specified.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> optimistic </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="optimistic" class="title-link" href="#optimistic"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Force cover position to use <a href="#cover-optimistic-mode">optimistic mode</a>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> position </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="position" class="title-link" href="#position"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the position of the cover. Legal values are numbers between <code>0</code> (closed) and <code>100</code> (open). If the template produces a <code>None</code> value the current position will be set to <code>unknown</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_cover_position </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_cover_position" class="title-link" href="#set_cover_position"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to set to a cover position (between <code>0</code> and <code>100</code>). The variable <code>position</code> will contain the entity’s set position.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_cover_tilt_position </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_cover_tilt_position" class="title-link" href="#set_cover_tilt_position"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to set the tilt of a cover (between <code>0</code> and <code>100</code>). The variable <code>tilt</code> will contain the entity’s set tilt position.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> state </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="state" class="title-link" href="#state"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the state of the cover. Valid output values from the template are <code>open</code>, <code>opening</code>, <code>closing</code> and <code>closed</code> which are directly mapped to the corresponding states. In addition, <code>true</code> is valid as a synonym to <code>open</code> and <code>false</code> as a synonym to <code>closed</code>. If <a href="#combining-state-and-position-templates">both a <code>state</code> and a <code>position</code> template</a> are specified, only <code>opening</code> and <code>closing</code> are set from the <code>state</code> template. If the template produces a <code>None</code> value the state will be set to <code>unknown</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> stop_cover </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="stop_cover" class="title-link" href="#stop_cover"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to stop the cover.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> tilt </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="tilt" class="title-link" href="#tilt"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the tilt state of the cover. Legal values are numbers between <code>0</code> (closed) and <code>100</code> (open). If the template produces a <code>None</code> value, the current tilt state will be set to <code>unknown</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> tilt_optimistic </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="tilt_optimistic" class="title-link" href="#tilt_optimistic"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Force cover tilt position to use <a href="#cover-optimistic-mode">optimistic mode</a>.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h3>Cover Optimistic Mode <a class="title-link" name="cover-optimistic-mode" href="#cover-optimistic-mode"></a>
</h3>
<p>In optimistic mode, the cover position state is maintained internally. This mode is automatically enabled if neither <code>state</code> or <code>position</code> are specified. Note that this is unlikely to be very reliable without some feedback mechanism, since there is otherwise no way to know if the cover is moving properly. The cover can be forced into optimistic mode by using the <code>optimistic</code> attribute. There is an equivalent mode for <code>tilt_position</code> that is enabled when <code>tilt</code> is not specified or when the <code>tilt_optimistic</code> attribute is used.</p>
<h3>Combining state and position templates <a class="title-link" name="combining-state-and-position-templates" href="#combining-state-and-position-templates"></a>
</h3>
<p>If both a <code>state</code> and a <code>position</code> are specified only <code>opening</code> and <code>closing</code> states are set directly from the <code>state</code>, the <code>open</code> and <code>closed</code> states will instead be derived from the cover position.</p>
<table>
<thead>
<tr>
<th>value_template output</th>
<th>result</th>
</tr>
</thead>
<tbody>
<tr>
<td>open</td>
<td>state defined by <code>position_template</code>
</td>
</tr>
<tr>
<td>closed</td>
<td>state defined by <code>position_template</code>
</td>
</tr>
<tr>
<td>true</td>
<td>state defined by <code>position_template</code>
</td>
</tr>
<tr>
<td>false</td>
<td>state defined by <code>position_template</code>
</td>
</tr>
<tr>
<td>opening</td>
<td>state set to <code>opening</code>
</td>
</tr>
<tr>
<td>closing</td>
<td>state set to <code>closing</code>
</td>
</tr>
<tr>
<td><any other output></any></td>
<td>No change of state or position</td>
</tr>
</tbody>
</table>
<h3>State based cover - Garage Door <a class="title-link" name="state-based-cover---garage-door" href="#state-based-cover---garage-door"></a>
</h3>
<p>This example converts a garage door with a controllable switch and position sensor into a cover. The condition check is optional, but suggested if you use the same switch to open and close the garage.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">cover</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Garage Door</span>
        <span class="na">device_class</span><span class="pi">:</span> <span class="s">garage</span>
        <span class="na">position</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.garage_door')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">open_cover</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">condition</span><span class="pi">:</span> <span class="s">state</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">sensor.garage_door</span>
            <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">off"</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.garage_door</span>
        <span class="na">close_cover</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">condition</span><span class="pi">:</span> <span class="s">state</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">sensor.garage_door</span>
            <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">on"</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_off</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.garage_door</span>
        <span class="na">stop_cover</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.garage_door</span>
        <span class="na">icon</span><span class="pi">:</span> <span class="pi">&gt;-</span>
          <span class="s">{% if states('sensor.garage_door')|float &gt; 0 %}</span>
            <span class="s">mdi:garage-open</span>
          <span class="s">{% else %}</span>
            <span class="s">mdi:garage</span>
          <span class="s">{% endif %}</span>
</code></pre></div></div>
<h3>State based cover - Optimistic Garage Door with Momentary Switch <a class="title-link" name="state-based-cover---optimistic-garage-door-with-momentary-switch" href="#state-based-cover---optimistic-garage-door-with-momentary-switch"></a>
</h3>
<p>This example converts a garage door with a momentary switch.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">cover</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Garage Door</span>
        <span class="na">device_class</span><span class="pi">:</span> <span class="s">garage</span>
        <span class="na">open_cover</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.garage_door</span>
        <span class="na">close_cover</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.garage_door</span>
        <span class="na">stop_cover</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.garage_door</span>
</code></pre></div></div>
<h2>Event <a class="title-link" name="event" href="#event"></a>
</h2>
<p>The template event platform allows you to create events with templates to define the state.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example state-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">event</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Scene Controller</span>
        <span class="na">device_class</span><span class="pi">:</span> <span class="s">button</span>
        <span class="na">event_type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_select.scene_controller_button_press')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">event_types</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">['single',</span><span class="nv"> </span><span class="s">'double',</span><span class="nv"> </span><span class="s">'hold']</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example trigger-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">event</span>
        <span class="na">event_type</span><span class="pi">:</span> <span class="s">zwave_js_notification</span>
        <span class="na">event_data</span><span class="pi">:</span>
          <span class="na">node_id</span><span class="pi">:</span> <span class="m">14</span>
    <span class="na">event</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Lock Operation</span>
        <span class="na">event_type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">trigger.event.data.event_label</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">event_types</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">['Keypad</span><span class="nv"> </span><span class="s">lock</span><span class="nv"> </span><span class="s">operation',</span><span class="nv"> </span><span class="s">'Keypad</span><span class="nv"> </span><span class="s">unlock</span><span class="nv"> </span><span class="s">operation']</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="event-configuration-variables" href="#event-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> event </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="event" class="title-link" href="#event"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of events</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> device_class </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="device_class" class="title-link" href="#device_class"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Sets the <a href="/integrations/event/">class of the device</a>, changing the device state and icon that is displayed on the frontend.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> event_type </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="event_type" class="title-link" href="#event_type"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Template for the event’s last fired event type.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> event_types </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="event_types" class="title-link" href="#event_types"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Template for the event’s available event types.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h2>Fan <a class="title-link" name="fan" href="#fan"></a>
</h2>
<p>The template fan platform allows you to create fans with templates to define the state and scripts to define each action.</p>
<p>Fan entities can only be created from YAML.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example state-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">fan</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Bedroom</span><span class="nv"> </span><span class="s">fan"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_boolean.state')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">percentage</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_number.percentage')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">preset_mode</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_select.preset_mode')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">oscillating</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_select.osc')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">direction</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_select.direction')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">turn_on</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.fan_on</span>
        <span class="na">turn_off</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.fan_off</span>
        <span class="na">set_percentage</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.fans_set_speed</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">percentage</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">percentage</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_preset_mode</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.fans_set_preset_mode</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">preset_mode</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">preset_mode</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_oscillating</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.fan_oscillating</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">oscillating</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">oscillating</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_direction</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.fan_direction</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">direction</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">direction</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">speed_count</span><span class="pi">:</span> <span class="m">6</span>
        <span class="na">preset_modes</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s1">'</span><span class="s">auto'</span>
          <span class="pi">-</span> <span class="s1">'</span><span class="s">smart'</span>
          <span class="pi">-</span> <span class="s1">'</span><span class="s">whoosh'</span>
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example trigger-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
        <span class="na">entity_id</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">input_boolean.state</span>
          <span class="pi">-</span> <span class="s">input_number.percentage</span>
          <span class="pi">-</span> <span class="s">input_select.preset_mode</span>
          <span class="pi">-</span> <span class="s">input_select.osc</span>
          <span class="pi">-</span> <span class="s">input_select.direction</span>
    <span class="na">fan</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Bedroom</span><span class="nv"> </span><span class="s">fan"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_boolean.state')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">percentage</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_number.percentage')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">preset_mode</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_select.preset_mode')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">oscillating</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_select.osc')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">direction</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_select.direction')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">turn_on</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.fan_on</span>
        <span class="na">turn_off</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.fan_off</span>
        <span class="na">set_percentage</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.fans_set_speed</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">percentage</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">percentage</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_preset_mode</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.fans_set_preset_mode</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">preset_mode</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">preset_mode</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_oscillating</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.fan_oscillating</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">oscillating</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">oscillating</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_direction</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.fan_direction</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">direction</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">direction</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">speed_count</span><span class="pi">:</span> <span class="m">6</span>
        <span class="na">preset_modes</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s1">'</span><span class="s">auto'</span>
          <span class="pi">-</span> <span class="s1">'</span><span class="s">smart'</span>
          <span class="pi">-</span> <span class="s1">'</span><span class="s">whoosh'</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="fan-configuration-variables" href="#fan-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> fan </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="fan" class="title-link" href="#fan"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of fans</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> direction </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="direction" class="title-link" href="#direction"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the direction of the fan. Valid values: <code>forward</code>, <code>reverse</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> optimistic </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="optimistic" class="title-link" href="#optimistic"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Flag that defines if the fan works in optimistic mode. When enabled, the fan’s state will update immediately when a new option is chosen through the UI or service calls, without waiting for the template defined in <code>state</code> to update. When disabled (default), the fan will only update when the <code>state</code> template returns a new value.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> oscillating </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="oscillating" class="title-link" href="#oscillating"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the oscillation state of the fan. Valid values: <code>true</code>, <code>false</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> percentage </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="percentage" class="title-link" href="#percentage"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the speed percentage of the fan.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> preset_mode </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="preset_mode" class="title-link" href="#preset_mode"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the preset mode of the fan.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> preset_modes </span><span class="config-vars-type">string | list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: []</span>)</span><a name="preset_modes" class="title-link" href="#preset_modes"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of preset modes the fan is capable of. This is an arbitrary list of strings and must not contain any speeds.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_percentage </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_percentage" class="title-link" href="#set_percentage"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the fan is given a speed percentage command.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_preset_mode </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_preset_mode" class="title-link" href="#set_preset_mode"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the fan is given a preset command.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_oscillating </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_oscillating" class="title-link" href="#set_oscillating"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the fan is given an oscillation state command.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_direction </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_direction" class="title-link" href="#set_direction"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the fan is given a direction command.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> speed_count </span><span class="config-vars-type">integer</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: 100</span>)</span><a name="speed_count" class="title-link" href="#speed_count"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The number of speeds the fan supports. Used to calculate the percentage step for the <code>fan.increase_speed</code> and <code>fan.decrease_speed</code> actions.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> state </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="state" class="title-link" href="#state"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the state of the fan. Valid values: <code>on</code>, <code>off</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> turn_on </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="turn_on" class="title-link" href="#turn_on"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the fan is turned on.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> turn_off </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="turn_off" class="title-link" href="#turn_off"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the fan is turned off.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h3>Converting from speeds to percentage <a class="title-link" name="converting-from-speeds-to-percentage" href="#converting-from-speeds-to-percentage"></a>
</h3>
<p>When converting a fan with 3 speeds from the old fan entity model, the following percentages can be used:</p>
<p>0 - <code>off</code>
33 - <code>low</code>
66 - <code>medium</code>
100 - <code>high</code></p>
<h3>State based fan - Helper fan <a class="title-link" name="state-based-fan---helper-fan" href="#state-based-fan---helper-fan"></a>
</h3>
<p>This example uses an input_boolean and an input_number to mimic a fan, and the example shows multiple actions for <code>set_percentage</code>.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">fan</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Helper</span><span class="nv"> </span><span class="s">Fan"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_boolean.state')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">turn_on</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">input_boolean.turn_on</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">input_boolean.state</span>
        <span class="na">turn_off</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">input_boolean.turn_off</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">input_boolean.state</span>
        <span class="na">speed_count</span><span class="pi">:</span> <span class="m">6</span>
        <span class="na">percentage</span><span class="pi">:</span> <span class="pi">&gt;</span>
          <span class="s">{{ states('input_number.percentage') if is_state('input_boolean.state', 'on') else 0 }}</span>
        <span class="na">set_percentage</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">input_boolean.turn_{{ 'on' if percentage &gt; 0 else 'off' }}</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">input_boolean.state</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">input_number.set_value</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">input_number.percentage</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">percentage</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<h3>State based fan - Fan with preset modes <a class="title-link" name="state-based-fan---fan-with-preset-modes" href="#state-based-fan---fan-with-preset-modes"></a>
</h3>
<p>This example uses an existing fan with only a percentage. It extends the percentage value into useable preset modes without a helper entity.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">fan</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Preset</span><span class="nv"> </span><span class="s">Mode</span><span class="nv"> </span><span class="s">Fan</span><span class="nv"> </span><span class="s">Example"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('fan.percentage_fan')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">turn_on</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">fan.turn_on</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">fan.percentage_fan</span>
        <span class="na">turn_off</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">fan.turn_off</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">fan.percentage_fan</span>
        <span class="na">percentage</span><span class="pi">:</span> <span class="pi">&gt;</span>
          <span class="s">{{ state_attr('fan.percentage_fan', 'percentage') }}</span>
        <span class="na">speed_count</span><span class="pi">:</span> <span class="m">3</span>
        <span class="na">set_percentage</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">fan.set_percentage</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">fan.percentage_fan</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">percentage</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">percentage</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">preset_modes</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">off"</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">low"</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">medium"</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">high"</span>
        <span class="na">preset_mode</span><span class="pi">:</span> <span class="pi">&gt;</span>
          <span class="s">{% if is_state('fan.percentage_fan', 'on') %}</span>
            <span class="s">{% if state_attr('fan.percentage_fan', 'percentage') == 100  %}</span>
              <span class="s">high</span>
            <span class="s">{% elif state_attr('fan.percentage_fan', 'percentage') == 66 %}</span>
              <span class="s">medium</span>
            <span class="s">{% else %}</span>
              <span class="s">low</span>
            <span class="s">{% endif %}</span>
          <span class="s">{% else %}</span>
            <span class="s">off</span>
          <span class="s">{% endif %}</span>
        <span class="na">set_preset_mode</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">fan.set_percentage</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">fan.percentage_fan</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">percentage</span><span class="pi">:</span> <span class="pi">&gt;-</span>
                <span class="s">{% if preset_mode == 'high' %}</span>
                  <span class="s">100</span>
                <span class="s">{% elif preset_mode == 'medium' %}</span>
                  <span class="s">66</span>
                <span class="s">{% elif preset_mode == 'low' %}</span>
                  <span class="s">33</span>
                <span class="s">{% else %}</span>
                  <span class="s">0</span>
                <span class="s">{% endif %}</span>
</code></pre></div></div>
<h2>Image <a class="title-link" name="image" href="#image"></a>
</h2>
<p>The template image platform allows you to create image entities with templates to define the image URL.</p>
<p>Image entities can be created from the frontend in the Helpers section or via YAML.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example state-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">My</span><span class="nv"> </span><span class="s">Image"</span>
        <span class="na">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">http://example.com/image.jpg"</span>
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example trigger-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
        <span class="na">entity_id</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">input_boolean.state</span>
    <span class="na">image</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">My</span><span class="nv"> </span><span class="s">Image"</span>
        <span class="na">url</span><span class="pi">:</span> <span class="pi">&gt;</span>
          <span class="s">{% if is_state('input_boolean.state', 'on') %}</span>
            <span class="s">http://example.com/image_on.jpg</span>
          <span class="s">{% else %}</span>
            <span class="s">http://example.com/image_off.jpg</span>
          <span class="s">{% endif %}</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="image-configuration-variables" href="#image-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> image </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="image" class="title-link" href="#image"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of images</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> url </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="url" class="title-link" href="#url"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The URL on which the image is served.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> verify_ssl </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: true</span>)</span><a name="verify_ssl" class="title-link" href="#verify_ssl"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Enable or disable SSL certificate verification. Set to false to use an http-only URL, or you have a self-signed SSL certificate and haven’t installed the CA certificate to enable verification.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h2>Light <a class="title-link" name="light" href="#light"></a>
</h2>
<p>The template light platform allows you to create lights with templates to define the state and scripts to define each action.</p>
<p>Light entities can only be created from YAML.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example state-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">light</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Theater</span><span class="nv"> </span><span class="s">Lights"</span>
        <span class="na">level</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('sensor.theater_brightness',</span><span class="nv"> </span><span class="s">'lux')|int</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('sensor.theater_brightness',</span><span class="nv"> </span><span class="s">'lux')|int</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">temperature</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{states('input_number.temperature_input')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">int}}"</span>
        <span class="na">hs_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">({{states('input_number.h_input')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">int}},</span><span class="nv"> </span><span class="s">{{states('input_number.s_input')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">int}})"</span>
        <span class="na">effect_list</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('light.led_strip',</span><span class="nv"> </span><span class="s">'effect_list')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">turn_on</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.theater_lights_on</span>
        <span class="na">turn_off</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.theater_lights_off</span>
        <span class="na">set_level</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.theater_lights_level</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">brightness</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">brightness</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_temperature</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">input_number.set_value</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">color_temp</span><span class="nv"> </span><span class="s">}}"</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">input_number.temperature_input</span>
        <span class="na">set_hs</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">input_number.set_value</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">h</span><span class="nv"> </span><span class="s">}}"</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">input_number.h_input</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">input_number.set_value</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">s</span><span class="nv"> </span><span class="s">}}"</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">input_number.s_input</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_on</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s">light.led_strip</span>
              <span class="na">transition</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">transition</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float</span><span class="nv"> </span><span class="s">}}"</span>
              <span class="na">hs_color</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">hs[0]</span><span class="nv"> </span><span class="s">}}"</span>
                <span class="pi">-</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">hs[1]</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_effect</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_on</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s">light.led_strip</span>
              <span class="na">effect</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">effect</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">supports_transition</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example trigger-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
        <span class="na">entity_id</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">sensor.theater_brightness</span>
        <span class="pi">-</span> <span class="s">input_number.temperature_input</span>
        <span class="pi">-</span> <span class="s">input_number.h_input</span>
        <span class="pi">-</span> <span class="s">input_number.s_input</span>
        <span class="pi">-</span> <span class="s">light.led_strip</span>
    <span class="na">light</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Theater</span><span class="nv"> </span><span class="s">Lights"</span>
        <span class="na">level</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('sensor.theater_brightness',</span><span class="nv"> </span><span class="s">'lux')|int</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('sensor.theater_brightness',</span><span class="nv"> </span><span class="s">'lux')|int</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">temperature</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{states('input_number.temperature_input')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">int}}"</span>
        <span class="na">hs_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">({{states('input_number.h_input')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">int}},</span><span class="nv"> </span><span class="s">{{states('input_number.s_input')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">int}})"</span>
        <span class="na">effect_list</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('light.led_strip',</span><span class="nv"> </span><span class="s">'effect_list')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">turn_on</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.theater_lights_on</span>
        <span class="na">turn_off</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.theater_lights_off</span>
        <span class="na">set_level</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.theater_lights_level</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">brightness</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">brightness</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_temperature</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">input_number.set_value</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">color_temp</span><span class="nv"> </span><span class="s">}}"</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">input_number.temperature_input</span>
        <span class="na">set_hs</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">input_number.set_value</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">h</span><span class="nv"> </span><span class="s">}}"</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">input_number.h_input</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">input_number.set_value</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">s</span><span class="nv"> </span><span class="s">}}"</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">input_number.s_input</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_on</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s">light.led_strip</span>
              <span class="na">transition</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">transition</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float</span><span class="nv"> </span><span class="s">}}"</span>
              <span class="na">hs_color</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">hs[0]</span><span class="nv"> </span><span class="s">}}"</span>
                <span class="pi">-</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">hs[1]</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_effect</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_on</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s">light.led_strip</span>
              <span class="na">effect</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">effect</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">supports_transition</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="light-configuration-variables" href="#light-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> light </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="light" class="title-link" href="#light"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of your lights.</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> effect </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="inclusive">Inclusive</span><span class="default">, default: optimistic</span>)</span><a name="effect" class="title-link" href="#effect"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the effect of the light.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> effect_list </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="inclusive">Inclusive</span><span class="default">, default: optimistic</span>)</span><a name="effect_list" class="title-link" href="#effect_list"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the list of supported effects. Must render a list.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> hs </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="hs" class="title-link" href="#hs"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the HS color of the light. Must render a tuple (hue, saturation).</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> level </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="level" class="title-link" href="#level"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the brightness of the light.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> min_mireds </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="min_mireds" class="title-link" href="#min_mireds"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the minimum mired value of the light.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> max_mireds </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="max_mireds" class="title-link" href="#max_mireds"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the maximum mired value of the light.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> optimistic </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="optimistic" class="title-link" href="#optimistic"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Flag that defines if the light works in optimistic mode. When enabled, the light’s state will update immediately when a new option is chosen through the UI or service calls, without waiting for the template defined in <code>state</code> to update. When disabled (default), the light will only update when the <code>state</code> template returns a new value.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> rgb </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="rgb" class="title-link" href="#rgb"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the RGB color of the light. Must render a tuple or a list (red, green, blue).</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> rgbw </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="rgbw" class="title-link" href="#rgbw"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the RGBW color of the light. Must render a tuple or a list (red, green, blue, white).</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> rgbww </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="rgbww" class="title-link" href="#rgbww"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the RGBWW color of the light. Must render a tuple or a list (red, green, blue, cold white, warm white).</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_effect </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="inclusive">Inclusive</span><span class="default"></span>)</span><a name="set_effect" class="title-link" href="#set_effect"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the light is given an effect command. Receives the variable <code>effect</code>. May also receive the variables <code>brightness</code>, and/or  <code>transition</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_level </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_level" class="title-link" href="#set_level"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the light is given a brightness command. The script will only be called if the <code>turn_on</code> call only ha brightness, and optionally transition. Receives variables <code>brightness</code> and, optionally, <code>transition</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_temperature </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_temperature" class="title-link" href="#set_temperature"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the light is given a color temperature command. Receives variable <code>color_temp</code>. May also receive variables <code>brightness</code>  and/or <code>transition</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_hs </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_hs" class="title-link" href="#set_hs"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the light is given a hs color command. Available variables: <code>hs</code> as a tuple, <code>h</code> and <code>s</code></p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_rgb </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_rgb" class="title-link" href="#set_rgb"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the light is given an RGB color command. Available variables: <code>rgb</code> as a tuple, <code>r</code>, <code>g</code> and <code>b</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_rgbw </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_rgbw" class="title-link" href="#set_rgbw"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the light is given an RGBW color command. Available variables: <code>rgbw</code> as a tuple, <code>rgb</code> as a tuple, <code>r</code>, <code>g</code>, <code>b</code>  and <code>w</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_rgbww </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_rgbww" class="title-link" href="#set_rgbww"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the light is given an RGBWW color command. Available variables: <code>rgbww</code> as a tuple, <code>rgb</code> as a tuple, <code>r</code>, <code>g</code>  <code>b</code>, <code>cw</code> and <code>ww</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> state </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="state" class="title-link" href="#state"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to set the state of the light. If not defined, the switch will optimistically assume all commands are successful.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> supports_transition </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="supports_transition" class="title-link" href="#supports_transition"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get if the light supports transition. Should return a boolean value (True/False). If this value is <code>True</code>, the transition parameter in a <code>turn on</code> or <code>turn off</code> call will be passed as a named parameter <code>transition</code> in either of the scripts.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> temperature </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="temperature" class="title-link" href="#temperature"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the color temperature of the light.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> turn_on </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="turn_on" class="title-link" href="#turn_on"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the light is turned on. May receive the variables <code>brightness</code> and/or <code>transition</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> turn_off </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="turn_off" class="title-link" href="#turn_off"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the light is turned off. May receive the variable <code>transition</code>.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h3>Light Considerations <a class="title-link" name="light-considerations" href="#light-considerations"></a>
</h3>
<p>Transition doesn’t have its own script, it will instead be passed as a named parameter <code>transition</code> to the <code>turn_on</code>, <code>turn_off</code>, <code>brightness</code>, <code>color_temp</code>, <code>effect</code>, <code>hs_color</code>, <code>rgb_color</code>, <code>rgbw_color</code> or <code>rgbww_color</code> scripts. Brightness will be passed as a named parameter <code>brightness</code> to either of <code>turn_on</code>, <code>color_temp</code>, <code>effect</code>, <code>hs_color</code>, <code>rgb_color</code>, <code>rgbw_color</code> or <code>rgbww_color</code> scripts if the corresponding parameter is also in the call. In this case, the brightness script (<code>set_level</code>) will not be called. If only brightness is passed to <code>light.turn_on</code> action, then <code>set_level</code> script is called.</p>
<h3>State based light - Theater Volume Control <a class="title-link" name="state-based-light---theater-volume-control" href="#state-based-light---theater-volume-control"></a>
</h3>
<p>This example shows a light that is actually a home theater’s volume. This
integration gives you the flexibility to provide whatever you’d like to send as
the payload to the consumer including any scale conversions you may need to
make; the <a href="/integrations/media_player/">media player integration</a> needs a floating
point percentage value from <code>0.0</code> to <code>1.0</code>.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">light</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Receiver Volume</span>
        <span class="na">state</span><span class="pi">:</span> <span class="pi">&gt;-</span>
          <span class="s">{% if is_state('media_player.receiver', 'on') %}</span>
            <span class="s">{% if state_attr('media_player.receiver', 'is_volume_muted') %}</span>
              <span class="s">off</span>
            <span class="s">{% else %}</span>
              <span class="s">on</span>
            <span class="s">{% endif %}</span>
          <span class="s">{% else %}</span>
            <span class="s">off</span>
          <span class="s">{% endif %}</span>
        <span class="na">turn_on</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">media_player.volume_mute</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">media_player.receiver</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">is_volume_muted</span><span class="pi">:</span> <span class="kc">false</span>
        <span class="na">turn_off</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">media_player.volume_mute</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">media_player.receiver</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">is_volume_muted</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">set_level</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">media_player.volume_set</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">media_player.receiver</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">volume_level</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">(brightness</span><span class="nv"> </span><span class="s">/</span><span class="nv"> </span><span class="s">255</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">100)|int</span><span class="nv"> </span><span class="s">/</span><span class="nv"> </span><span class="s">100</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">level</span><span class="pi">:</span> <span class="pi">&gt;-</span>
          <span class="s">{% if is_state('media_player.receiver', 'on') %}</span>
            <span class="s">{{ (state_attr('media_player.receiver', 'volume_level')|float * 255)|int }}</span>
          <span class="s">{% else %}</span>
            <span class="s">0</span>
          <span class="s">{% endif %}</span>
</code></pre></div></div>
<h3>State based light - Make a global light entity for a multi-segment WLED light <a class="title-link" name="state-based-light---make-a-global-light-entity-for-a-multi-segment-wled-light" href="#state-based-light---make-a-global-light-entity-for-a-multi-segment-wled-light"></a>
</h3>
<p>This example shows how to group together 2 RGBW segments from the same WLED controller into a single usable light.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">light</span><span class="pi">:</span>
        <span class="na">unique_id</span><span class="pi">:</span> <span class="s">28208f257b54c44e50deb2d618d44710</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">Multi-segment Wled control</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('light.wled_master')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">level</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('light.wled_master',</span><span class="nv"> </span><span class="s">'brightness')|d(0,true)|int</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">rgbw</span><span class="pi">:</span> <span class="s">(</span>
          <span class="s">{{ (state_attr('light.wled_segment_0', 'rgbw_color')[0]|d(0) + state_attr('light.wled_segment_1', 'rgbw_color')[0]|d(0))/2 }},</span>
          <span class="s">{{ (state_attr('light.wled_segment_0', 'rgbw_color')[1]|d(0) + state_attr('light.wled_segment_1', 'rgbw_color')[1]|d(0))/2 }},</span>
          <span class="s">{{ (state_attr('light.wled_segment_0', 'rgbw_color')[2]|d(0) + state_attr('light.wled_segment_1', 'rgbw_color')[2]|d(0))/2 }},</span>
          <span class="s">{{ (state_attr('light.wled_segment_0', 'rgbw_color')[3]|d(0) + state_attr('light.wled_segment_1', 'rgbw_color')[3]|d(0))/2 }}</span>
          <span class="s">)</span>
        <span class="na">effect_list</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('light.wled_segment_0',</span><span class="nv"> </span><span class="s">'effect_list')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">effect</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('light.wled_segment_0',</span><span class="nv"> </span><span class="s">'effect')</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">state_attr('light.wled_segment_0',</span><span class="nv"> </span><span class="s">'effect')</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">state_attr('light.wled_segment_1',</span><span class="nv"> </span><span class="s">'effect')</span><span class="nv"> </span><span class="s">else</span><span class="nv"> </span><span class="s">none</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">availability</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">is_state('light.wled_master',</span><span class="nv"> </span><span class="s">'unknown')</span><span class="nv"> </span><span class="s">}}"</span>

        <span class="na">turn_on</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_on</span>
          <span class="na">entity_id</span><span class="pi">:</span> <span class="s">light.wled_segment_0, light.wled_segment_1, light.wled_master</span>
        <span class="na">turn_off</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_off</span>
          <span class="na">entity_id</span><span class="pi">:</span> <span class="s">light.wled_master</span>
        <span class="na">set_level</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_on</span>
          <span class="na">entity_id</span><span class="pi">:</span> <span class="s">light.wled_master</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">brightness</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">brightness</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_rgbw</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_on</span>
          <span class="na">entity_id</span><span class="pi">:</span> <span class="s">light.wled_segment_0, light.wled_segment_1</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">rgbw_color</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">r</span><span class="nv"> </span><span class="s">}}"</span>
              <span class="pi">-</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">g</span><span class="nv"> </span><span class="s">}}"</span>
              <span class="pi">-</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">b</span><span class="nv"> </span><span class="s">}}"</span>
              <span class="pi">-</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">w</span><span class="nv"> </span><span class="s">}}"</span>
            <span class="na">effect</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Solid"</span>
        <span class="na">set_effect</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_on</span>
          <span class="na">entity_id</span><span class="pi">:</span> <span class="s">light.wled_segment_0, light.wled_segment_1</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">effect</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">effect</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<h2>Lock <a class="title-link" name="lock" href="#lock"></a>
</h2>
<p>The template lock platform allows you to create locks with templates to define the state and scripts to define each action.</p>
<p>Lock entities can only be created from YAML.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example state-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">lock</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Garage door</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">is_state('sensor.door',</span><span class="nv"> </span><span class="s">'on')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">lock</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.door</span>
        <span class="na">unlock</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_off</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.door</span>
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example trigger-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">sensor.door</span>
    <span class="na">lock</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Garage door</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">trigger.to_state.state</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">'on'</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">lock</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.door</span>
        <span class="na">unlock</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_off</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.door</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="lock-configuration-variables" href="#lock-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> lock </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="lock" class="title-link" href="#lock"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of locks</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> code_format </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: None</span>)</span><a name="code_format" class="title-link" href="#code_format"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the <code>code_format</code> attribute of the entity. This template must evaluate to a valid <a href="https://docs.python.org/3/library/re.html#regular-expression-syntax" rel="external nofollow">Python regular expression<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> or <code>None</code>. If it evaluates to a not-<code>None</code> value, you are prompted to enter a code when interacting with the lock. The code will be matched against the regular expression, and the lock/unlock actions will be executed only if they match. The actual <em>validity</em> of the entered code must be verified within these actions. If there’s a syntax error in the template, the entity will be unavailable. If the template fails to render for other reasons or if the regular expression is invalid, no code will be accepted, and the lock/unlock actions will never be invoked.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> lock </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="lock" class="title-link" href="#lock"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the lock is locked.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> open </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="open" class="title-link" href="#open"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the lock is opened.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> optimistic </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="optimistic" class="title-link" href="#optimistic"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Flag that defines if the lock works in optimistic mode. When enabled, the lock’s state will update immediately when a new option is chosen through the UI or service calls, without waiting for the template defined in <code>state</code> to update. When disabled (default), the lock will only update when the <code>state</code> template returns a new value.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> state </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="state" class="title-link" href="#state"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to set the state of the lock. Valid output values from the template are <code>locked</code>, <code>unlocked</code>, <code>open</code>, <code>locking</code>, <code>unlocking</code>, <code>opening</code>, and <code>jammed</code>, which are directly mapped to the corresponding states. In addition, <code>true</code> and <code>on</code> are valid as synonyms to <code>locked</code> while <code>false</code> and <code>off</code> are valid as synonyms to <code>unlocked</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unlock </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="unlock" class="title-link" href="#unlock"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the lock is unlocked.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h3>State based lock - Lock from a switch <a class="title-link" name="state-based-lock---lock-from-a-switch" href="#state-based-lock---lock-from-a-switch"></a>
</h3>
<p>This example shows a lock that copies data from a switch.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">lock</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Garage Door</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">is_state('switch.source',</span><span class="nv"> </span><span class="s">'on')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">lock</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.source</span>
        <span class="na">unlock</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_off</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.source</span>
</code></pre></div></div>
<h3>State based lock - Optimistic mode <a class="title-link" name="state-based-lock---optimistic-mode" href="#state-based-lock---optimistic-mode"></a>
</h3>
<p>This example shows a lock in optimistic mode. This lock will immediately change state after command and will not wait for state update from the sensor.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">lock</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Garage Door</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">is_state('sensor.skylight.state',</span><span class="nv"> </span><span class="s">'on')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">optimistic</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">lock</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.source</span>
        <span class="na">unlock</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_off</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.source</span>
</code></pre></div></div>
<h3>State based lock - Sensor and Two Switches <a class="title-link" name="state-based-lock---sensor-and-two-switches" href="#state-based-lock---sensor-and-two-switches"></a>
</h3>
<p>This example shows a lock that takes its state from a sensor, and uses two momentary switches to control a device.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">lock</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Garage Door</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">is_state('sensor.skylight.state',</span><span class="nv"> </span><span class="s">'on')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">lock</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.skylight_open</span>
        <span class="na">unlock</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.skylight_close</span>
</code></pre></div></div>
<h3>State based lock - Secret code <a class="title-link" name="state-based-lock---secret-code" href="#state-based-lock---secret-code"></a>
</h3>
<p>This example shows a lock that copies data from a switch. It needs a PIN code defined as a <a href="/docs/configuration/secrets">secret</a> to unlock and no code to lock. Note that the actual validity check of the code is part of the <code>unlock</code> action and should always happen there or in scripts called from these actions. In this way, you can not only perform code checks against static values, but also dynamic ones (for instance, TOTPs).</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">lock</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Garage Door</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">is_state('switch.source',</span><span class="nv"> </span><span class="s">'on')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">code_format</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">'</span><span class="se">\\</span><span class="s">d{4}'</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">is_state('switch.source',</span><span class="nv"> </span><span class="s">'on')</span><span class="nv"> </span><span class="s">else</span><span class="nv"> </span><span class="s">None</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">lock</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.source</span>
        <span class="na">unlock</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">variables</span><span class="pi">:</span>
              <span class="na">pin</span><span class="pi">:</span> <span class="kt">!secret</span> <span class="s">garage_door_pin</span>
          <span class="pi">-</span> <span class="na">condition</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">code</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">pin</span><span class="nv"> </span><span class="s">}}"</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_off</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.source</span>
</code></pre></div></div>
<p>In <code>secrets.yaml</code>:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">garage_door_pin</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1234"</span>
</code></pre></div></div>
<h2>Number <a class="title-link" name="number" href="#number"></a>
</h2>
<p>The template number platform allows you to create number entities with templates to define the state and scripts to define each action.</p>
<p>Number entities can be created from the frontend in the Helpers section or via YAML.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example state-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">number</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Desk Height</span>
        <span class="na">unit_of_measurement</span><span class="pi">:</span> <span class="s2">"</span><span class="s">in"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.desk_height')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_value</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">script.set_desk_height</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">step</span><span class="pi">:</span> <span class="m">0.5</span>
        <span class="na">min</span><span class="pi">:</span> <span class="m">1</span>
        <span class="na">max</span><span class="pi">:</span> <span class="m">24</span>
        <span class="na">icon</span><span class="pi">:</span> <span class="s">mdi:ruler</span>
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example trigger-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">sensor.desk_height</span>
  <span class="pi">-</span> <span class="na">number</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Desk Height</span>
        <span class="na">unit_of_measurement</span><span class="pi">:</span> <span class="s2">"</span><span class="s">in"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.desk_height')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_value</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">script.set_desk_height</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">step</span><span class="pi">:</span> <span class="m">0.5</span>
        <span class="na">min</span><span class="pi">:</span> <span class="m">1</span>
        <span class="na">max</span><span class="pi">:</span> <span class="m">24</span>
        <span class="na">icon</span><span class="pi">:</span> <span class="s">mdi:ruler</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="number-configuration-variables" href="#number-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> number </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="number" class="title-link" href="#number"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of numbers</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> max </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: 100.0</span>)</span><a name="max" class="title-link" href="#max"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Template for the number’s maximum value.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> min </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: 0.0</span>)</span><a name="min" class="title-link" href="#min"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Template for the number’s minimum value.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> optimistic </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="optimistic" class="title-link" href="#optimistic"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Flag that defines if the number works in optimistic mode. When enabled, the number’s state will update immediately when changed through the UI or service calls, without waiting for the template defined in <code>state</code> to update. When disabled (default), the number will only update when the <code>state</code> template returns a new value.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_value </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="set_value" class="title-link" href="#set_value"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines actions to run when the number value changes. The variable <code>value</code> will contain the number entered.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> state </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="state" class="title-link" href="#state"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Template for the number’s current value.  When omitted, the state will be set to the <code>value</code> provided by the <code>set_value</code> action.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unit_of_measurement </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: None</span>)</span><a name="unit_of_measurement" class="title-link" href="#unit_of_measurement"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines the units of measurement of the number, if any.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> step </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: 1.0</span>)</span><a name="step" class="title-link" href="#step"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Template for the number’s increment/decrement step.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h3>State based number - Changing the unit of measurement of another number <a class="title-link" name="state-based-number---changing-the-unit-of-measurement-of-another-number" href="#state-based-number---changing-the-unit-of-measurement-of-another-number"></a>
</h3>
<p>This example demonstrates the usage of a template number with a unit of measurement set to change a unit-less value of another number entity.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">number</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Cutting</span><span class="nv"> </span><span class="s">Height"</span>
        <span class="na">unit_of_measurement</span><span class="pi">:</span> <span class="s2">"</span><span class="s">cm"</span>
        <span class="na">unique_id</span><span class="pi">:</span> <span class="s">automower_cutting_height</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('number.automower_cutting_height_raw')|int(0)</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">0.5</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">1.5</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_value</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">service</span><span class="pi">:</span> <span class="s">number.set_value</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">number.automower_cutting_height_raw</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">(value</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">1.5)</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">step</span><span class="pi">:</span> <span class="m">0.5</span>
        <span class="na">min</span><span class="pi">:</span> <span class="m">2</span>
        <span class="na">max</span><span class="pi">:</span> <span class="m">6</span>
        <span class="na">icon</span><span class="pi">:</span> <span class="s">mdi:ruler</span>
</code></pre></div></div>
<h2>Select <a class="title-link" name="select" href="#select"></a>
</h2>
<p>The template select platform allows you to create select entities with templates to define the state and scripts to define each action.</p>
<p>Select entities can be created from the frontend in the Helpers section or via YAML.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example state-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">select</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Camera Day-Night Mode</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('camera.porch',</span><span class="nv"> </span><span class="s">'day_night_mode')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">options</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">['off',</span><span class="nv"> </span><span class="s">'on',</span><span class="nv"> </span><span class="s">'auto']</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">select_option</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">script.porch_camera_day_night_mode</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">day_night_mode</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">option</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example trigger-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">camera.porch</span>
        <span class="na">attribute</span><span class="pi">:</span> <span class="s">day_night_mode</span>
    <span class="na">select</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Camera Day-Night Mode</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('camera.porch',</span><span class="nv"> </span><span class="s">'day_night_mode')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">options</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">['off',</span><span class="nv"> </span><span class="s">'on',</span><span class="nv"> </span><span class="s">'auto']</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">select_option</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">script.porch_camera_day_night_mode</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">day_night_mode</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">option</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="select-configuration-variables" href="#select-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> select </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="select" class="title-link" href="#select"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of selects</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> optimistic </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="optimistic" class="title-link" href="#optimistic"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Flag that defines if the select works in optimistic mode. When enabled, the select’s state will update immediately when a new option is chosen through the UI or service calls, without waiting for the template defined in <code>state</code> to update. When disabled (default), the select will only update when the <code>state</code> template returns a new value.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> options </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="options" class="title-link" href="#options"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Template for the select’s available options.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> select_option </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="select_option" class="title-link" href="#select_option"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines actions to run to select an option from the <code>options</code> list. The variable <code>option</code> will contain the option selected.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> state </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="state" class="title-link" href="#state"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Template for the select’s current value. When omitted, the state will be set to the <code>option</code> provided by the <code>select_option</code> action.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h3>State based select - Control Day/Night mode of a camera <a class="title-link" name="state-based-select---control-daynight-mode-of-a-camera" href="#state-based-select---control-daynight-mode-of-a-camera"></a>
</h3>
<p>This show how a state based template select can be used to perform an action.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="na">select</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Porch</span><span class="nv"> </span><span class="s">Camera</span><span class="nv"> </span><span class="s">Day-Night</span><span class="nv"> </span><span class="s">Mode"</span>
      <span class="na">unique_id</span><span class="pi">:</span> <span class="s">porch_camera_day_night_mode</span>
      <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('camera.porch_camera_sd',</span><span class="nv"> </span><span class="s">'day_night_mode')</span><span class="nv"> </span><span class="s">}}"</span>
      <span class="na">options</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">['off',</span><span class="nv"> </span><span class="s">'on',</span><span class="nv"> </span><span class="s">'auto']</span><span class="nv"> </span><span class="s">}}"</span>
      <span class="na">select_option</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">tapo_control.set_day_night_mode</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">day_night_mode</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">option</span><span class="nv"> </span><span class="s">}}"</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">camera.porch_camera_sd</span>
</code></pre></div></div>
<h2>Sensor <a class="title-link" name="sensor" href="#sensor"></a>
</h2>
<p>The template sensor platform allows you to create sensors with templates to define the state and attributes.</p>
<p>Sensor entities can be created from the frontend in the Helpers section or via YAML.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example state-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Kettle"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="pi">&gt;</span>
          <span class="s">{% if is_state('switch.kettle', 'off') %}</span>
            <span class="s">off</span>
          <span class="s">{% elif state_attr('switch.kettle', 'W')|float &lt; 1000 %}</span>
            <span class="s">standby</span>
          <span class="s">{% elif is_state('switch.kettle', 'on') %}</span>
            <span class="s">on</span>
          <span class="s">{% else %}</span>
            <span class="s">failed</span>
          <span class="s">{% endif %}</span>
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example trigger-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">sensor.outside_temperature</span>
        <span class="na">not_to</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">unknown</span>
        <span class="pi">-</span> <span class="s">unavailable</span>
    <span class="na">sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Outside Temperature</span>
        <span class="na">device_class</span><span class="pi">:</span> <span class="s">temperature</span>
        <span class="na">unit_of_measurement</span><span class="pi">:</span> <span class="s">°C</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">(states('sensor.outside_temperature')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">32)</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">5/9</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="sensor-configuration-variables" href="#sensor-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> sensor </span><span class="config-vars-type">list</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="sensor" class="title-link" href="#sensor"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of sensors</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> attributes </span><span class="config-vars-type">map</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="attributes" class="title-link" href="#attributes"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines templates for attributes of the entity.</p>
</span></div>
<div class="nested"><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> attribute: template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="attribute-template" class="title-link" href="#attribute-template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The attribute and corresponding template.</p>
</span></div>
</div></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> last_reset </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: None</span>)</span><a name="last_reset" class="title-link" href="#last_reset"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template that describes when the state of the sensor was last reset. Must render to a valid <code>datetime</code>. Only available when <code>state_class</code> is set to <code>total</code></p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> state </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="state" class="title-link" href="#state"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the state of the sensor. If the sensor is numeric, i.e. it has a <code>state_class</code> or a <code>unit_of_measurement</code>, the state template must render to a number or to <code>none</code>. The state template must not render to a string, including <code>unknown</code> or <code>unavailable</code>. An <code>availability</code> template may be defined to suppress rendering of the state template.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> state_class </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: None</span>)</span><a name="state_class" class="title-link" href="#state_class"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The <a href="https://developers.home-assistant.io/docs/core/entity/sensor#available-state-classes">state_class</a> of the sensor. This will also display the value based on the user profile Number Format setting and influence the graphical presentation in the history visualization as a continuous value. If you desire to include the sensor in <span class="terminology">Long-term statistics<span class="terminology-tooltip">Home Assistant saves long-term statistics for a sensor if the entity has a state_class of measurement, total, or total_increasing. For short-term statistics, a snapshot is taken every 5 minutes. For long-term statistics, an hourly aggregate is stored of the short-term statistics. Short-term statistics are automatically purged after a predefined period (default is 10 days). Long-term statistics are never purged.<a class="terminology-link" href="/blog/2021/08/04/release-20218/#long-term-statistics"> [Learn more]</a></span></span>, include this key and assign it the appropriate value</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unit_of_measurement </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: None</span>)</span><a name="unit_of_measurement" class="title-link" href="#unit_of_measurement"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines the units of measurement of the sensor, if any. This will also display the value based on the user profile Number Format setting and influence the graphical presentation in the history visualization as a continuous value.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h3>State based sensor - Exposing sun angle <a class="title-link" name="state-based-sensor---exposing-sun-angle" href="#state-based-sensor---exposing-sun-angle"></a>
</h3>
<p>This example shows the sun angle in the frontend.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Sun Angle</span>
        <span class="na">unit_of_measurement</span><span class="pi">:</span> <span class="s2">"</span><span class="s">°"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">'%+.1f'|format(state_attr('sun.sun',</span><span class="nv"> </span><span class="s">'elevation'))</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<h3>State based sensor - Modifying another sensor’s output <a class="title-link" name="state-based-sensor---modifying-another-sensors-output" href="#state-based-sensor---modifying-another-sensors-output"></a>
</h3>
<p>If you don’t like the wording of a sensor output, then the Template Sensor can help too. Let’s rename the output of the <a href="/integrations/sun/">Sun integration</a> as a simple example:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Sun</span><span class="nv"> </span><span class="s">State"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="pi">&gt;</span>
          <span class="s">{% if is_state('sun.sun', 'above_horizon') %}</span>
            <span class="s">up</span>
          <span class="s">{% else %}</span>
            <span class="s">down</span>
          <span class="s">{% endif %}</span>
</code></pre></div></div>
<h3>State based sensor - Changing the unit of measurement of another sensor <a class="title-link" name="state-based-sensor---changing-the-unit-of-measurement-of-another-sensor" href="#state-based-sensor---changing-the-unit-of-measurement-of-another-sensor"></a>
</h3>
<p>With a Template Sensor, it’s easy to convert given values into others if the unit of measurement doesn’t fit your needs.
Because the sensors do math on the source sensor’s state and need to render to a numeric value, an availability template is used
to suppress rendering of the state template if the source sensor does not have a valid numeric state.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Transmission</span><span class="nv"> </span><span class="s">Down</span><span class="nv"> </span><span class="s">Speed"</span>
        <span class="na">unit_of_measurement</span><span class="pi">:</span> <span class="s2">"</span><span class="s">kB/s"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.transmission_down_speed')|float</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">1024</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">availability</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">is_number(states('sensor.transmission_down_speed'))</span><span class="nv"> </span><span class="s">}}"</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Transmission</span><span class="nv"> </span><span class="s">Up</span><span class="nv"> </span><span class="s">Speed"</span>
        <span class="na">unit_of_measurement</span><span class="pi">:</span> <span class="s2">"</span><span class="s">kB/s"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.transmission_up_speed')|float</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">1024</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">availability</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">is_number(states('sensor.transmission_up_speed'))</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<h3>Trigger based sensor - Using conditions to control updates <a class="title-link" name="trigger-based-sensor---using-conditions-to-control-updates" href="#trigger-based-sensor---using-conditions-to-control-updates"></a>
</h3>
<p>This example shows how to store the last valid value of a temperature sensor. It will update as long as the source sensor has a valid (numeric) state. Otherwise, the template sensor’s state will remain unchanged.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
      <span class="na">entity_id</span><span class="pi">:</span> <span class="s">sensor.outside_temperature</span>
    <span class="na">conditions</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">condition</span><span class="pi">:</span> <span class="s">template</span>
        <span class="na">value_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">is_number(states('sensor.outside_temperature'))</span><span class="nv"> </span><span class="s">}}"</span>
    <span class="na">sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Outside Temperature last known value</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.outside_temperature')</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<h2>Switch <a class="title-link" name="switch" href="#switch"></a>
</h2>
<p>The template switch platform allows you to create switches with templates to define the state and scripts to define each action.</p>
<p>Switch entities can be created from the frontend in the Helpers section or via YAML.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example state-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">switch</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Skylight</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">is_state('binary_sensor.skylight',</span><span class="nv"> </span><span class="s">'on')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">turn_on</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.skylight_open</span>
        <span class="na">turn_off</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_off</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.skylight_close</span>
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example trigger-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.skylight</span>
    <span class="na">switch</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Skylight</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">is_state('binary_sensor.skylight',</span><span class="nv"> </span><span class="s">'on')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">turn_on</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.skylight_open</span>
        <span class="na">turn_off</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_off</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.skylight_close</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="switch-configuration-variables" href="#switch-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> switch </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="switch" class="title-link" href="#switch"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of switches</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> optimistic </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="optimistic" class="title-link" href="#optimistic"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Flag that defines if the switch works in optimistic mode. When enabled, the switch’s state will update immediately when a new option is chosen through the UI or service calls, without waiting for the template defined in <code>state</code> to update. When disabled (default), the switch will only update when the <code>state</code> template returns a new value.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> state </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="state" class="title-link" href="#state"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to set the state of the switch. If not defined, the switch will optimistically assume all commands are successful.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> turn_off </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="turn_off" class="title-link" href="#turn_off"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action or list of actions to run when the switch is turned off.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> turn_on </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="turn_on" class="title-link" href="#turn_on"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action or list of actions to run when the switch is turned on.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h3>State based switch - Invert a Switch <a class="title-link" name="state-based-switch---invert-a-switch" href="#state-based-switch---invert-a-switch"></a>
</h3>
<p>This example shows a switch that is the inverse of another switch.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">switch</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">is_state('switch.target',</span><span class="nv"> </span><span class="s">'on')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">availability</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">has_value('switch.target')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">turn_on</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_off</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.target</span>
        <span class="na">turn_off</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.target</span>
</code></pre></div></div>
<h3>State based switch - Toggle Switch <a class="title-link" name="state-based-switch---toggle-switch" href="#state-based-switch---toggle-switch"></a>
</h3>
<p>This example shows a switch that takes its state from a sensor and toggles a switch.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">switch</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Blind"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">is_state_attr('switch.blind_toggle',</span><span class="nv"> </span><span class="s">'sensor_state',</span><span class="nv"> </span><span class="s">'on')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">turn_on</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.toggle</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.blind_toggle</span>
        <span class="na">turn_off</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.toggle</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.blind_toggle</span>
</code></pre></div></div>
<h3>State based switch - Sensor and Two Switches <a class="title-link" name="state-based-switch---sensor-and-two-switches" href="#state-based-switch---sensor-and-two-switches"></a>
</h3>
<p>This example shows a switch that takes its state from a sensor, and uses two
momentary switches to control a device.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">switch</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Skylight"</span>
        <span class="na">value_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">is_state('sensor.skylight',</span><span class="nv"> </span><span class="s">'on')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">turn_on</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.skylight_open</span>
        <span class="na">turn_off</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.skylight_close</span>
</code></pre></div></div>
<h3>State based switch - Optimistic Switch <a class="title-link" name="state-based-switch---optimistic-switch" href="#state-based-switch---optimistic-switch"></a>
</h3>
<p>This example switch with an assumed state based on the actions performed. This switch will immediately change state after a <code>turn_on</code>/<code>turn_off</code> command.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">switch</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Blind"</span>
        <span class="na">turn_on</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.toggle</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.blind_toggle</span>
        <span class="na">turn_off</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.toggle</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.blind_toggle</span>
</code></pre></div></div>
<h2>Update <a class="title-link" name="update" href="#update"></a>
</h2>
<p>The template update platform allows you to create update entities with templates to define the state and a script to define the install action.</p>
<p>Update entities can be created from the frontend in the Helpers section or via YAML.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example state-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">update</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Frigate</span>
        <span class="na">installed_version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.installed_version')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">latest_version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.latest_version')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">install</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.update_frigate</span>
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example trigger-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">time</span>
        <span class="na">at</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:00:00"</span>
    <span class="na">update</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Frigate</span>
        <span class="na">installed_version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.installed_version')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">latest_version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.latest_version')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">install</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.update_frigate</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="vacuum-configuration-variables" href="#vacuum-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> update </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="update" class="title-link" href="#update"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of update entities</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> backup </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="backup" class="title-link" href="#backup"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Enable or disable the <code>automatic backup before update</code> option in the update repair. When disabled, the <code>backup</code> variable will always provide <code>False</code> during the <code>install</code> action and it will not accept the <code>backup</code> option.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> device_class </span><span class="config-vars-type"><a href="/integrations/homeassistant/#device-class">device_class</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: None</span>)</span><a name="device_class" class="title-link" href="#device_class"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Sets the class of the device, changing the device state and icon that is displayed on the UI.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> in_progress </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="in_progress" class="title-link" href="#in_progress"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the in-progress state.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> install </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="install" class="title-link" href="#install"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines actions to run when the update is installed. Receives variables <code>specific_version</code> and <code>backup</code> when enabled.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> installed_version </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="installed_version" class="title-link" href="#installed_version"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the installed version.  When the value of <code>installed_version</code> matches the value of <code>latest_version</code>, the update entity state will be <code>on</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> latest_version </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="latest_version" class="title-link" href="#latest_version"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the latest version.  When the value of <code>installed_version</code> matches the value of <code>latest_version</code>, the update entity state will be <code>on</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> release_summary </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="release_summary" class="title-link" href="#release_summary"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the release summary.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> release_url </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="release_url" class="title-link" href="#release_url"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the release URL.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> specific_version </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="specific_version" class="title-link" href="#specific_version"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Enable or disable using the <code>version</code> variable with the <code>install</code> action. When disabled, the <code>specific_version</code> variable will always provide <code>None</code> in the <code>install</code> actions.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> title </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="title" class="title-link" href="#title"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the update title.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> update_percent </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="update_percent" class="title-link" href="#update_percent"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the update completion percentage.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h2>Vacuum <a class="title-link" name="vacuum" href="#vacuum"></a>
</h2>
<p>The template vacuum platform allows you to create vacuum entities with templates to define the state and scripts to define each action.</p>
<p>Vacuum entities can only be created via YAML.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example state-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">vacuum</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Living Room Vacuum</span>
        <span class="na">start</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.vacuum_start</span>
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example trigger-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">sensor.living_room_vacuum_state</span>
    <span class="na">vacuum</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Living Room Vacuum</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.living_room_vacuum_state')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">start</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.vacuum_start</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="vacuum-configuration-variables" href="#vacuum-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> vacuum </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="vacuum" class="title-link" href="#vacuum"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of vacuum entities</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> attributes </span><span class="config-vars-type">map</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="attributes" class="title-link" href="#attributes"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines templates for attributes of the entity.</p>
</span></div>
<div class="nested"><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> attribute: template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="attribute-template" class="title-link" href="#attribute-template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The attribute and corresponding template.</p>
</span></div>
</div></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> battery_level </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="battery_level" class="title-link" href="#battery_level"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the battery level of the vacuum. Legal values are numbers between <code>0</code> and <code>100</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> clean_spot </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="clean_spot" class="title-link" href="#clean_spot"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the vacuum is given a clean spot command.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> fan_speed </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="fan_speed" class="title-link" href="#fan_speed"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the fan speed of the vacuum.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> fan_speeds </span><span class="config-vars-type">string | list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="fan_speeds" class="title-link" href="#fan_speeds"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of fan speeds supported by the vacuum.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> locate </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="locate" class="title-link" href="#locate"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the vacuum is given a locate command.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> optimistic </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="optimistic" class="title-link" href="#optimistic"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Flag that defines if the vacuum works in optimistic mode. When enabled, the vacuum’s state will update immediately when a new option is chosen through the UI or service calls, without waiting for the template defined in <code>state</code> to update. When disabled (default), the vacuum will only update when the <code>state</code> template returns a new value.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> pause </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="pause" class="title-link" href="#pause"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the vacuum is paused.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> return_to_base </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="return_to_base" class="title-link" href="#return_to_base"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the vacuum is given a return to base command.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_fan_speed </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_fan_speed" class="title-link" href="#set_fan_speed"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the vacuum is given a command to set the fan speed.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> start </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="start" class="title-link" href="#start"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the vacuum is started.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> state </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="state" class="title-link" href="#state"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the state of the vacuum. Valid value: <code>docked</code>/<code>cleaning</code>/<code>idle</code>/<code>paused</code>/<code>returning</code>/<code>error</code></p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> stop </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="stop" class="title-link" href="#stop"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the vacuum is stopped.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h3>State based vacuum - Control vacuum with Harmony Hub <a class="title-link" name="state-based-vacuum---control-vacuum-with-harmony-hub" href="#state-based-vacuum---control-vacuum-with-harmony-hub"></a>
</h3>
<p>This example shows how you can use a Template Vacuum to control an IR vacuum cleaner using the <a href="/integrations/harmony">Harmony Hub Remote integration</a>.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">vacuum</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">template</span>
    <span class="na">vacuums</span><span class="pi">:</span>
      <span class="na">living_room_vacuum</span><span class="pi">:</span>
        <span class="na">start</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">remote.send_command</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">remote.harmony_hub</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">command</span><span class="pi">:</span> <span class="s">Clean</span>
              <span class="na">device</span><span class="pi">:</span> <span class="m">52840686</span>
        <span class="na">return_to_base</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">remote.send_command</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">remote.harmony_hub</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">command</span><span class="pi">:</span> <span class="s">Home</span>
              <span class="na">device</span><span class="pi">:</span> <span class="m">52840686</span>
        <span class="na">clean_spot</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">remote.send_command</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">remote.harmony_hub</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">command</span><span class="pi">:</span> <span class="s">SpotCleaning</span>
              <span class="na">device</span><span class="pi">:</span> <span class="m">52840686</span>
</code></pre></div></div>
<h3>State based vacuum - Custom attributes <a class="title-link" name="state-based-vacuum---custom-attributes" href="#state-based-vacuum---custom-attributes"></a>
</h3>
<p>This example shows how to add custom attributes.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">vacuum</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">template</span>
    <span class="na">vacuums</span><span class="pi">:</span>
      <span class="na">living_room_vacuum</span><span class="pi">:</span>
        <span class="na">value_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.vacuum_state')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">battery_level_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.vacuum_battery_level')|int</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">fan_speed_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.vacuum_fan_speed')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">attribute_templates</span><span class="pi">:</span>
          <span class="na">status</span><span class="pi">:</span> <span class="pi">&gt;-</span>
            <span class="s">{% if (states('sensor.robot_vacuum_robot_cleaner_movement') == "after" and states('sensor.robot_vacuum_robot_cleaner_cleaning_mode') == "stop")  %}</span>
              <span class="s">Charging to Resume</span>
            <span class="s">{% elif states('sensor.robot_vacuum_robot_cleaner_cleaning_mode') == "auto" %}</span>
              <span class="s">Cleaning</span>
            <span class="s">{% else %}</span>
              <span class="s">Charging</span>
            <span class="s">{% endif %}</span>
</code></pre></div></div>
<h2>Weather <a class="title-link" name="weather" href="#weather"></a>
</h2>
<p>The template weather platform allows you to create weather entities with templates to define the state and attributes.</p>
<p>Weather entities can only be created via YAML.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example state-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">weather</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">My</span><span class="nv"> </span><span class="s">Weather</span><span class="nv"> </span><span class="s">Station"</span>
        <span class="na">condition_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('weather.my_region')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">temperature_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.temperature')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">temperature_unit</span><span class="pi">:</span> <span class="s2">"</span><span class="s">°C"</span>
        <span class="na">humidity_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.humidity')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">forecast_daily_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('weather.my_region',</span><span class="nv"> </span><span class="s">'forecast_data')</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example trigger-based configuration.yaml entry</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
        <span class="na">entity_id</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">weather.my_region</span>
        <span class="pi">-</span> <span class="s">sensor.temperature</span>
        <span class="pi">-</span> <span class="s">sensor.humidity</span>
    <span class="na">weather</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">My</span><span class="nv"> </span><span class="s">Weather</span><span class="nv"> </span><span class="s">Station"</span>
        <span class="na">condition_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('weather.my_region')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">temperature_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.temperature')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">temperature_unit</span><span class="pi">:</span> <span class="s2">"</span><span class="s">°C"</span>
        <span class="na">humidity_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.humidity')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">forecast_daily_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('weather.my_region',</span><span class="nv"> </span><span class="s">'forecast_data')</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="weather-configuration-variables" href="#weather-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> weather </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="weather" class="title-link" href="#weather"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of weather entities</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> apparent_temperature_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="apparent_temperature_template" class="title-link" href="#apparent_temperature_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current apparent (feels-like) temperature.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> cloud_coverage_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="cloud_coverage_template" class="title-link" href="#cloud_coverage_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current cloud coverage.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> condition_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="condition_template" class="title-link" href="#condition_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current weather condition.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> dew_point_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="dew_point_template" class="title-link" href="#dew_point_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current dew point.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> forecast_daily_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="forecast_daily_template" class="title-link" href="#forecast_daily_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Daily forecast data.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> forecast_hourly_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="forecast_hourly_template" class="title-link" href="#forecast_hourly_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Hourly forecast data.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> forecast_twice_daily_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="forecast_twice_daily_template" class="title-link" href="#forecast_twice_daily_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Twice daily forecast data.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> humidity_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="humidity_template" class="title-link" href="#humidity_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current humidity.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> ozone_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="ozone_template" class="title-link" href="#ozone_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current ozone level.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> precipitation_unit </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="precipitation_unit" class="title-link" href="#precipitation_unit"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Unit for precipitation output. Valid options are km, mi, ft, m, cm, mm, in, yd.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> pressure_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="pressure_template" class="title-link" href="#pressure_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current air pressure.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> pressure_unit </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="pressure_unit" class="title-link" href="#pressure_unit"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Unit for pressure_template output. Valid options are Pa, hPa, kPa, bar, cbar, mbar, mmHg, inHg, psi.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> temperature_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="temperature_template" class="title-link" href="#temperature_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current temperature.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> temperature_unit </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="temperature_unit" class="title-link" href="#temperature_unit"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Unit for temperature_template output. Valid options are °C, °F, and K.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> uv_index_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="uv_index_template" class="title-link" href="#uv_index_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current UV index.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> visibility_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="visibility_template" class="title-link" href="#visibility_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current visibility.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> visibility_unit </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="visibility_unit" class="title-link" href="#visibility_unit"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Unit for visibility_template output. Valid options are km, mi, ft, m, cm, mm, in, yd.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> wind_gust_speed_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="wind_gust_speed_template" class="title-link" href="#wind_gust_speed_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current wind gust speed.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> wind_speed_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="wind_speed_template" class="title-link" href="#wind_speed_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current wind speed.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> wind_speed_unit </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="wind_speed_unit" class="title-link" href="#wind_speed_unit"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Unit for wind_speed_template output. Valid options are m/s, km/h, mph, mm/d, in/d, and in/h.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> wind_bearing_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="wind_bearing_template" class="title-link" href="#wind_bearing_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current wind bearing.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h3>Trigger based weather - Weather Forecast from response data <a class="title-link" name="trigger-based-weather---weather-forecast-from-response-data" href="#trigger-based-weather---weather-forecast-from-response-data"></a>
</h3>
<p>This example demonstrates how to use an <code>action</code> to call a <a href="/docs/scripts/perform-actions/#use-templates-to-handle-response-data">action with response data</a>
and use the response in a template.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">time_pattern</span>
        <span class="na">hours</span><span class="pi">:</span> <span class="s">/1</span>
    <span class="na">actions</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">weather.get_forecasts</span>
        <span class="na">data</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">hourly</span>
        <span class="na">target</span><span class="pi">:</span>
          <span class="na">entity_id</span><span class="pi">:</span> <span class="s">weather.home</span>
        <span class="na">response_variable</span><span class="pi">:</span> <span class="s">hourly</span>
    <span class="na">sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Weather Forecast Hourly</span>
        <span class="na">unique_id</span><span class="pi">:</span> <span class="s">weather_forecast_hourly</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">now().isoformat()</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">attributes</span><span class="pi">:</span>
          <span class="na">forecast</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">hourly['weather.home'].forecast</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<h4>Video tutorial <a class="title-link" name="video-tutorial" href="#video-tutorial"></a>
</h4>
<p>This video tutorial explains how to set up a trigger based template that makes use of an action to retrieve the weather forecast (precipitation).</p>
<p><lite-youtube videoid="zrWqDjaRBf0" videotitle="How to create Action Template Sensors in Home Assistant" posterquality="maxresdefault"></lite-youtube></p>
<h2>Combining multiple template entities <a class="title-link" name="combining-multiple-template-entities" href="#combining-multiple-template-entities"></a>
</h2>
<p>The template integration allows defining multiple sections.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry with two sections</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="c1"># Define state-based template entities</span>
  <span class="pi">-</span> <span class="na">sensor</span><span class="pi">:</span>
      <span class="s">...</span>
  <span class="pi">-</span> <span class="na">binary_sensor</span><span class="pi">:</span>
      <span class="s">...</span>

  <span class="c1"># Define trigger-based template entities</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="s">...</span>
    <span class="na">sensor</span><span class="pi">:</span>
      <span class="s">...</span>
    <span class="na">binary_sensor</span><span class="pi">:</span>
      <span class="s">...</span>
</code></pre></div></div>
<h3>Trigger based sensor and binary sensor storing webhook information <a class="title-link" name="trigger-based-sensor-and-binary-sensor-storing-webhook-information" href="#trigger-based-sensor-and-binary-sensor-storing-webhook-information"></a>
</h3>
<p>Template entities can be triggered using any automation trigger, including webhook triggers. Use a trigger-based template entity to store this information in template entities.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">triggers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">webhook</span>
        <span class="na">webhook_id</span><span class="pi">:</span> <span class="s">my-super-secret-webhook-id</span>
    <span class="na">sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Webhook</span><span class="nv"> </span><span class="s">Temperature"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">trigger.json.temperature</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">unit_of_measurement</span><span class="pi">:</span> <span class="s">°C</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Webhook</span><span class="nv"> </span><span class="s">Humidity"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">trigger.json.humidity</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">unit_of_measurement</span><span class="pi">:</span> <span class="err">%</span>

    <span class="na">binary_sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Motion"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">trigger.json.motion</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">device_class</span><span class="pi">:</span> <span class="s">motion</span>
</code></pre></div></div>
<p>You can test this trigger entity with the following CURL command:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="bash">curl <span class="nt">--header</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"temperature": 5, "humidity": 34, "motion": true}'</span> <span class="se">\</span>
  http://homeassistant.local:8123/api/webhook/my-super-secret-webhook-id
</code></pre></div></div>
<h2>Template and action variables <a class="title-link" name="template-and-action-variables" href="#template-and-action-variables"></a>
</h2>
<p>State-based and trigger-based template entities have the special template variable <code>this</code> available in their templates and actions. The <code>this</code> variable is the current <a href="/docs/configuration/state_object">state object</a> of the entity and aids <a href="#self-referencing">self-referencing</a> of an entity’s state and attributes in templates and actions. Trigger-based entities also provide <a href="/docs/automation/templating/">the trigger data</a>.</p>
<div class="alert alert-note">
  <p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
  <div class="alert-content">
<p>Self-referencing using <code>this</code> provides the state and attributes for the entity before rendering the templates to calculate a new state. In other words, it contains the previous state.</p>
  </div>
</div>
<h3>Self referencing <a class="title-link" name="self-referencing" href="#self-referencing"></a>
</h3>
<p>This example demonstrates how the <code>this</code> variable can be used in templates for self-referencing.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">test</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">this.attributes.test</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">default('Value</span><span class="nv"> </span><span class="s">when</span><span class="nv"> </span><span class="s">missing')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="c1"># not: "{{ state_attr('sensor.test', 'test') }}"</span>
        <span class="na">attributes</span><span class="pi">:</span>
          <span class="na">test</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">now()</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<h2>Optimistic mode <a class="title-link" name="optimistic-mode" href="#optimistic-mode"></a>
</h2>
<p>For template entities that support interactivity (like <code>number</code> and <code>select</code>), you can enable optimistic mode by setting the <code>optimistic</code> parameter to <code>true</code>. This affects how the entity’s state updates when you interact with it:</p>
<ul>
<li>
<p><strong>With optimistic mode disabled (default)</strong>: When you interact with the entity (for example, selecting a new option in a dropdown or setting a new number value), the entity’s state in Home Assistant will only update after the underlying template defined in the <code>state</code> parameter returns the new value.</p>
</li>
<li>
<p><strong>With optimistic mode enabled</strong>: When you interact with the entity, the entity’s state in Home Assistant immediately updates to reflect your change, without waiting for the <code>state</code> template to update. This provides a more responsive UI experience but may not reflect the actual state if the underlying action fails or takes time to complete.</p>
</li>
</ul>
<p>Optimistic mode is particularly useful when:</p>
<ul>
<li>The underlying system doesn’t provide immediate feedback</li>
<li>You want a more responsive UI experience</li>
<li>You’re confident the action will succeed</li>
</ul>
<p>When optimistic mode is disabled (default), you get more accuracy but potentially a less responsive UI, as the entity only updates after confirmation from the underlying system.</p>
<h2>Rate limiting updates <a class="title-link" name="rate-limiting-updates" href="#rate-limiting-updates"></a>
</h2>
<p>When there are entities present in the template and no triggers are defined, the template will be re-rendered when one of the entities changes states. To avoid this taking up too many resources in Home Assistant, rate limiting will be automatically applied if too many states are observed.</p>
<div class="alert alert-tip">
  <p class="alert-title"><iconify-icon inline icon="mdi:lightbulb-outline"></iconify-icon> Tip</p>
  <div class="alert-content">
<p><a href="#trigger-based-template-sensors">Define a trigger</a> to avoid a rate limit and get more control over entity updates.</p>
  </div>
</div>
<p>When <code>states</code> is used in a template by itself to iterate all states on the system, the template is re-rendered each
time any state changed event happens if any part of the state is accessed. When merely counting states, the template
is only re-rendered when a state is added or removed from the system. On busy systems with many entities or hundreds of
thousands state changed events per day, templates may re-render more than desirable.</p>
<p>In the below example, re-renders are limited to once per minute because we iterate over all available entities:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">binary_sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Has</span><span class="nv"> </span><span class="s">Unavailable</span><span class="nv"> </span><span class="s">States"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">selectattr('state',</span><span class="nv"> </span><span class="s">'in',</span><span class="nv"> </span><span class="s">['unavailable',</span><span class="nv"> </span><span class="s">'unknown',</span><span class="nv"> </span><span class="s">'none'])</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">list</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">count</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<p>In the below example, re-renders are limited to once per second because we iterate over all entities in a single domain (sensor):</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">binary_sensor</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Has</span><span class="nv"> </span><span class="s">Unavailable</span><span class="nv"> </span><span class="s">States"</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states.sensor</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">selectattr('state',</span><span class="nv"> </span><span class="s">'in',</span><span class="nv"> </span><span class="s">['unavailable',</span><span class="nv"> </span><span class="s">'unknown',</span><span class="nv"> </span><span class="s">'none'])</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">list</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">count</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<p>If the template accesses every state on the system, a rate limit of one update per minute is applied. If the template accesses all states under a specific domain, a rate limit of one update per second is applied. If the template only accesses specific states, receives update events for specifically referenced entities, or the <code>homeassistant.update_entity</code> action is used, no rate limit is applied.</p>
<h2>Considerations <a class="title-link" name="considerations" href="#considerations"></a>
</h2>
<h3>Startup <a class="title-link" name="startup" href="#startup"></a>
</h3>
<p>If you are using the state of a platform that might not be available during startup, the Template Sensor may get an <code>unknown</code> state. To avoid this, use the <code>states()</code> function in your template. For example, you should replace <code>{{ states.sensor.moon.state }}</code> with this equivalent that returns the state and never results in <code>unknown</code>: <code>{{ states('sensor.moon') }}</code> .</p>
<p>The same would apply to the <code>is_state()</code> function. You should replace <code>{{ states.switch.source.state == 'on' }}</code> with this equivalent that returns <code>true</code>/<code>false</code> and never gives an <code>unknown</code> result:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="pi">{{</span> <span class="nv">is_state('switch.source'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">on'</span><span class="nv">)</span> <span class="pi">}}</span>
</code></pre></div></div>
<h2>Using blueprints <a class="title-link" name="using-blueprints" href="#using-blueprints"></a>
</h2>
<p>If you’re just starting out and are not really familiar with templates, we recommend that you start with <span class="terminology">blueprint<span class="terminology-tooltip">A blueprint is a <a href="/getting-started/concepts-terminology/#scripts">script</a>, <a href="/getting-started/concepts-terminology/#automation">automation</a>, or <a href="/integrations/template/">template</a> entity configuration with certain parts marked as configurable. This allows users to create multiple scripts, automations or template entities based on the same blueprint, with each having its own configuration-specific settings. Blueprints are shared by the community on the <a href="https://community.home-assistant.io/c/blueprints-exchange/53">blueprints exchange</a> in the forum.<a class="terminology-link" href="/docs/blueprint/"> [Learn more]</a></span></span> template entities. These are template entities which are ready-made by the community and that you only need to configure.</p>
<p>Each blueprint contains the “recipe” for creating a single template entity, but you can create multiple template entities based on the same blueprint.</p>
<p>To create your first template entity based on a blueprint, open up your <code>configuration.yaml</code> file and add:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml template entity based on a blueprint located in config/blueprints/homeassistant/inverted_binary_sensor.yaml</span>
<span class="na">template</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">use_blueprint</span><span class="pi">:</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s">homeassistant/inverted_binary_sensor.yaml</span> <span class="c1"># relative to config/blueprints/template/</span>
      <span class="na">input</span><span class="pi">:</span>
        <span class="na">reference_entity</span><span class="pi">:</span> <span class="s">binary_sensor.foo</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Inverted foo</span>
    <span class="na">unique_id</span><span class="pi">:</span> <span class="s">inverted_foo</span>
</code></pre></div></div>
<p>If you look at the blueprint definition, you will notice it has one input defined (<code>reference_entity</code>), which expects a <code>binary_sensor</code> entity ID. When you create a template entity based on that blueprint, you will have to tell it which of your <code>binary_sensor</code> entities it should use to fill that spot.</p>
<h3>Importing blueprints <a class="title-link" name="importing-blueprints" href="#importing-blueprints"></a>
</h3>
<p>Home Assistant can import blueprints from the Home Assistant forums, GitHub, and GitHub gists.</p>
<ol>
<li>
<p>To import a blueprint, first <a href="/get-blueprints">find a blueprint you want to import</a>.</p>
<ul>
<li>
<p>If you just want to practice importing, you can use this URL:</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="text">https://github.com/home-assistant/core/blob/dev/homeassistant/components/template/blueprints/inverted_binary_sensor.yaml
</code></pre></div></div>
</li>
</ul>
</li>
<li>
<p>Download the file and place it under <code>config/blueprints/template/&lt;source or author&gt;/&lt;blueprint name&gt;.yaml</code></p>
</li>
<li>
<p>Use a config similar to the one above to create a new template entity based on the blueprint you just imported.</p>
</li>
<li>
<p>Make sure to fill in all required inputs.</p>
</li>
</ol>
<p>The blueprint can now be used for creating template entities.</p>
<h2>Event event_template_reloaded <a class="title-link" name="event-event_template_reloaded" href="#event-event_template_reloaded"></a>
</h2>
<p>Event <code>event_template_reloaded</code> is fired when Template entities have been reloaded and entities thus might have changed.</p>
<p>This event has no additional data.</p>
<h2>Legacy Alarm Control Panel configuration format <a class="title-link" name="legacy-alarm-control-panel-configuration-format" href="#legacy-alarm-control-panel-configuration-format"></a>
</h2>
<p><em>These formats still work but are no longer recommended. <a href="#alarm-control-panel">Use modern configuration</a>.</em></p>
<p>This format is configured as a platform for the <code>alarm_control_panel</code> integration and not directly under the <code>template</code> integration.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">alarm_control_panel</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">template</span>
    <span class="na">panels</span><span class="pi">:</span>
      <span class="na">safe_alarm_panel</span><span class="pi">:</span>
        <span class="na">value_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('alarm_control_panel.real_alarm')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">arm_away</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">alarm_control_panel.alarm_arm_away</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">alarm_control_panel.real_alarm</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">code</span><span class="pi">:</span> <span class="kt">!secret</span> <span class="s">alarm_code</span>
        <span class="na">arm_home</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">alarm_control_panel.alarm_arm_home</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">alarm_control_panel.real_alarm</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">code</span><span class="pi">:</span> <span class="kt">!secret</span> <span class="s">alarm_code</span>
        <span class="na">disarm</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">condition</span><span class="pi">:</span> <span class="s">state</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">device_tracker.paulus</span>
            <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">home"</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">alarm_control_panel.alarm_disarm</span>
            <span class="na">target</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">alarm_control_panel.real_alarm</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">code</span><span class="pi">:</span> <span class="kt">!secret</span> <span class="s">alarm_code</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="legacy_alarm_control_panel-configuration-variables" href="#legacy_alarm_control_panel-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> panels </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="panels" class="title-link" href="#panels"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of your panels.</p>
</span></div>
<div class="nested"><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> alarm_control_panel_name </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="alarm_control_panel_name" class="title-link" href="#alarm_control_panel_name"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The slug of the panel.</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> name </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="name" class="title-link" href="#name"></a>
</div>
<div class="config-vars-description-and-children">
<span class="config-vars-description"><p>Name to use in the frontend.</p>
</span><div class="config-vars-default">
Default: <p>Template Alarm Control Panel</p>
</div>
</div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unique_id </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="unique_id" class="title-link" href="#unique_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>An ID that uniquely identifies this alarm control panel. Set this to a unique value to allow customization through the UI.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> value_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="value_template" class="title-link" href="#value_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to set the state of the alarm panel. Only the states <code>armed_away</code>, <code>armed_home</code>, <code>armed_night</code>, <code>armed_vacation</code>, <code>arming</code>, <code>disarmed</code>, <code>pending</code>, <code>triggered</code> and <code>unavailable</code> are used.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> disarm </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="disarm" class="title-link" href="#disarm"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the alarm is disarmed.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> arm_away </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="arm_away" class="title-link" href="#arm_away"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the alarm is armed to away mode.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> arm_home </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="arm_home" class="title-link" href="#arm_home"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the alarm is armed to home mode.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> arm_night </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="arm_night" class="title-link" href="#arm_night"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the alarm is armed to night mode.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> arm_vacation </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="arm_vacation" class="title-link" href="#arm_vacation"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the alarm is armed to vacation mode.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> arm_custom_bypass </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="arm_custom_bypass" class="title-link" href="#arm_custom_bypass"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the alarm is armed to custom bypass mode.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> trigger </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="trigger" class="title-link" href="#trigger"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the alarm is triggered.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> code_arm_required </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: true</span>)</span><a name="code_arm_required" class="title-link" href="#code_arm_required"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>If true, the code is required to arm the alarm.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> code_format </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: number</span>)</span><a name="code_format" class="title-link" href="#code_format"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>One of <code>number</code>, <code>text</code> or <code>no_code</code>. Format for the code used to arm/disarm the alarm.</p>
</span></div>
</div>
</div>
</div></div>
</div></div>
</div>
<h2>Legacy Binary Sensor configuration format <a class="title-link" name="legacy-binary-sensor-configuration-format" href="#legacy-binary-sensor-configuration-format"></a>
</h2>
<p><em>These formats still work but are no longer recommended. <a href="#binary-sensor">Use modern configuration</a>.</em></p>
<p>This format is configured as a platform for the <code>binary_sensor</code> integration and not directly under the <code>template</code> integration.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">binary_sensor</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">template</span>
    <span class="na">sensors</span><span class="pi">:</span>
      <span class="na">sun_up</span><span class="pi">:</span>
        <span class="na">friendly_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Sun</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">up"</span>
        <span class="na">value_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('sun.sun',</span><span class="nv"> </span><span class="s">'elevation')</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="legacy_binary_sensor-configuration-variables" href="#legacy_binary_sensor-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> sensors </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="sensors" class="title-link" href="#sensors"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of your sensors.</p>
</span></div>
<div class="nested"><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> sensor_name </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="sensor_name" class="title-link" href="#sensor_name"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The slug of the sensor.</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> friendly_name </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="friendly_name" class="title-link" href="#friendly_name"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Name to use in the frontend.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unique_id </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="unique_id" class="title-link" href="#unique_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>An ID that uniquely identifies this binary sensor. Set this to a unique value to allow customization through the UI.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> device_class </span><span class="config-vars-type"><a href="/integrations/homeassistant/#device-class">device_class</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: None</span>)</span><a name="device_class" class="title-link" href="#device_class"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Sets the <a href="/integrations/binary_sensor/">class of the device</a>, changing the device state and icon that is displayed on the frontend.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> value_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="value_template" class="title-link" href="#value_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The sensor is <code>on</code> if the template evaluates as <code>True</code> and <code>off</code> otherwise. The actual appearance in the frontend (<code>Open</code>/<code>Closed</code>, <code>Detected</code>/<code>Clear</code> etc) depends on the sensor’s device_class value</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> availability_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: true</span>)</span><a name="availability_template" class="title-link" href="#availability_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the <code>available</code> state of the entity. If the template either fails to render or returns <code>True</code>, <code>"1"</code>, <code>"true"</code>, <code>"yes"</code>, <code>"on"</code>, <code>"enable"</code>, or a non-zero number, the entity will be <code>available</code>. If the template returns any other value, the entity will be <code>unavailable</code>. If not configured, the entity will always be <code>available</code>. Note that the string comparison not case sensitive; <code>"TrUe"</code> and <code>"yEs"</code> are allowed.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> icon_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="icon_template" class="title-link" href="#icon_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template for the icon of the sensor.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> entity_picture_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="entity_picture_template" class="title-link" href="#entity_picture_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template for the entity picture of the sensor.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> attribute_templates </span><span class="config-vars-type">map</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="attribute_templates" class="title-link" href="#attribute_templates"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines templates for attributes of the sensor.</p>
</span></div>
<div class="nested"><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> attribute: template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="attribute-template" class="title-link" href="#attribute-template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The attribute and corresponding template.</p>
</span></div>
</div></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> delay_on </span><span class="config-vars-type">time</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="delay_on" class="title-link" href="#delay_on"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The amount of time the template state must be <em><strong>met</strong></em> before this sensor will switch to <code>on</code>. This can also be a template.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> delay_off </span><span class="config-vars-type">time</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="delay_off" class="title-link" href="#delay_off"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The amount of time the template state must be <em><strong>not met</strong></em> before this sensor will switch to <code>off</code>. This can also be a template.</p>
</span></div>
</div>
</div>
</div></div>
</div></div>
</div>
<h2>Legacy Cover configuration format <a class="title-link" name="legacy-cover-configuration-format" href="#legacy-cover-configuration-format"></a>
</h2>
<p><em>This format still works but is no longer recommended. <a href="#cover">Use modern configuration</a>.</em></p>
<p>This format is configured as a platform for the <code>cover</code> integration and not directly under the <code>template</code> integration.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">cover</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">template</span>
    <span class="na">covers</span><span class="pi">:</span>
      <span class="na">garage_door</span><span class="pi">:</span>
        <span class="na">device_class</span><span class="pi">:</span> <span class="s">garage</span>
        <span class="na">friendly_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Garage</span><span class="nv"> </span><span class="s">Door"</span>
        <span class="na">value_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.garage_door')|float</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">open_cover</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.open_garage_door</span>
        <span class="na">close_cover</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.close_garage_door</span>
        <span class="na">stop_cover</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.stop_garage_door</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="legacy_cover-configuration-variables" href="#legacy_cover-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> covers </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="covers" class="title-link" href="#covers"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of your covers.</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> friendly_name </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="friendly_name" class="title-link" href="#friendly_name"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Name to use in the frontend.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unique_id </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="unique_id" class="title-link" href="#unique_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>An ID that uniquely identifies this cover. Set this to a unique value to allow customization through the UI.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> value_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="value_template" class="title-link" href="#value_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the state of the cover. Valid output values from the template are <code>open</code>, <code>opening</code>, <code>closing</code> and <code>closed</code> which are directly mapped to the corresponding states. In addition, <code>true</code> is valid as a synonym to <code>open</code> and <code>false</code> as a synonym to <code>closed</code>. If <a href="#combining-state-and-position-templates">both a <code>value_template</code> and a <code>position_template</code></a> are specified, only <code>opening</code> and <code>closing</code> are set from the <code>value_template</code>. If the template produces a <code>None</code> value the state will be set to <code>unknown</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> position_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="position_template" class="title-link" href="#position_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the position of the cover. Legal values are numbers between <code>0</code> (closed) and <code>100</code> (open). If the template produces a <code>None</code> value the current position will be set to <code>unknown</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> icon_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="icon_template" class="title-link" href="#icon_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to specify which icon to use.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> entity_picture_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="entity_picture_template" class="title-link" href="#entity_picture_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template for the entity picture of the cover.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> availability_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: true</span>)</span><a name="availability_template" class="title-link" href="#availability_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the <code>available</code> state of the entity. If the template either fails to render or returns <code>True</code>, <code>"1"</code>, <code>"true"</code>, <code>"yes"</code>, <code>"on"</code>, <code>"enable"</code>, or a non-zero number, the entity will be <code>available</code>. If the template returns any other value, the entity will be <code>unavailable</code>. If not configured, the entity will always be <code>available</code>. Note that the string comparison is not case sensitive; <code>"TrUe"</code> and <code>"yEs"</code> are allowed.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> device_class </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="device_class" class="title-link" href="#device_class"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Sets the <a href="/integrations/cover/">class of the device</a>, changing the device state and icon that is displayed on the frontend.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> open_cover </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="inclusive">Inclusive</span><span class="default"></span>)</span><a name="open_cover" class="title-link" href="#open_cover"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to open the cover. If <code>open_cover</code> is specified, <code>close_cover</code> must also be specified. At least one of <code>open_cover</code> and <code>set_cover_position</code> must be specified.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> close_cover </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="inclusive">Inclusive</span><span class="default"></span>)</span><a name="close_cover" class="title-link" href="#close_cover"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to close the cover.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> stop_cover </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="stop_cover" class="title-link" href="#stop_cover"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to stop the cover.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_cover_position </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_cover_position" class="title-link" href="#set_cover_position"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to set to a cover position (between <code>0</code> and <code>100</code>). The variable <code>position</code> will contain the entity’s set position.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_cover_tilt_position </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_cover_tilt_position" class="title-link" href="#set_cover_tilt_position"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to set the tilt of a cover (between <code>0</code> and <code>100</code>). The variable <code>tilt</code> will contain the entity’s set tilt position.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> optimistic </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="optimistic" class="title-link" href="#optimistic"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Force cover position to use <a href="#cover-optimistic-mode">optimistic mode</a>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> tilt_optimistic </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="tilt_optimistic" class="title-link" href="#tilt_optimistic"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Force cover tilt position to use <a href="#cover-optimistic-mode">optimistic mode</a>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> tilt_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="tilt_template" class="title-link" href="#tilt_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the tilt state of the cover. Legal values are numbers between <code>0</code> (closed) and <code>100</code> (open). If the template produces a <code>None</code> value the current tilt state will be set to <code>unknown</code>.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h2>Legacy Fan configuration format <a class="title-link" name="legacy-fan-configuration-format" href="#legacy-fan-configuration-format"></a>
</h2>
<p><em>This format still works but is no longer recommended. <a href="#fan">Use modern configuration</a>.</em></p>
<p>This format is configured as a platform for the <code>fan</code> integration and not directly under the <code>template</code> integration.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">fan</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">template</span>
    <span class="na">fans</span><span class="pi">:</span>
      <span class="na">bedroom_fan</span><span class="pi">:</span>
        <span class="na">friendly_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Bedroom</span><span class="nv"> </span><span class="s">fan"</span>
        <span class="na">value_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_boolean.state')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">percentage_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_number.percentage')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">preset_mode_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_select.preset_mode')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">oscillating_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_select.osc')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">direction_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('input_select.direction')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">turn_on</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.fan_on</span>
        <span class="na">turn_off</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.fan_off</span>
        <span class="na">set_percentage</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.fans_set_speed</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">percentage</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">percentage</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_preset_mode</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.fans_set_preset_mode</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">preset_mode</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">preset_mode</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_oscillating</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.fan_oscillating</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">oscillating</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">oscillating</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_direction</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.fan_direction</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">direction</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">direction</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">speed_count</span><span class="pi">:</span> <span class="m">6</span>
        <span class="na">preset_modes</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s1">'</span><span class="s">auto'</span>
          <span class="pi">-</span> <span class="s1">'</span><span class="s">smart'</span>
          <span class="pi">-</span> <span class="s1">'</span><span class="s">whoosh'</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="legacy_fan-configuration-variables" href="#legacy_fan-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> fans </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="fans" class="title-link" href="#fans"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of your fans.</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> friendly_name </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="friendly_name" class="title-link" href="#friendly_name"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Name to use in the frontend.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unique_id </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="unique_id" class="title-link" href="#unique_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>An ID that uniquely identifies this fan. Set this to a unique value to allow customization through the UI.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> value_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="value_template" class="title-link" href="#value_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the state of the fan. Valid values: <code>on</code>, <code>off</code></p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> percentage_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="percentage_template" class="title-link" href="#percentage_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the speed percentage of the fan.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> preset_mode_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="preset_mode_template" class="title-link" href="#preset_mode_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the preset mode of the fan.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> oscillating_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="oscillating_template" class="title-link" href="#oscillating_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the osc state of the fan. Valid values: <code>true</code>, <code>false</code></p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> direction_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="direction_template" class="title-link" href="#direction_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the direction of the fan. Valid values: <code>forward</code>, <code>reverse</code></p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> availability_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: true</span>)</span><a name="availability_template" class="title-link" href="#availability_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the <code>available</code> state of the entity. If the template either fails to render or returns <code>True</code>, <code>"1"</code>, <code>"true"</code>, <code>"yes"</code>, <code>"on"</code>, <code>"enable"</code>, or a non-zero number, the entity will be <code>available</code>. If the template returns any other value, the entity will be <code>unavailable</code>. If not configured, the entity will always be <code>available</code>. Note that the string comparison not case sensitive; <code>"TrUe"</code> and <code>"yEs"</code> are allowed.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> turn_on </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="turn_on" class="title-link" href="#turn_on"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the fan is turned on.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> turn_off </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="turn_off" class="title-link" href="#turn_off"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the fan is turned off.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_percentage </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_percentage" class="title-link" href="#set_percentage"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the fan is given a speed percentage command.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_preset_mode </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_preset_mode" class="title-link" href="#set_preset_mode"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the fan is given a preset command.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_oscillating </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_oscillating" class="title-link" href="#set_oscillating"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the fan is given an osc state command.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_direction </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_direction" class="title-link" href="#set_direction"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the fan is given a direction command.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> preset_modes </span><span class="config-vars-type">string | list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: []</span>)</span><a name="preset_modes" class="title-link" href="#preset_modes"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of preset modes the fan is capable of. This is an arbitrary list of strings and must not contain any speeds.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> speed_count </span><span class="config-vars-type">integer</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: 100</span>)</span><a name="speed_count" class="title-link" href="#speed_count"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The number of speeds the fan supports. Used to calculate the percentage step for the <code>fan.increase_speed</code> and <code>fan.decrease_speed</code> actions.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h2>Legacy Light configuration format <a class="title-link" name="legacy-light-configuration-format" href="#legacy-light-configuration-format"></a>
</h2>
<p><em>This format still works but is no longer recommended. <a href="#light">Use modern configuration</a>.</em></p>
<p>This format is configured as a platform for the <code>light</code> integration and not directly under the <code>template</code> integration.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">light</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">template</span>
    <span class="na">lights</span><span class="pi">:</span>
      <span class="na">theater_lights</span><span class="pi">:</span>
        <span class="na">friendly_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Theater</span><span class="nv"> </span><span class="s">Lights"</span>
        <span class="na">level_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('sensor.theater_brightness',</span><span class="nv"> </span><span class="s">'lux')|int</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">value_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('sensor.theater_brightness',</span><span class="nv"> </span><span class="s">'lux')|int</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">temperature_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{states('input_number.temperature_input')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">int}}"</span>
        <span class="na">hs_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">({{states('input_number.h_input')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">int}},</span><span class="nv"> </span><span class="s">{{states('input_number.s_input')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">int}})"</span>
        <span class="na">effect_list_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('light.led_strip',</span><span class="nv"> </span><span class="s">'effect_list')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">turn_on</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.theater_lights_on</span>
        <span class="na">turn_off</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.theater_lights_off</span>
        <span class="na">set_level</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.theater_lights_level</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">brightness</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">brightness</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_temperature</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">input_number.set_value</span>
          <span class="na">data</span><span class="pi">:</span>
            <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">color_temp</span><span class="nv"> </span><span class="s">}}"</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">input_number.temperature_input</span>
        <span class="na">set_hs</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">input_number.set_value</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">h</span><span class="nv"> </span><span class="s">}}"</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">input_number.h_input</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">input_number.set_value</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">s</span><span class="nv"> </span><span class="s">}}"</span>
              <span class="na">entity_id</span><span class="pi">:</span> <span class="s">input_number.s_input</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_on</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s">light.led_strip</span>
              <span class="na">transition</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">transition</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float</span><span class="nv"> </span><span class="s">}}"</span>
              <span class="na">hs_color</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">hs[0]</span><span class="nv"> </span><span class="s">}}"</span>
                <span class="pi">-</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">hs[1]</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">set_effect</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_on</span>
            <span class="na">data</span><span class="pi">:</span>
              <span class="na">entity_id</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s">light.led_strip</span>
              <span class="na">effect</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">effect</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">supports_transition_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="legacy_light-configuration-variables" href="#legacy_light-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> lights </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="lights" class="title-link" href="#lights"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of your lights.</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> friendly_name </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="friendly_name" class="title-link" href="#friendly_name"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Name to use in the frontend.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unique_id </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="unique_id" class="title-link" href="#unique_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>An ID that uniquely identifies this light. Set this to a unique value to allow customization through the UI.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> value_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="value_template" class="title-link" href="#value_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the state of the light.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> level_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="level_template" class="title-link" href="#level_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the brightness of the light.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> temperature_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="temperature_template" class="title-link" href="#temperature_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the color temperature of the light.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> hs_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="hs_template" class="title-link" href="#hs_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the HS color of the light. Must render a tuple (hue, saturation).</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> rgb_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="rgb_template" class="title-link" href="#rgb_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the RGB color of the light. Must render a tuple or a list (red, green, blue).</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> rgbw_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="rgbw_template" class="title-link" href="#rgbw_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the RGBW color of the light. Must render a tuple or a list (red, green, blue, white).</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> rgbww_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="rgbww_template" class="title-link" href="#rgbww_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the RGBWW color of the light. Must render a tuple or a list (red, green, blue, cold white, warm white).</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> supports_transition_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="supports_transition_template" class="title-link" href="#supports_transition_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get if light supports transition. Should return boolean value (True/False). If this value is <code>True</code> transition parameter in a turn on or turn off call will be passed as a named parameter <code>transition</code> to either of the scripts.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> effect_list_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="inclusive">Inclusive</span><span class="default">, default: optimistic</span>)</span><a name="effect_list_template" class="title-link" href="#effect_list_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the list of supported effects. Must render a list</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> effect_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="inclusive">Inclusive</span><span class="default">, default: optimistic</span>)</span><a name="effect_template" class="title-link" href="#effect_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the effect of the light.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> min_mireds_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="min_mireds_template" class="title-link" href="#min_mireds_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the min mireds value of the light.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> max_mireds_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="max_mireds_template" class="title-link" href="#max_mireds_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the max mireds value of the light.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> icon_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="icon_template" class="title-link" href="#icon_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template for an icon or picture, e.g.,  showing a different icon for different states.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> availability_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: true</span>)</span><a name="availability_template" class="title-link" href="#availability_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the <code>available</code> state of the entity. If the template either fails to render or returns <code>True</code>, <code>"1"</code>, <code>"true"</code>, <code>"yes"</code>, <code>"on"</code>, <code>"enable"</code>, or a non-zero number, the entity will be <code>available</code>. If the template returns any other value, the entity will be <code>unavailable</code>. If not configured, the entity will always be <code>available</code>. Note that the string comparison not case sensitive; <code>"TrUe"</code> and <code>"yEs"</code> are allowed.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> turn_on </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="turn_on" class="title-link" href="#turn_on"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the light is turned on. May receive variables <code>brightness</code> and/or <code>transition</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> turn_off </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="turn_off" class="title-link" href="#turn_off"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the light is turned off. May receive variable <code>transition</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_level </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_level" class="title-link" href="#set_level"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the light is given a brightness command. The script will only be called if the <code>turn_on</code> call only has brightness, and optionally transition. Receives variables <code>brightness</code> and optionally <code>transition</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_temperature </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_temperature" class="title-link" href="#set_temperature"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the light is given a color temperature command. Receives variable <code>color_temp</code>. May also receive variables <code>brightness</code> and/or <code>transition</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_hs </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_hs" class="title-link" href="#set_hs"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the light is given a hs color command. Available variables: <code>hs</code> as a tuple, <code>h</code> and <code>s</code></p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_rgb </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_rgb" class="title-link" href="#set_rgb"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the light is given an RGB color command. Available variables: <code>rgb</code> as a tuple, <code>r</code>, <code>g</code> and <code>b</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_rgbw </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_rgbw" class="title-link" href="#set_rgbw"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the light is given an RGBW color command. Available variables: <code>rgbw</code> as a tuple, <code>rgb</code> as a tuple, <code>r</code>, <code>g</code>, <code>b</code> and <code>w</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_rgbww </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_rgbww" class="title-link" href="#set_rgbww"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the light is given an RGBWW color command. Available variables: <code>rgbww</code> as a tuple, <code>rgb</code> as a tuple, <code>r</code>, <code>g</code>, <code>b</code>, <code>cw</code> and <code>ww</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_effect </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="inclusive">Inclusive</span><span class="default"></span>)</span><a name="set_effect" class="title-link" href="#set_effect"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the light is given an effect command. Receives variable <code>effect</code>. May also receive variables <code>brightness</code> and/or <code>transition</code>.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h2>Legacy Lock configuration format <a class="title-link" name="legacy-lock-configuration-format" href="#legacy-lock-configuration-format"></a>
</h2>
<p><em>This format still works but is no longer recommended. <a href="#lock">Use modern configuration</a>.</em></p>
<p>This format is configured as a platform for the <code>lock</code> integration and not directly under the <code>template</code> integration.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">lock</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">template</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Garage door</span>
    <span class="na">value_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">is_state('sensor.door',</span><span class="nv"> </span><span class="s">'on')</span><span class="nv"> </span><span class="s">}}"</span>
    <span class="na">lock</span><span class="pi">:</span>
      <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.door</span>
    <span class="na">unlock</span><span class="pi">:</span>
      <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_off</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.door</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="legacy_lock-configuration-variables" href="#legacy_lock-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class="">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> name </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: Template Lock</span>)</span><a name="name" class="title-link" href="#name"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Name to use in the frontend.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unique_id </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="unique_id" class="title-link" href="#unique_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>An ID that uniquely identifies this lock. Set this to a unique value to allow customization through the UI.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> value_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="value_template" class="title-link" href="#value_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to set the state of the lock.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> availability_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: true</span>)</span><a name="availability_template" class="title-link" href="#availability_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the <code>available</code> state of the entity. If the template either fails to render or returns <code>True</code>, <code>"1"</code>, <code>"true"</code>, <code>"yes"</code>, <code>"on"</code>, <code>"enable"</code>, or a non-zero number, the entity will be <code>available</code>. If the template returns any other value, the entity will be <code>unavailable</code>. If not configured, the entity will always be <code>available</code>. Note that the string comparison not case sensitive; <code>"TrUe"</code> and <code>"yEs"</code> are allowed.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> code_format_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: None</span>)</span><a name="code_format_template" class="title-link" href="#code_format_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the <code>code_format</code> attribute of the entity. This template must evaluate to a valid <a href="https://docs.python.org/3/library/re.html#regular-expression-syntax" rel="external nofollow">Python regular expression<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> or <code>None</code>. If it evaluates to a not-<code>None</code> value, the user is prompted to enter a code when interacting with the lock. The code will be matched against the regular expression, and only if it matches, the lock/unlock actions will be executed. The actual <em>validity</em> of the entered code must be verified within these actions. If there’s a syntax error in the template, the entity will be unavailable. If the template fails to render for other reasons or if the regular expression is invalid, no code will be accepted and the lock/unlock actions will never be invoked.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> lock </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="lock" class="title-link" href="#lock"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the lock is locked.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unlock </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="unlock" class="title-link" href="#unlock"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the lock is unlocked.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> open </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="open" class="title-link" href="#open"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the lock is opened.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> optimistic </span><span class="config-vars-type">boolean</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: false</span>)</span><a name="optimistic" class="title-link" href="#optimistic"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Flag that defines if lock works in optimistic mode.</p>
</span></div>
</div>
</div>
</div>
<h2>Legacy Sensor configuration format <a class="title-link" name="legacy-sensor-configuration-format" href="#legacy-sensor-configuration-format"></a>
</h2>
<p><em>This format still works but is no longer recommended. <a href="#sensor">Use modern configuration</a>.</em></p>
<p>This format is configured as a platform for the <code>sensor</code> integration and not directly under the <code>template</code> integration.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">sensor</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">template</span>
    <span class="na">sensors</span><span class="pi">:</span>
      <span class="na">solar_angle</span><span class="pi">:</span>
        <span class="na">friendly_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Sun</span><span class="nv"> </span><span class="s">angle"</span>
        <span class="na">unit_of_measurement</span><span class="pi">:</span> <span class="s2">"</span><span class="s">degrees"</span>
        <span class="na">value_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('sun.sun',</span><span class="nv"> </span><span class="s">'elevation')</span><span class="nv"> </span><span class="s">}}"</span>

      <span class="na">sunrise</span><span class="pi">:</span>
        <span class="na">value_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('sun.sun',</span><span class="nv"> </span><span class="s">'next_rising')</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="legacy_sensor-configuration-variables" href="#legacy_sensor-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> sensors </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="sensors" class="title-link" href="#sensors"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Map of your sensors.</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> friendly_name </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="friendly_name" class="title-link" href="#friendly_name"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Name to use in the frontend.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> friendly_name_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="friendly_name_template" class="title-link" href="#friendly_name_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template for the name to be used in the frontend (this overrides friendly_name).</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unique_id </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="unique_id" class="title-link" href="#unique_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>An ID that uniquely identifies this sensor. Set this to a unique value to allow customization through the UI.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unit_of_measurement </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: None</span>)</span><a name="unit_of_measurement" class="title-link" href="#unit_of_measurement"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines the units of measurement of the sensor, if any. This will also display the value based on the user profile Number Format setting and influence the graphical presentation in the history visualization as a continuous value.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> value_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="value_template" class="title-link" href="#value_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the state of the sensor.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> icon_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="icon_template" class="title-link" href="#icon_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template for the icon of the sensor.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> entity_picture_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="entity_picture_template" class="title-link" href="#entity_picture_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template for the entity picture of the sensor.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> attribute_templates </span><span class="config-vars-type">map</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="attribute_templates" class="title-link" href="#attribute_templates"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines templates for attributes of the sensor.</p>
</span></div>
<div class="nested"><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> attribute: template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="attribute-template" class="title-link" href="#attribute-template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The attribute and corresponding template.</p>
</span></div>
</div></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> availability_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: true</span>)</span><a name="availability_template" class="title-link" href="#availability_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the <code>available</code> state of the integration. If the template returns <code>true</code>, the device is <code>available</code>. If the template returns any other value, the device will be <code>unavailable</code>. If <code>availability_template</code> is not configured, the integration will always be <code>available</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> device_class </span><span class="config-vars-type"><a href="/integrations/homeassistant/#device-class">device_class</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: None</span>)</span><a name="device_class" class="title-link" href="#device_class"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Sets the class of the device, changing the device state and icon that is displayed on the UI (see below). It does not set the <code>unit_of_measurement</code>.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h2>Legacy Switch configuration format <a class="title-link" name="legacy-switch-configuration-format" href="#legacy-switch-configuration-format"></a>
</h2>
<p><em>This format still works but is no longer recommended. <a href="#switch">Use modern configuration</a>.</em></p>
<p>This format is configured as a platform for the <code>switch</code> integration and not directly under the <code>template</code> integration.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">switch</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">template</span>
    <span class="na">switches</span><span class="pi">:</span>
      <span class="na">skylight</span><span class="pi">:</span>
        <span class="na">value_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">is_state('sensor.skylight',</span><span class="nv"> </span><span class="s">'on')</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">turn_on</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_on</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.skylight_open</span>
        <span class="na">turn_off</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">switch.turn_off</span>
          <span class="na">target</span><span class="pi">:</span>
            <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.skylight_close</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="legacy_switch-configuration-variables" href="#legacy_switch-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> switches </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="switches" class="title-link" href="#switches"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of your switches.</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> friendly_name </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="friendly_name" class="title-link" href="#friendly_name"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Name to use in the frontend.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unique_id </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="unique_id" class="title-link" href="#unique_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>An ID that uniquely identifies this switch. Set this to a unique value to allow customization through the UI.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> value_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: optimistic</span>)</span><a name="value_template" class="title-link" href="#value_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to set the state of the switch. If not defined, the switch will optimistically assume all commands are successful.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> availability_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: true</span>)</span><a name="availability_template" class="title-link" href="#availability_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the <code>available</code> state of the entity. If the template either fails to render or returns <code>True</code>, <code>"1"</code>, <code>"true"</code>, <code>"yes"</code>, <code>"on"</code>, <code>"enable"</code>, or a non-zero number, the entity will be <code>available</code>. If the template returns any other value, the entity will be <code>unavailable</code>. If not configured, the entity will always be <code>available</code>. Note that the string comparison not case sensitive; <code>"TrUe"</code> and <code>"yEs"</code> are allowed.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> turn_on </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="turn_on" class="title-link" href="#turn_on"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action or list of actions to run when the switch is turned on.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> turn_off </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="turn_off" class="title-link" href="#turn_off"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action or list of actions to run when the switch is turned off.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> icon_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="icon_template" class="title-link" href="#icon_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template for the icon of the switch.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> entity_picture_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="entity_picture_template" class="title-link" href="#entity_picture_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template for the picture of the switch.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h2>Legacy Vacuum configuration format <a class="title-link" name="legacy-vacuum-configuration-format" href="#legacy-vacuum-configuration-format"></a>
</h2>
<p><em>This format still works but is no longer recommended. <a href="#vacuum">Use modern configuration</a>.</em></p>
<p>This format is configured as a platform for the <code>vacuum</code> integration and not directly under the <code>template</code> integration.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">vacuum</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">template</span>
    <span class="na">vacuums</span><span class="pi">:</span>
      <span class="na">living_room_vacuum</span><span class="pi">:</span>
        <span class="na">start</span><span class="pi">:</span>
          <span class="na">action</span><span class="pi">:</span> <span class="s">script.vacuum_start</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="legacy_vacuum-configuration-variables" href="#legacy_vacuum-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class=""><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> vacuums </span><span class="config-vars-type">map</span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="vacuums" class="title-link" href="#vacuums"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of your vacuums.</p>
</span></div>
<div class="nested">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> friendly_name </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="friendly_name" class="title-link" href="#friendly_name"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Name to use in the frontend.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unique_id </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="unique_id" class="title-link" href="#unique_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>An ID that uniquely identifies this vacuum. Set this to a unique value to allow customization through the UI.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> value_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="value_template" class="title-link" href="#value_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the state of the vacuum. Valid value: <code>docked</code>/<code>cleaning</code>/<code>idle</code>/<code>paused</code>/<code>returning</code>/<code>error</code></p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> battery_level_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="battery_level_template" class="title-link" href="#battery_level_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the battery level of the vacuum. Legal values are numbers between <code>0</code> and <code>100</code>.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> fan_speed_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="fan_speed_template" class="title-link" href="#fan_speed_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the fan speed of the vacuum.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> attribute_templates </span><span class="config-vars-type">map</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="attribute_templates" class="title-link" href="#attribute_templates"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines templates for attributes of the sensor.</p>
</span></div>
<div class="nested"><div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> attribute: template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="attribute-template" class="title-link" href="#attribute-template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The attribute and corresponding template.</p>
</span></div>
</div></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> availability_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: true</span>)</span><a name="availability_template" class="title-link" href="#availability_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines a template to get the <code>available</code> state of the entity. If the template either fails to render or returns <code>True</code>, <code>"1"</code>, <code>"true"</code>, <code>"yes"</code>, <code>"on"</code>, <code>"enable"</code>, or a non-zero number, the entity will be <code>available</code>. If the template returns any other value, the entity will be <code>unavailable</code>. If not configured, the entity will always be <code>available</code>. Note that the string comparison not case sensitive; <code>"TrUe"</code> and <code>"yEs"</code> are allowed.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> start </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="start" class="title-link" href="#start"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the vacuum is started.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> pause </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="pause" class="title-link" href="#pause"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the vacuum is paused.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> stop </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="stop" class="title-link" href="#stop"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the vacuum is stopped.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> return_to_base </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="return_to_base" class="title-link" href="#return_to_base"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the vacuum is given a return to base command.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> clean_spot </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="clean_spot" class="title-link" href="#clean_spot"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the vacuum is given a clean spot command.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> locate </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="locate" class="title-link" href="#locate"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the vacuum is given a locate command.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> set_fan_speed </span><span class="config-vars-type"><a href="/docs/scripts/">action</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="set_fan_speed" class="title-link" href="#set_fan_speed"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Defines an action to run when the vacuum is given a command to set the fan speed.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> fan_speeds </span><span class="config-vars-type">string | list</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="fan_speeds" class="title-link" href="#fan_speeds"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>List of fan speeds supported by the vacuum.</p>
</span></div>
</div>
</div>
</div></div>
</div>
<h2>Legacy Weather configuration format <a class="title-link" name="legacy-weather-configuration-format" href="#legacy-weather-configuration-format"></a>
</h2>
<p><em>This format still works but is no longer recommended. <a href="#weather">Use modern configuration</a>.</em></p>
<p>This format is configured as a platform for the <code>weather</code> integration and not directly under the <code>template</code> integration.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="c1"># Example configuration.yaml entry</span>
<span class="na">weather</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">template</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">My</span><span class="nv"> </span><span class="s">Weather</span><span class="nv"> </span><span class="s">Station"</span>
    <span class="na">condition_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('weather.my_region')</span><span class="nv"> </span><span class="s">}}"</span>
    <span class="na">temperature_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.temperature')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float</span><span class="nv"> </span><span class="s">}}"</span>
    <span class="na">temperature_unit</span><span class="pi">:</span> <span class="s2">"</span><span class="s">°C"</span>
    <span class="na">humidity_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">states('sensor.humidity')</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">float</span><span class="nv"> </span><span class="s">}}"</span>
    <span class="na">forecast_daily_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('weather.my_region',</span><span class="nv"> </span><span class="s">'forecast_data')</span><span class="nv"> </span><span class="s">}}"</span>
</code></pre></div></div>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="legacy_weather-configuration-variables" href="#legacy_weather-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class="">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> name </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="name" class="title-link" href="#name"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Name to use in the frontend.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> unique_id </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="unique_id" class="title-link" href="#unique_id"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>An ID that uniquely identifies this weather entity. Set this to a unique value to allow customization through the UI.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> condition_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="condition_template" class="title-link" href="#condition_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current weather condition.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> temperature_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="temperature_template" class="title-link" href="#temperature_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current temperature.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> dew_point_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="dew_point_template" class="title-link" href="#dew_point_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current dew point.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> apparent_temperature_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="apparent_temperature_template" class="title-link" href="#apparent_temperature_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current apparent (feels-like) temperature.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> temperature_unit </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="temperature_unit" class="title-link" href="#temperature_unit"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Unit for temperature_template output. Valid options are °C, °F, and K.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> humidity_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> <span class="true">Required</span><span class="default"></span></span><a name="humidity_template" class="title-link" href="#humidity_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current humidity.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> attribution_template </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="attribution_template" class="title-link" href="#attribution_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The attribution to be shown in the frontend.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> pressure_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="pressure_template" class="title-link" href="#pressure_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current air pressure.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> pressure_unit </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="pressure_unit" class="title-link" href="#pressure_unit"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Unit for pressure_template output. Valid options are Pa, hPa, kPa, bar, cbar, mbar, mmHg, inHg, psi.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> wind_speed_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="wind_speed_template" class="title-link" href="#wind_speed_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current wind speed.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> wind_gust_speed_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="wind_gust_speed_template" class="title-link" href="#wind_gust_speed_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current wind gust speed.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> wind_speed_unit </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="wind_speed_unit" class="title-link" href="#wind_speed_unit"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Unit for wind_speed_template output. Valid options are m/s, km/h, mph, mm/d, in/d, and in/h.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> wind_bearing_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="wind_bearing_template" class="title-link" href="#wind_bearing_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current wind bearing.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> ozone_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="ozone_template" class="title-link" href="#ozone_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current ozone level.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> cloud_coverage_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="cloud_coverage_template" class="title-link" href="#cloud_coverage_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current cloud coverage.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> visibility_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="visibility_template" class="title-link" href="#visibility_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The current visibility.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> visibility_unit </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="visibility_unit" class="title-link" href="#visibility_unit"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Unit for visibility_template output. Valid options are km, mi, ft, m, cm, mm, in, yd.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> forecast_daily_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="forecast_daily_template" class="title-link" href="#forecast_daily_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Daily forecast data.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> forecast_hourly_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="forecast_hourly_template" class="title-link" href="#forecast_hourly_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Hourly forecast data.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> forecast_twice_daily_template </span><span class="config-vars-type"><a href="/docs/configuration/templating/">template</a></span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="forecast_twice_daily_template" class="title-link" href="#forecast_twice_daily_template"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Twice daily forecast data.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> precipitation_unit </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="precipitation_unit" class="title-link" href="#precipitation_unit"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Unit for precipitation output. Valid options are km, mi, ft, m, cm, mm, in, yd.</p>
</span></div>
</div>
</div>
</div>


  

<div class="text related-topics">
  <h2>Related topics<a class="title-link" href="#related-topics" name="related-topics"></a>
</h2>
  <ul>
    
    
    
    
    
    <li>
      <a href="/needlehack-blog/docs/configuration/" class="topic">
        Configuration file
      </a>
    </li>
    
    
    
    
    
    
    <li>
      <a href="/needlehack-blog/docs/blueprint/" class="topic">
        About blueprints
      </a>
    </li>
    </ul>
</div>


  
<div class="material-card text feedback">
  <h4>
<iconify-icon inline icon="mdi:feedback" title="Feedback"></iconify-icon> <b> Help us improve our documentation</b><a href="#feedback_section" class="title-link" name="feedback_section"></a>
</h4>
  Suggest an edit to this page, or provide/view feedback for this page.
  <div class="links">
    <ul aria-label="Page feedback options">
    <li><a href="https://github.com/home-assistant/home-assistant.io/tree/current/source/_integrations/template.markdown" target="_blank" title="Edit this page"><iconify-icon inline icon="mdi:edit"></iconify-icon> Edit</a></li>
    
    <li><a href="https://github.com/home-assistant/home-assistant.io/issues/new?template=feedback.yml&amp;url=https%3A%2F%2Fivangrod.github.io%2Fintegrations%2Ftemplate%2F&amp;version=2025.9.4&amp;labels=current,integration%3A%20template" target="_blank" title="Provide feedback on this page"><iconify-icon inline icon="mdi:comment-edit-outline"></iconify-icon> Provide feedback</a></li>
    <li><a href="https://github.com/home-assistant/home-assistant.io/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3A%22integration%3A+template%22" target="_blank" title="View pending feedback for this page"><iconify-icon inline icon="mdi:comment-text-multiple-outline"></iconify-icon> View pending feedback</a></li>
    
  </ul>
  </div>
</div>


</article>

            
          </div>


          
            
              <aside id="integration-sidebar" class="grid__item one-third desk-wide-one-quarter lap-one-whole palm-one-whole">
              
            <div class="grid">
  




  


<section class="aside-module grid__item one-whole lap-one-half">
  <div class='brand-logo-container section'>
      <img src='https://brands.home-assistant.io/_/template//logo.png' srcset='https://brands.home-assistant.io/_/template/logo@2x.png 2x' /><a href='https://my.home-assistant.io/redirect/config_flow_start?domain=template' class='my badge' target='_blank'><img src='https://my.home-assistant.io/badges/config_flow_start.svg' /></a></div>

  <div class='section'>The Template  helper  was introduced in Home Assistant 0.12, and it's used by <a title="Open analytics.home-assistant.io" href="https://analytics.home-assistant.io/integrations" target="_blank" rel="noopener">
        
          30.6%</a> of the active installations.
        
      
    
  </div>
    <div class='section'>
      <iconify-icon icon='mdi:upload-network-outline'></iconify-icon>&nbsp;Its IoT class is <a href='/blog/2016/02/12/classifying-the-internet-of-things/#classifiers'>Local Push.</a>
    </div>
  <div class='section'>
    <a href='/docs/quality_scale/#-internal'>🏠 Internal integration</a><br /></div>
  <div class='section'>
    <a href="https://github.com/home-assistant/core/tree/dev/homeassistant/components/template" target="_blank"><iconify-icon inline icon='simple-icons:github' title='Github'></iconify-icon> View source on GitHub</a><br />
    <a href="https://github.com/home-assistant/core/issues?q=is%3Aissue+is%3Aopen+label%3A%22integration%3A+template%22" target="_blank"><iconify-icon inline icon='mdi:bug' title='Bug'></iconify-icon> View known issues</a>
  </div></section>

<section class="aside-module grid__item one-whole lap-one-half">
  <div class='section'>
    <h1 class="title epsilon"><iconify-icon inline icon='mdi:person-heart' title='Person heart'></iconify-icon> Integration owners</h1>
    
        
        

          
          <div class="section">
            This integration is being maintained by the Home Assistant project.
          </div>
        
    
  </div>
</section>






  <section id="toc-module" class="aside-module grid__item one-whole lap-one-half">
        <div class='section'>
          <h1 class="title epsilon"><iconify-icon inline icon='mdi:toc' title='Toc'></iconify-icon> On this page</h1>
          <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#configuration">Configuration</a></li>
<li class="toc-entry toc-h2"><a href="#yaml-configuration">YAML configuration</a>
<ul>
<li class="toc-entry toc-h3"><a href="#state-based-template-entities">State-based template entities</a></li>
<li class="toc-entry toc-h3"><a href="#trigger-based-template-entities">Trigger-based template entities</a></li>
<li class="toc-entry toc-h3"><a href="#configuration-reference">Configuration reference</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#common-device-configuration-options">Common Device Configuration Options</a></li>
<li class="toc-entry toc-h2"><a href="#alarm-control-panel">Alarm Control Panel</a></li>
<li class="toc-entry toc-h2"><a href="#binary-sensor">Binary Sensor</a>
<ul>
<li class="toc-entry toc-h3"><a href="#state-based-binary-sensor---washing-machine-running">State based binary sensor - Washing Machine Running</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-binary-sensor---is-anyone-home">State based binary sensor - Is Anyone Home</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-binary-sensor---device-tracker-sensor-with-latitude-and-longitude-attributes">State based binary sensor - device tracker sensor with latitude and longitude attributes</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-binary-sensor---change-the-icon-when-a-state-changes">State based binary sensor - Change the icon when a state changes</a></li>
<li class="toc-entry toc-h3"><a href="#trigger-based-binary-sensor---change-state-and-icon-when-a-custom-event-is-received">Trigger based binary sensor - Change state and icon when a custom event is received</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#button">Button</a></li>
<li class="toc-entry toc-h2"><a href="#cover">Cover</a>
<ul>
<li class="toc-entry toc-h3"><a href="#cover-optimistic-mode">Cover Optimistic Mode</a></li>
<li class="toc-entry toc-h3"><a href="#combining-state-and-position-templates">Combining state and position templates</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-cover---garage-door">State based cover - Garage Door</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-cover---optimistic-garage-door-with-momentary-switch">State based cover - Optimistic Garage Door with Momentary Switch</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#event">Event</a></li>
<li class="toc-entry toc-h2"><a href="#fan">Fan</a>
<ul>
<li class="toc-entry toc-h3"><a href="#converting-from-speeds-to-percentage">Converting from speeds to percentage</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-fan---helper-fan">State based fan - Helper fan</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-fan---fan-with-preset-modes">State based fan - Fan with preset modes</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#image">Image</a></li>
<li class="toc-entry toc-h2"><a href="#light">Light</a>
<ul>
<li class="toc-entry toc-h3"><a href="#light-considerations">Light Considerations</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-light---theater-volume-control">State based light - Theater Volume Control</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-light---make-a-global-light-entity-for-a-multi-segment-wled-light">State based light - Make a global light entity for a multi-segment WLED light</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#lock">Lock</a>
<ul>
<li class="toc-entry toc-h3"><a href="#state-based-lock---lock-from-a-switch">State based lock - Lock from a switch</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-lock---optimistic-mode">State based lock - Optimistic mode</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-lock---sensor-and-two-switches">State based lock - Sensor and Two Switches</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-lock---secret-code">State based lock - Secret code</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#number">Number</a>
<ul>
<li class="toc-entry toc-h3"><a href="#state-based-number---changing-the-unit-of-measurement-of-another-number">State based number - Changing the unit of measurement of another number</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#select">Select</a>
<ul>
<li class="toc-entry toc-h3"><a href="#state-based-select---control-daynight-mode-of-a-camera">State based select - Control Day/Night mode of a camera</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#sensor">Sensor</a>
<ul>
<li class="toc-entry toc-h3"><a href="#state-based-sensor---exposing-sun-angle">State based sensor - Exposing sun angle</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-sensor---modifying-another-sensors-output">State based sensor - Modifying another sensor’s output</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-sensor---changing-the-unit-of-measurement-of-another-sensor">State based sensor - Changing the unit of measurement of another sensor</a></li>
<li class="toc-entry toc-h3"><a href="#trigger-based-sensor---using-conditions-to-control-updates">Trigger based sensor - Using conditions to control updates</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#switch">Switch</a>
<ul>
<li class="toc-entry toc-h3"><a href="#state-based-switch---invert-a-switch">State based switch - Invert a Switch</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-switch---toggle-switch">State based switch - Toggle Switch</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-switch---sensor-and-two-switches">State based switch - Sensor and Two Switches</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-switch---optimistic-switch">State based switch - Optimistic Switch</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#update">Update</a></li>
<li class="toc-entry toc-h2"><a href="#vacuum">Vacuum</a>
<ul>
<li class="toc-entry toc-h3"><a href="#state-based-vacuum---control-vacuum-with-harmony-hub">State based vacuum - Control vacuum with Harmony Hub</a></li>
<li class="toc-entry toc-h3"><a href="#state-based-vacuum---custom-attributes">State based vacuum - Custom attributes</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#weather">Weather</a>
<ul>
<li class="toc-entry toc-h3"><a href="#trigger-based-weather---weather-forecast-from-response-data">Trigger based weather - Weather Forecast from response data</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#combining-multiple-template-entities">Combining multiple template entities</a>
<ul>
<li class="toc-entry toc-h3"><a href="#trigger-based-sensor-and-binary-sensor-storing-webhook-information">Trigger based sensor and binary sensor storing webhook information</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#template-and-action-variables">Template and action variables</a>
<ul>
<li class="toc-entry toc-h3"><a href="#self-referencing">Self referencing</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#optimistic-mode">Optimistic mode</a></li>
<li class="toc-entry toc-h2"><a href="#rate-limiting-updates">Rate limiting updates</a></li>
<li class="toc-entry toc-h2"><a href="#considerations">Considerations</a>
<ul>
<li class="toc-entry toc-h3"><a href="#startup">Startup</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#using-blueprints">Using blueprints</a>
<ul>
<li class="toc-entry toc-h3"><a href="#importing-blueprints">Importing blueprints</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#event-event_template_reloaded">Event event_template_reloaded</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-alarm-control-panel-configuration-format">Legacy Alarm Control Panel configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-binary-sensor-configuration-format">Legacy Binary Sensor configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-cover-configuration-format">Legacy Cover configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-fan-configuration-format">Legacy Fan configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-light-configuration-format">Legacy Light configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-lock-configuration-format">Legacy Lock configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-sensor-configuration-format">Legacy Sensor configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-switch-configuration-format">Legacy Switch configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-vacuum-configuration-format">Legacy Vacuum configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#legacy-weather-configuration-format">Legacy Weather configuration format</a></li>
<li class="toc-entry toc-h2"><a href="#related-topics">Related topics</a></li>
</ul>
        </div>
      </section><section id="category-module" class="aside-module grid__item one-whole lap-one-half">
      <div class='section'>
        <h1 class="title epsilon"><iconify-icon inline icon='mdi:category' title='Category'></iconify-icon> Categories</h1>
        <ul class='divided'><li>
            <a href='/integrations/#alarm-control-panel'>Alarm Control Panel</a>
          </li><li>
            <a href='/integrations/#binary-sensor'>Binary sensor</a>
          </li><li>
            <a href='/integrations/#button'>Button</a>
          </li><li>
            <a href='/integrations/#cover'>Cover</a>
          </li><li>
            <a href='/integrations/#event'>Event</a>
          </li><li>
            <a href='/integrations/#fan'>Fan</a>
          </li><li>
            <a href='/integrations/#helper'>Helper</a>
          </li><li>
            <a href='/integrations/#image'>Image</a>
          </li><li>
            <a href='/integrations/#light'>Light</a>
          </li><li>
            <a href='/integrations/#lock'>Lock</a>
          </li><li>
            <a href='/integrations/#number'>Number</a>
          </li><li>
            <a href='/integrations/#select'>Select</a>
          </li><li>
            <a href='/integrations/#sensor'>Sensor</a>
          </li><li>
            <a href='/integrations/#switch'>Switch</a>
          </li><li>
            <a href='/integrations/#update'>Update</a>
          </li><li>
            <a href='/integrations/#vacuum'>Vacuum</a>
          </li><li>
            <a href='/integrations/#weather'>Weather</a>
          </li></ul>
      </div>
    </section></div>

          </aside>
          
        </div>
      </div>

      <footer>
        <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="skyline grid">
        <div class="skyline grid__item one-whole">
          <div class="footer-skyline">
          </div>
        </div>
      </div>
      <div class="footer-nav grid">
        <div class="company grid__item one-quarter lap-one-half palm-one-whole">
          <div class="title">
            <img
              src="/needlehack-blog/images/footer-logo-text.svg"
              height="72"
              alt="Home Assistant"
            />
          </div>
          <p>
            Home Assistant is a project from the <a href="https://www.openhomefoundation.org/">Open Home Foundation</a>, sponsored by <a href="https://www.nabucasa.com/">Nabu Casa</a>.
          </p>
        </div>

        <div class="grid__item one-quarter lap-one-half palm-one-whole">
          <h3>Join us and contribute!</h3>
          <ul>
            <li><a class="external-link" href="https://github.com/home-assistant/">GitHub repo <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://developers.home-assistant.io">Developers Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://design.home-assistant.io">Design Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://data.home-assistant.io">Data Science Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://community.home-assistant.io">Community Forum <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://creators.home-assistant.io/">Creator Network <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://works-with.home-assistant.io/">Works With Home Assistant <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a href="/needlehack-blog/community">Our community</li>
            <li><a href="/needlehack-blog/help/reporting_issues/">Reporting issues</a></li>
          </ul>
          <h3>System status</h3>
          <ul>
            <li>
              <a class="external-link"  href="https://alerts.home-assistant.io">Integration Alerts <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a>
            </li>
            <li><a href="/needlehack-blog/security/">Security Alerts</a></li>
            <li>
              <a class="external-link" href="https://status.home-assistant.io">System Status <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a>
            </li>
          </ul>
        </div>

        <div class="grid__item one-quarter lap-one-half palm-one-whole">
          <h3>Companion apps</h3>
          <ul>
            <li><a class="external-link" href="https://apps.apple.com/us/app/home-assistant/id1099568401">iOS and Apple devices</a></li>
            <li><a class="external-link" href="https://play.google.com/store/apps/details?id=io.homeassistant.companion.android">Android and Wear OS</a></li>
            <li><a class="external-link" href="https://companion.home-assistant.io/">...and more!</a></li>
          </ul>
          <h3>Governance</h3>
          <ul>
            <li><a href="/needlehack-blog/privacy/">Privacy Notices</a></li>
            <li><a href="/needlehack-blog/developers/cla/">Contributor License Agreement</a></li>
            <li><a href="/needlehack-blog/tos/">Terms of Service</a></li>
            <li><a href="/needlehack-blog/code_of_conduct/">Code of Conduct</a></li>
            <li><a href="/needlehack-blog/developers/credits/">Credits</a></li>
            <li><a href="/needlehack-blog/developers/license/">License</a></li>
          </ul>
        </div>

        <div class="socials grid__item one-quarter lap-one-half palm-one-whole">

          <h3>Follow us</h3>
          <p><a class="external-link" href='https://newsletter.openhomefoundation.org/#/portal'>Sign up for our newsletter <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></p>
          <div class="icons">
            <a
              rel="me"
              href="https://youtube.com/@home_assistant"
              title="YouTube"
              target="_blank"
              ><iconify-icon icon="simple-icons:youtube"></iconify-icon></a>
            <a
              rel="me"
              href="https://reddit.com/r/homeassistant"
              title="Reddit"
              target="_blank"
              ><iconify-icon icon="simple-icons:reddit"></iconify-icon></a>
            <a
              rel="me"
              href="https://github.com/home-assistant/home-assistant"
              title="GitHub"
              target="_blank"
              ><iconify-icon icon="simple-icons:github"></iconify-icon></a>
            <br />
            <a
              rel="me"
              href="https://fosstodon.org/@homeassistant"
              title="Mastodon"
              target="_blank"
              ><iconify-icon icon="simple-icons:mastodon"></iconify-icon></a>
            <a
              rel="me"
              href="https://bsky.app/profile/home-assistant.io"
              title="Bluesky"
              target="_blank"
             ><iconify-icon icon="simple-icons:bluesky"></iconify-icon></a>
            <a
              rel="me"
              href="https://x.com/home_assistant"
              title="X"
              target="_blank"
             ><iconify-icon icon="simple-icons:x"></iconify-icon></a>
            <br />
            <a
              rel="me"
              href="https://www.facebook.com/homeassistantio"
              title="Facebook"
              target="_blank"
              ><iconify-icon icon="simple-icons:facebook"></iconify-icon></a>
            <a
              rel="me"
              href="https://www.instagram.com/homeassistant/"
              title="Instagram"
              target="_blank"
              ><iconify-icon icon="simple-icons:instagram"></iconify-icon></a>
            <a
              rel="me"
              href="https://www.linkedin.com/company/home-assistant"
              title="LinkedIn"
              target="_blank"
              ><iconify-icon icon="simple-icons:linkedin"></iconify-icon></a>
          </div>

          <div class="web-notice">
            <p>
              For partnership inquiries please check out <a href="https://works-with.home-assistant.io/">Works With Home Assistant</a>. For media, get in touch <a href="mailto:media@openhomefoundation.org">here</a>. For other questions, you can contact us <a href="mailto:hello@home-assistant.io">here</a> (No technical support!)
            </p>
            <p>
              Website powered by <a href="https://jekyllrb.com/">Jekyll</a><br />
              Originally based on the <a href="https://github.com/coogie/oscailte">Oscailte theme</a>
            </p>
            <a href="https://www.netlify.com">
              <img
                src="/needlehack-blog/images/frontpage/netlify.svg"
                alt="Deploys by Netlify Badge"
              />
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

      </footer>

    </div>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@justinribeiro/lite-youtube@1.3.1/lite-youtube.js"></script>

<script src="/needlehack-blog/javascripts/terminology_tooltip.js' | cache_buster" type="text/javascript" defer></script>

<script src="/needlehack-blog/javascripts/prism.js' | cache_buster" type="text/javascript" defer></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@3/dist/umd/index.min.js"></script>
<script type="text/javascript">
  docsearch({
    container: '#docsearch',
    appId: 'FBHBYS3J0U',
    indexName: 'home-assistant',
    apiKey: "ba6f7e6d97b3d3d2f778978c742a47c6",
  });
  document.querySelector('.site-title').addEventListener('contextmenu', function (ev) {
    ev.preventDefault();
    document.location.assign("https://design.home-assistant.io/#brand/logo")
  });
</script>




<script type="text/javascript">
  {
    const article = document.querySelector("article.post");
    if (article) {
      const iframes = article.querySelectorAll("iframe[data-src]");
      let loaded = false;
      if (iframes) {
        document.addEventListener('mousemove', loadLazyFrames, { passive: true, once: true });
        document.addEventListener('touchmove', loadLazyFrames, { passive: true, once: true });
        document.addEventListener('scroll', loadLazyFrames, { passive: true, once: true });
  
        function loadLazyFrames() {
          if (loaded) return;
          loaded = true;
  
          iframes.forEach((iframe) => {
            const src = iframe.getAttribute("data-src");
            if (src) {
              iframe.setAttribute("src", src);
              iframe.removeAttribute("data-src");
            }
          });
        }
      }
    }
  }
</script>

  </body>
</html>
