



<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Xiaomi Gateway (Aqara) - Home Assistant</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Instructions for how to integrate the Xiaomi Gateway (Aqara) within Home Assistant.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://www.home-assistant.io/integrations/xiaomi_aqara/">

    <meta property="fb:app_id" content="338291289691179">
    <meta property="og:title" content="Xiaomi Gateway (Aqara)">
    <meta property="og:site_name" content="Home Assistant">
    <meta property="og:url" content="https://www.home-assistant.io/integrations/xiaomi_aqara/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Instructions for how to integrate the Xiaomi Gateway (Aqara) within Home Assistant.">
    <meta property="og:image" content="https://ivangrod.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@home_assistant">
    
    <meta name="twitter:title" content="Xiaomi Gateway (Aqara)">
    <meta name="twitter:description" content="Instructions for how to integrate the Xiaomi Gateway (Aqara) within Home Assistant.">
    <meta name="twitter:image" content="https://ivangrod.github.io/images/default-social.png">
    <link rel="me" href="https://fosstodon.org/@homeassistant">

    <link href="https://cdn.jsdelivr.net/npm/@docsearch/css@3/dist/style.min.css" rel="stylesheet" />
    <link href="/needlehack-blog/stylesheets/prism.css | cache_buster" rel="stylesheet">
    <link href="/needlehack-blog/stylesheets/screen.css' | cache_buster" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Home Assistant" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&amp;family=Instrument+Sans:ital,wdth,wght@0,99,400..700;1,99,400..700&amp;" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/2.1.0/iconify-icon.min.js"></script>
  </head>

  <body  class=" integration-page  ">
    <header class='site-header '>
      



<div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/needlehack-blog/" class="site-title">
        <div class="logo"></div>
      </a>
      <a class="release-date" href="/blog/2025/09/03/release-20259/" title="Latest version 2025.9.4 released September 19, 2025">
        2025.9.4
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle" />
        <label
          for="toggle"
          class="toggle"
          data-open="Main Menu"
          data-close="⨉"
        ></label>
        <ul class="menu pull-right">
          <li><a  href="/needlehack-blog/installation/">Getting started</a></li>
          <li>
            <a  href="/needlehack-blog/docs/">Documentation <iconify-icon inline icon='mdi:chevron-down' title='Chevron down'></iconify-icon></a>
            <ul>
              <li><a href="/needlehack-blog/installation/"><iconify-icon inline icon='simple-icons:homeassistant' title='Homeassistant'></iconify-icon> Installation</a></li>
              <li><a href="/needlehack-blog/docs/automation/"><iconify-icon inline icon='mdi:robot-happy' title='Robot happy'></iconify-icon> Automations</a></li>
              <li><a href="/needlehack-blog/dashboards/"><iconify-icon inline icon='mdi:gauge' title='Gauge'></iconify-icon> Dashboards</a></li>
              <li><a href="/needlehack-blog/voice_control/"><iconify-icon inline icon='mdi:comment-processing-outline' title='Comment processing outline'></iconify-icon> Voice assistants</a></li>
              <li><a href="/needlehack-blog/docs/organizing/"><iconify-icon inline icon='mdi:view-grid' title='View grid'></iconify-icon> Device organization</a></li>
              <li><a href="/needlehack-blog/docs/energy/"><iconify-icon inline icon='mdi:solar-power-variant' title='Solar power variant'></iconify-icon> Energy management</a></li>
              <li><a href="/needlehack-blog/docs/configuration/"><iconify-icon inline icon='mdi:cog' title='Cog'></iconify-icon> Advanced configuration</a></li>
            </ul>
          </li>
          <li><a class="active" href="/needlehack-blog/integrations/">Integrations</a></li>
          <li><a  href="/needlehack-blog/blog/">Blog</a></li>
          <li><a  href="/needlehack-blog/help/">Need help?</a></li>
          <li>
            <div class="docsearch" id="docsearch"></div>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>

    </header>

    <div class="page-content">

      

      <div class="grid-wrapper">
        <div class="grid grid-center">

          <aside id="toc-bar" class="grid__item desk-wide-one-sixth">
                <section class="aside-module grid__item one-whole">
                  <div class='section'>
                    <h1 class="title epsilon"><iconify-icon inline icon='mdi:toc' title='Toc'></iconify-icon> On this page</h1>
                    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#supported-devices">Supported devices</a></li>
<li class="toc-entry toc-h2"><a href="#unsupported-devices">Unsupported devices</a></li>
<li class="toc-entry toc-h2"><a href="#setup">Setup</a></li>
<li class="toc-entry toc-h2"><a href="#entities">Entities</a>
<ul>
<li class="toc-entry toc-h3"><a href="#covers">Covers</a></li>
<li class="toc-entry toc-h3"><a href="#lights">Lights</a></li>
<li class="toc-entry toc-h3"><a href="#locks">Locks</a></li>
<li class="toc-entry toc-h3"><a href="#binary-sensors">Binary sensors</a></li>
<li class="toc-entry toc-h3"><a href="#sensors">Sensors</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#switches">Switches</a></li>
<li class="toc-entry toc-h2"><a href="#actions">Actions</a>
<ul>
<li class="toc-entry toc-h3"><a href="#action-xiaomi_aqaraplay_ringtone">Action xiaomi_aqara.play_ringtone</a></li>
<li class="toc-entry toc-h3"><a href="#action-xiaomi_aqarastop_ringtone">Action xiaomi_aqara.stop_ringtone</a></li>
<li class="toc-entry toc-h3"><a href="#action-xiaomi_aqaraadd_device">Action xiaomi_aqara.add_device</a></li>
<li class="toc-entry toc-h3"><a href="#action-xiaomi_aqararemove_device">Action xiaomi_aqara.remove_device</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#examples">Examples</a>
<ul>
<li class="toc-entry toc-h3"><a href="#long-press-on-smart-button-1st-generation">Long press on smart button 1st generation</a></li>
<li class="toc-entry toc-h3"><a href="#double-click-on-smart-button">Double click on smart button</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#troubleshooting">Troubleshooting</a>
<ul>
<li class="toc-entry toc-h3"><a href="#initial-setup-problem">Initial setup problem</a></li>
<li class="toc-entry toc-h3"><a href="#connection-problem">Connection problem</a></li>
</ul>
</li>
</ul>
                  </div>
                </section>
              </aside> 

          
          <div class="grid__item two-thirds desk-wide-seven-twelfths lap-one-whole palm-one-whole">
          

            
              <article class="page">
  
  <header>
    
    
      <div class="breadcrumbs">
        <a href="/needlehack-blog/">Home</a>
        
          
            
            ▸ <a href="/integrations/">Integrations</a>
          
        
          
            ▸ 
          
        
      </div>
    
    <h1 class="title indent">
      
        Xiaomi Gateway (Aqara)
      
    </h1>
  </header>
  
    
    
    
  
  
  <p>The <strong>Xiaomi Gateway (Aqara)</strong> <span class="terminology">integration<span class="terminology-tooltip">Integrations connect and integrate Home Assistant with your devices, services, and more.<a class="terminology-link" href="/getting-started/concepts-terminology/#integrations"> [Learn more]</a></span></span> allows you to integrate <a href="https://www.mi.com/en/" rel="external nofollow">Xiaomi<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> Aqara-compatible devices into Home Assistant.</p>
<div class="alert alert-note">
  <p class="alert-title"><iconify-icon inline icon="mdi:information-outline"></iconify-icon> Note</p>
  <div class="alert-content">
<p>There are two versions of the hub: v1 and v2.</p>
<ul>
<li>
<p>v1 can be used with Home Assistant without any problems.</p>
</li>
<li>
<p>v2 might be less straightforward when it comes to enabling the local API. It might even require you to open up your device to do so. Xiaomi has suggested this is in the pipeline. If you have a Hub 2 and are experiencing issues, check out the <a href="#troubleshooting">troubleshooting</a> section.</p>
</li>
</ul>
</div>


</div>
<h2>Supported devices <a class="title-link" name="supported-devices" href="#supported-devices"></a>
</h2>
<ul>
<li>Aqara Air Conditioning Companion (lumi.acpartner.v3)</li>
<li>Aqara Intelligent Door Lock (lock.aq1)</li>
<li>Aqara Wall Switch (Double)</li>
<li>Aqara Wall Switch (Single)</li>
<li>Aqara Wall Switch LN (Double)</li>
<li>Aqara Wall Switch LN (Single)</li>
<li>Aqara Wireless Switch (Double)</li>
<li>Aqara Wireless Switch (Single)</li>
<li>Battery</li>
<li>Button 1st generation (Single, Double, Long Click)</li>
<li>Button 2nd generation (Single, Double)</li>
<li>Cube</li>
<li>Door and Window Sensor (1st and 2nd generation)</li>
<li>Gas Leak Detector (reports alarm and density)</li>
<li>Gateway (Light, Illumination Sensor, Ringtone play)</li>
<li>Intelligent Curtain</li>
<li>Motion Sensor (1st and 2nd generation)</li>
<li>Plug aka Socket (Zigbee version, reports power consumed, power load, state and if the device is in use)</li>
<li>Smoke Detector (reports alarm and density)</li>
<li>Temperature and Humidity Sensor (1st and 2nd generation)</li>
<li>Vibration Sensor</li>
<li>Wall Plug (reports power consumed, power load, and state)</li>
<li>Water Leak Sensor</li>
<li>Xiaomi Mijia Gateway (lumi.gateway.v2, lumi.gateway.v3)</li>
</ul>
<h2>Unsupported devices <a class="title-link" name="unsupported-devices" href="#unsupported-devices"></a>
</h2>
<ul>
<li>Xiaomi Aqara Gateway (lumi.gateway.aqhm01), as it is not possible to activate dev mode in the Mi Home App.</li>
<li>Gateway Radio</li>
<li>Gateway Button</li>
<li>Xiaomi Mi Air Conditioning Companion (lumi.acpartner.v2)</li>
<li>Aqara Intelligent Air Conditioner Controller Hub (lumi.acpartner.v1)</li>
<li>Decoupled mode of the Aqara Wall Switches (Single &amp; Double)</li>
<li>Additional alarm events of the Gas and Smoke Detector: Analog alarm, battery fault alarm (smoke detector only), sensitivity fault alarm, I2C communication failure</li>
</ul>
<h2>Setup <a class="title-link" name="setup" href="#setup"></a>
</h2>
<p>Follow the setup process using your phone and Mi-Home app. From here you will be able to retrieve the key (password) from within the app following <a href="https://www.domoticz.com/wiki/Xiaomi_Gateway_(Aqara)#Adding_the_Xiaomi_Gateway_to_Domoticz" rel="external nofollow">this tutorial<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</p>
<p>To enable Xiaomi Gateway (Aqara) in your installation, go to <strong>Settings</strong> &gt; <strong>Devices &amp; services</strong>. Xiaomi Aqara gateways should be discovered automatically and should show up in the overview. Hit configure and go through the steps to specify the optional settings. If your Aqara gateway does not show up automatically, click the + icon in the lower right. Then, search for “xiaomi_aqara” and enter the setup. Multiple gateways can be configured by simply repeating the setup multiple times.</p>
<div class="config-vars">
  <h4>
    Configuration Variables <a class="title-link" name="xiaomi_aqara-configuration-variables" href="#xiaomi_aqara-configuration-variables"></a>
  </h4>
  <div class="configuration-link">
    <a href="{{site.baseurl}}/docs/configuration/" target="_blank">Looking for your configuration file?</a>
  </div>
  <div class="">
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> interface </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default">, default: any</span>)</span><a name="interface" class="title-link" href="#interface"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Which network interface to use.</p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> key </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="key" class="title-link" href="#key"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>The key of your gateway. <em>Optional if only using sensors and/or binary sensors.</em></p>
</span></div>
</div>
<div class="config-vars-item">
<div class="config-vars-label">
<span class="config-vars-label-name"> name </span><span class="config-vars-type">string</span><span class="config-vars-required"> (<span class="false">Optional</span><span class="default"></span>)</span><a name="name" class="title-link" href="#name"></a>
</div>
<div class="config-vars-description-and-children"><span class="config-vars-description"><p>Name of the Gateway</p>
</span></div>
</div>
</div>
</div>
<h2>Entities <a class="title-link" name="entities" href="#entities"></a>
</h2>
<p>The Xiaomi Gateway (Aqara) integration supports the following entities.</p>
<h3>Covers <a class="title-link" name="covers" href="#covers"></a>
</h3>
<p>The cover entity allows you to control connected Aquara covers. You can do the following:</p>
<ul>
<li>Open the cover.</li>
<li>Close the cover.</li>
<li>Stop the cover motion.</li>
<li>Move the cover to a specific position.</li>
<li>See the current position of the cover.</li>
</ul>
<h3>Lights <a class="title-link" name="lights" href="#lights"></a>
</h3>
<p>The light entity allows you to control the internal light of the Xiaomi gateway. The entity is called <code>light.gateway_light_28ffffffffff</code>. You can do the following:</p>
<ul>
<li>Turn the light on and off.</li>
<li>Set the brightness.</li>
<li>Set the color using HS or RGB color coding.</li>
</ul>
<p>The requirement is that you have setup <a href="/integrations/xiaomi_aqara/">Xiaomi aqara</a>.</p>
<h3>Locks <a class="title-link" name="locks" href="#locks"></a>
</h3>
<p>An Aqara lock cannot be controlled by Home Assistant. However, the lock entity allows you to view the following data:</p>
<ul>
<li>
<p>The property <code>changed_by</code> provides the user/key ID of the last successful unlock.</p>
</li>
<li>
<p>If someone tries to unlock the device but fails more than 3 times, the <code>verified_wrong_times</code> attribute will be incremented. The counter resets on a successful unlock.</p>
</li>
</ul>
<h3>Binary sensors <a class="title-link" name="binary-sensors" href="#binary-sensors"></a>
</h3>
<p>The binary sensor entities allow you to get data from your <a href="https://www.mi.com/en/" rel="external nofollow">Xiaomi<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> binary sensors.</p>
<h4>Type of binary sensors supported <a class="title-link" name="type-of-binary-sensors-supported" href="#type-of-binary-sensors-supported"></a>
</h4>
<p>List of supported binary sensors, including the following properties (if available): name, model no., Zigbee entity, states, and, event, event, key, and event values.</p>
<ul>
<li>
<p><strong>Motion Sensor (1st gen)</strong></p>
<ul>
<li>Model no.: RTCGQ01LM</li>
<li>Zigbee entity: motion</li>
<li>States: on, off</li>
<li>Event: <code>xiaomi_aqara.motion</code>
</li>
</ul>
</li>
<li>
<p><strong>Motion Sensor (2nd gen)</strong></p>
<ul>
<li>Model no.: RTCGQ11LM</li>
<li>Zigbee entity: sensor_motion.aq2</li>
<li>States: on, off</li>
<li>Event: <code>xiaomi_aqara.motion</code>
</li>
</ul>
</li>
<li>
<p><strong>Xiaomi Door and Window Sensor (1st gen)</strong></p>
<ul>
<li>Model no.: MCCGQ01LM</li>
<li>Zigbee entity: magnet</li>
<li>States: on, off</li>
</ul>
</li>
<li>
<p><strong>Aqara Door and Window Sensor (2nd gen)</strong></p>
<ul>
<li>Model no.: MCCGQ11LM</li>
<li>Zigbee entity: sensor_magnet.aq2</li>
<li>States: on, off</li>
</ul>
</li>
<li>
<p><strong>Smoke Detector</strong></p>
<ul>
<li>Model no.: JTYJ-GD-01LM/BW</li>
<li>Zigbee entity: smoke</li>
<li>States: on, off</li>
</ul>
</li>
<li>
<p><strong>Gas Leak Detector</strong></p>
<ul>
<li>Model no.: JTQJ-BF-01LM/BW</li>
<li>Zigbee entity: natgas</li>
<li>States: on, off</li>
</ul>
</li>
<li>
<p><strong>Water Leak Sensor</strong></p>
<ul>
<li>Model no.: SJCGQ11LM</li>
<li>Zigbee entity: sensor_wleak.aq1</li>
<li>States: on, off</li>
</ul>
</li>
<li>
<p><strong>Button (1st gen)</strong></p>
<ul>
<li>Model no.: WXKG01LM</li>
<li>Zigbee entity: switch</li>
<li>States: on (through long_click_press), off</li>
<li>Event: <code>xiaomi_aqara.click</code>
</li>
<li>Event key: <code>click_type</code>
</li>
<li>Event values: <code>long_click_press</code>, <code>hold</code>, <code>single</code>, <code>double</code>
</li>
</ul>
</li>
<li>
<p><strong>Button (2nd gen)</strong></p>
<ul>
<li>Model no.: WXKG11LM</li>
<li>Zigbee entity: sensor_switch.aq2, remote.b1acn01</li>
<li>States: on (through long_click_press), off</li>
<li>Event: <code>xiaomi_aqara.click</code>
</li>
<li>Event key: <code>click_type</code>
</li>
<li>Event values: <code>single</code>, <code>double</code>, <code>long_click_press</code>, <code>hold</code>
</li>
</ul>
</li>
<li>
<p><strong>Button (2nd gen, model b)</strong></p>
<ul>
<li>Model no.: WXKG12LM</li>
<li>Zigbee entity: sensor_switch.aq3</li>
<li>States: off (always)</li>
<li>Event: <code>xiaomi_aqara.click</code>
</li>
<li>Event key: <code>click_type</code>
</li>
<li>Event values: <code>single</code>, <code>double</code>, <code>long_click_press</code>, <code>shake</code>
</li>
</ul>
</li>
<li>
<p><strong>Aqara Wireless Switch (Single)</strong></p>
<ul>
<li>Model no.: WXKG03LM</li>
<li>Zigbee entity: 86sw1</li>
<li>States: off (always)</li>
<li>Event: <code>xiaomi_aqara.click</code>
</li>
<li>Event key: <code>click_type</code>
</li>
<li>Event values: <code>single</code>
</li>
</ul>
</li>
<li>
<p><strong>Aqara Wireless Switch (Double)</strong></p>
<ul>
<li>Model no.: WXKG02LM</li>
<li>Zigbee entity: 86sw2</li>
<li>States: off (always)</li>
<li>Event: <code>xiaomi_aqara.click</code>
</li>
<li>Event key: <code>click_type</code>
</li>
<li>Event values: <code>single</code>, <code>both</code>
</li>
</ul>
</li>
<li>
<p><strong>Aqara Wireless Switch (Single) (2nd gen)</strong></p>
<ul>
<li>Model no.: WXKG03LM</li>
<li>Zigbee entity: remote.b186acn01</li>
<li>States: off (always)</li>
<li>Event: <code>xiaomi_aqara.click</code>
</li>
<li>Event key: <code>click_type</code>
</li>
<li>Event values: <code>single</code>, <code>double</code>, <code>long</code>
</li>
</ul>
</li>
<li>
<p><strong>Aqara Wireless Switch (Double) (2nd gen)</strong></p>
<ul>
<li>Model no.: WXKG02LM</li>
<li>Zigbee entity: remote.b286acn01</li>
<li>States: off (always)</li>
<li>Event: <code>xiaomi_aqara.click</code>
</li>
<li>Event key: <code>click_type</code>
</li>
<li>Event values: <code>single</code>, <code>double</code>, <code>long</code>, <code>both</code>, <code>double_both</code>, <code>long_both</code>
</li>
</ul>
</li>
<li>
<p><strong>Cube</strong></p>
<ul>
<li>Model no.: MFKZQ01LM</li>
<li>Zigbee entity: cube</li>
<li>States: off (always)</li>
<li>Event: <code>xiaomi_aqara.cube_action</code>
</li>
<li>Event key: <code>action_type</code>, <code>action_value</code> (rotate)</li>
<li>Event values: <code>flip90</code>, <code>flip180</code>, <code>move</code>, <code>tap_twice</code>, <code>shake_air</code>, <code>swing</code>, <code>alert</code>, <code>free_fall</code>, <code>rotate</code> (degrees at action_value)</li>
</ul>
</li>
<li>
<p><strong>Vibration Sensor</strong></p>
<ul>
<li>Model no.: DJT11LM</li>
<li>Zigbee entity: vibration</li>
<li>States: off (always)</li>
<li>Event: <code>xiaomi_aqara.movement</code>
</li>
<li>Event key: <code>movement_type</code>
</li>
<li>Event values: <code>vibrate</code>, <code>tilt</code>, <code>free_fall</code>
</li>
</ul>
</li>
</ul>
<h4>Automation examples for binary sensors <a class="title-link" name="automation-examples-for-binary-sensors" href="#automation-examples-for-binary-sensors"></a>
</h4>
<h5>Motion <a class="title-link" name="motion" href="#motion"></a>
</h5>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">If</span><span class="nv"> </span><span class="s">there</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">motion</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">it's</span><span class="nv"> </span><span class="s">dark</span><span class="nv"> </span><span class="s">turn</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">gateway</span><span class="nv"> </span><span class="s">light"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
      <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.motion_sensor_158d000xxxxxc2</span>
      <span class="na">from</span><span class="pi">:</span> <span class="s2">"</span><span class="s">off"</span>
      <span class="na">to</span><span class="pi">:</span> <span class="s2">"</span><span class="s">on"</span>
  <span class="na">conditions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">condition</span><span class="pi">:</span> <span class="s">numeric_state</span>
      <span class="na">entity_id</span><span class="pi">:</span> <span class="s">sensor.illumination_34ce00xxxx11</span>
      <span class="na">below</span><span class="pi">:</span> <span class="m">300</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_on</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">light.gateway_light_34ce00xxxx11</span>
      <span class="na">data</span><span class="pi">:</span>
        <span class="na">brightness</span><span class="pi">:</span> <span class="m">5</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">automation.turn_on</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">automation.MOTION_OFF</span>
<span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">If</span><span class="nv"> </span><span class="s">there</span><span class="nv"> </span><span class="s">no</span><span class="nv"> </span><span class="s">motion</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">5</span><span class="nv"> </span><span class="s">minutes</span><span class="nv"> </span><span class="s">turn</span><span class="nv"> </span><span class="s">off</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">gateway</span><span class="nv"> </span><span class="s">light"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
      <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.motion_sensor_158d000xxxxxc2</span>
      <span class="na">from</span><span class="pi">:</span> <span class="s2">"</span><span class="s">on"</span>
      <span class="na">to</span><span class="pi">:</span> <span class="s2">"</span><span class="s">off"</span>
      <span class="na">for</span><span class="pi">:</span>
        <span class="na">minutes</span><span class="pi">:</span> <span class="m">5</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_off</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">light.gateway_light_34ce00xxxx11</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">automation.turn_off</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">automation.Motion_off</span>
</code></pre></div></div>
<h5>Door and/or indow binary sensors <a class="title-link" name="door-andor-indow-binary-sensors" href="#door-andor-indow-binary-sensors"></a>
</h5>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">If</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">window</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">open</span><span class="nv"> </span><span class="s">turn</span><span class="nv"> </span><span class="s">off</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">radiator"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
      <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.door_window_sensor_158d000xxxxxc2</span>
      <span class="na">from</span><span class="pi">:</span> <span class="s2">"</span><span class="s">off"</span>
      <span class="na">to</span><span class="pi">:</span> <span class="s2">"</span><span class="s">on"</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">climate.set_operation_mode</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">climate.livingroom</span>
      <span class="na">data</span><span class="pi">:</span>
        <span class="na">operation_mode</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Off"</span>
<span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">If</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">window</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">closed</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">5</span><span class="nv"> </span><span class="s">minutes</span><span class="nv"> </span><span class="s">turn</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">radiator</span><span class="nv"> </span><span class="s">again"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
      <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.door_window_sensor_158d000xxxxxc2</span>
      <span class="na">from</span><span class="pi">:</span> <span class="s2">"</span><span class="s">on"</span>
      <span class="na">to</span><span class="pi">:</span> <span class="s2">"</span><span class="s">off"</span>
      <span class="na">for</span><span class="pi">:</span>
        <span class="na">minutes</span><span class="pi">:</span> <span class="m">5</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">climate.set_operation_mode</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">climate.livingroom</span>
      <span class="na">data</span><span class="pi">:</span>
        <span class="na">operation_mode</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Smart</span><span class="nv"> </span><span class="s">schedule"</span>
<span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Notify</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">door</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">opened</span><span class="nv"> </span><span class="s">when</span><span class="nv"> </span><span class="s">away"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
      <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.door_window_sensor_15xxxxxxc9xx6b</span>
      <span class="na">from</span><span class="pi">:</span> <span class="s2">"</span><span class="s">off"</span>
      <span class="na">to</span><span class="pi">:</span> <span class="s2">"</span><span class="s">on"</span>
  <span class="na">conditions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">condition</span><span class="pi">:</span> <span class="s">state</span>
      <span class="na">entity_id</span><span class="pi">:</span> <span class="s">group.family</span>
      <span class="na">state</span><span class="pi">:</span> <span class="s2">"</span><span class="s">not_home"</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">notify.notify_person</span>
      <span class="na">data</span><span class="pi">:</span>
        <span class="na">message</span><span class="pi">:</span> <span class="s2">"</span><span class="s">The</span><span class="nv"> </span><span class="s">door</span><span class="nv"> </span><span class="s">has</span><span class="nv"> </span><span class="s">been</span><span class="nv"> </span><span class="s">opened"</span>
</code></pre></div></div>
<h4>Smoke <a class="title-link" name="smoke" href="#smoke"></a>
</h4>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Send</span><span class="nv"> </span><span class="s">notification</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">fire</span><span class="nv"> </span><span class="s">alarm"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
      <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.smoke_sensor_158d0001574899</span>
      <span class="na">from</span><span class="pi">:</span> <span class="s2">"</span><span class="s">off"</span>
      <span class="na">to</span><span class="pi">:</span> <span class="s2">"</span><span class="s">on"</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">notify.html5</span>
      <span class="na">data</span><span class="pi">:</span>
        <span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Fire</span><span class="nv"> </span><span class="s">alarm!"</span>
        <span class="na">message</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Fire/Smoke</span><span class="nv"> </span><span class="s">detected!"</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">xiaomi_aqara.play_ringtone</span>
      <span class="na">data</span><span class="pi">:</span>
        <span class="na">gw_mac</span><span class="pi">:</span> <span class="s">xxxxxxxxxxxx</span>
        <span class="na">ringtone_id</span><span class="pi">:</span> <span class="m">2</span>
        <span class="na">ringtone_vol</span><span class="pi">:</span> <span class="m">100</span>
</code></pre></div></div>
<h4>Gas <a class="title-link" name="gas" href="#gas"></a>
</h4>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Send</span><span class="nv"> </span><span class="s">notification</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">gas</span><span class="nv"> </span><span class="s">alarm"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">state</span>
      <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.natgas_sensor_158dxxxxxxxxxx</span>
      <span class="na">from</span><span class="pi">:</span> <span class="s2">"</span><span class="s">off"</span>
      <span class="na">to</span><span class="pi">:</span> <span class="s2">"</span><span class="s">on"</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">notify.html5</span>
      <span class="na">data</span><span class="pi">:</span>
        <span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Gas</span><span class="nv"> </span><span class="s">alarm!"</span>
        <span class="na">message</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Gas</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">density</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">state_attr('binary_sensor.natgas_sensor_158dxxxxxxxxxx',</span><span class="nv"> </span><span class="s">'density')</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">detected."</span>
</code></pre></div></div>
<h4>Xiaomi Wireless Button <a class="title-link" name="xiaomi-wireless-button" href="#xiaomi-wireless-button"></a>
</h4>
<p>There are 3 versions of the Xiaomi Wireless button:</p>
<ul>
<li>For the round shaped button, the available events are <code>single</code>, <code>double</code>, <code>hold</code>, <code>long_click_press</code> and <code>long_click_release</code>.</li>
<li>Aqara branded buttons are square shaped. Model WXKG11LM only supports <code>single</code>, <code>double</code>, <code>long_click_press</code>and <code>hold</code> events. WXKG12LM supports <code>single</code>, <code>double</code>, <code>long_click_press</code> and <code>shake</code> events.</li>
</ul>
<p>For the Aqara versions, the delay between two clicks to generate a double-click must be larger than with the round button. Clicking too quickly generates a single-click event.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Toggle</span><span class="nv"> </span><span class="s">dining</span><span class="nv"> </span><span class="s">light</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">single</span><span class="nv"> </span><span class="s">press"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">event</span>
      <span class="na">event_type</span><span class="pi">:</span> <span class="s">xiaomi_aqara.click</span>
      <span class="na">event_data</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.switch_158d000xxxxxc2</span>
        <span class="na">click_type</span><span class="pi">:</span> <span class="s">single</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">switch.toggle</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.wall_switch_left_158d000xxxxx01</span>
<span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Toggle</span><span class="nv"> </span><span class="s">couch</span><span class="nv"> </span><span class="s">light</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">double</span><span class="nv"> </span><span class="s">click"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">event</span>
      <span class="na">event_type</span><span class="pi">:</span> <span class="s">xiaomi_aqara.click</span>
      <span class="na">event_data</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.switch_158d000xxxxxc2</span>
        <span class="na">click_type</span><span class="pi">:</span> <span class="s">double</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">switch.toggle</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">switch.wall_switch_right_158d000xxxxx01</span>
<span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Let</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">dog</span><span class="nv"> </span><span class="s">bark</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">long</span><span class="nv"> </span><span class="s">press"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">event</span>
      <span class="na">event_type</span><span class="pi">:</span> <span class="s">xiaomi_aqara.click</span>
      <span class="na">event_data</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.switch_158d000xxxxxc2</span>
        <span class="na">click_type</span><span class="pi">:</span> <span class="s">long_click_press</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">xiaomi_aqara.play_ringtone</span>
      <span class="na">data</span><span class="pi">:</span>
        <span class="na">gw_mac</span><span class="pi">:</span> <span class="s">xxxxxxxxxxxx</span>
        <span class="na">ringtone_id</span><span class="pi">:</span> <span class="m">8</span>
        <span class="na">ringtone_vol</span><span class="pi">:</span> <span class="m">8</span>
</code></pre></div></div>
<h5>Xiaomi Cube <a class="title-link" name="xiaomi-cube" href="#xiaomi-cube"></a>
</h5>
<p>Available events are <code>flip90</code>, <code>flip180</code>, <code>move</code>, <code>tap_twice</code>, <code>shake_air</code>, <code>swing</code>, <code>alert</code>, <code>free_fall</code> and <code>rotate</code>. The integration stores the last action as the attribute <code>last_action</code>.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Cube</span><span class="nv"> </span><span class="s">event</span><span class="nv"> </span><span class="s">flip90"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">event</span>
      <span class="na">event_type</span><span class="pi">:</span> <span class="s">xiaomi_aqara.cube_action</span>
      <span class="na">event_data</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.cube_15xxxxxxxxxxxx</span>
        <span class="na">action_type</span><span class="pi">:</span> <span class="s">flip90</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_on</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">light.gateway_light_28xxxxxxxxxx</span>
      <span class="na">data</span><span class="pi">:</span>
        <span class="na">color_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">springgreen"</span>
<span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Cube</span><span class="nv"> </span><span class="s">event</span><span class="nv"> </span><span class="s">flip180"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">event</span>
      <span class="na">event_type</span><span class="pi">:</span> <span class="s">xiaomi_aqara.cube_action</span>
      <span class="na">event_data</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.cube_15xxxxxxxxxxxx</span>
        <span class="na">action_type</span><span class="pi">:</span> <span class="s">flip180</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_on</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">light.gateway_light_28xxxxxxxxxx</span>
      <span class="na">data</span><span class="pi">:</span>
        <span class="na">color_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">darkviolet"</span>
<span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Cube</span><span class="nv"> </span><span class="s">event</span><span class="nv"> </span><span class="s">move"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">event</span>
      <span class="na">event_type</span><span class="pi">:</span> <span class="s">xiaomi_aqara.cube_action</span>
      <span class="na">event_data</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.cube_15xxxxxxxxxxxx</span>
        <span class="na">action_type</span><span class="pi">:</span> <span class="s">move</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_on</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">light.gateway_light_28xxxxxxxxxx</span>
      <span class="na">data</span><span class="pi">:</span>
        <span class="na">color_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">gold"</span>
<span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Cube</span><span class="nv"> </span><span class="s">event</span><span class="nv"> </span><span class="s">tap_twice"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">event</span>
      <span class="na">event_type</span><span class="pi">:</span> <span class="s">xiaomi_aqara.cube_action</span>
      <span class="na">event_data</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.cube_15xxxxxxxxxxxx</span>
        <span class="na">action_type</span><span class="pi">:</span> <span class="s">tap_twice</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_on</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">light.gateway_light_28xxxxxxxxxx</span>
      <span class="na">data</span><span class="pi">:</span>
        <span class="na">color_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">deepskyblue"</span>
<span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Cube</span><span class="nv"> </span><span class="s">event</span><span class="nv"> </span><span class="s">shake_air"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">event</span>
      <span class="na">event_type</span><span class="pi">:</span> <span class="s">xiaomi_aqara.cube_action</span>
      <span class="na">event_data</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.cube_15xxxxxxxxxxxx</span>
        <span class="na">action_type</span><span class="pi">:</span> <span class="s">shake_air</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_on</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">light.gateway_light_28xxxxxxxxxx</span>
      <span class="na">data</span><span class="pi">:</span>
        <span class="na">color_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">blue"</span>
</code></pre></div></div>
<h5>Aqara Wireless Switch <a class="title-link" name="aqara-wireless-switch" href="#aqara-wireless-switch"></a>
</h5>
<p>The Aqara Wireless Switch is available as single-key and double-key version. Each key behaves like the Wireless Button limited to the click event <code>single</code>. The double key version adds a third device called <code>binary_sensor.wall_switch_both_158xxxxxxxxx12</code> which reports a click event called <code>both</code> if both keys are pressed.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Decrease</span><span class="nv"> </span><span class="s">brightness</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">gateway</span><span class="nv"> </span><span class="s">light"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">event</span>
      <span class="na">event_type</span><span class="pi">:</span> <span class="s">xiaomi_aqara.click</span>
      <span class="na">event_data</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.wall_switch_left_158xxxxxxxxx12</span>
        <span class="na">click_type</span><span class="pi">:</span> <span class="s">single</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_on</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">light.gateway_light_34xxxxxxxx13</span>
      <span class="na">data</span><span class="pi">:</span>
        <span class="na">brightness</span><span class="pi">:</span> <span class="pi">&gt;-</span>
          <span class="s">{% if state_attr('light.gateway_light_34xxxxxxxx13', 'brightness') %}</span>
            <span class="s">{% if state_attr('light.gateway_light_34xxxxxxxx13', 'brightness') - 60 &gt;= 10 %}</span>
              <span class="s">{{state_attr('light.gateway_light_34xxxxxxxx13', 'brightness') - 60}}</span>
            <span class="s">{% else %}</span>
              <span class="s">{{state_attr('light.gateway_light_34xxxxxxxx13', 'brightness')}}</span>
            <span class="s">{% endif %}</span>
          <span class="s">{% else %}</span>
            <span class="s">10</span>
          <span class="s">{% endif %}</span>

<span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Increase</span><span class="nv"> </span><span class="s">brightness</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">gateway</span><span class="nv"> </span><span class="s">light"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">event</span>
      <span class="na">event_type</span><span class="pi">:</span> <span class="s">xiaomi_aqara.click</span>
      <span class="na">event_data</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.wall_switch_right_158xxxxxxxxx12</span>
        <span class="na">click_type</span><span class="pi">:</span> <span class="s">single</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_on</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">light.gateway_light_34xxxxxxxx13</span>
      <span class="na">data</span><span class="pi">:</span>
        <span class="na">brightness</span><span class="pi">:</span> <span class="pi">&gt;-</span>
          <span class="s">{% if state_attr('light.gateway_light_34xxxxxxxx13', 'brightness') %}</span>
            <span class="s">{% if state_attr('light.gateway_light_34xxxxxxxx13', 'brightness') + 60 &lt;= 255 %}</span>
              <span class="s">{{state_attr('light.gateway_light_34xxxxxxxx13', 'brightness') + 60}}</span>
            <span class="s">{% else %}</span>
              <span class="s">{{state_attr('light.gateway_light_34xxxxxxxx13', 'brightness')}}</span>
            <span class="s">{% endif %}</span>
          <span class="s">{% else %}</span>
            <span class="s">10</span>
          <span class="s">{% endif %}</span>

<span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Turn</span><span class="nv"> </span><span class="s">off</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">gateway</span><span class="nv"> </span><span class="s">light"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">event</span>
      <span class="na">event_type</span><span class="pi">:</span> <span class="s">xiaomi_aqara.click</span>
      <span class="na">event_data</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.wall_switch_both_158xxxxxxxxx12</span>
        <span class="na">click_type</span><span class="pi">:</span> <span class="s">both</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.turn_off</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">light.gateway_light_34xxxxxxxx13</span>
</code></pre></div></div>
<h4>Vibration sensor <a class="title-link" name="vibration-sensor" href="#vibration-sensor"></a>
</h4>
<p>This automation toggles the living room lamp on vibration/tilt.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Turn</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">Living</span><span class="nv"> </span><span class="s">Room</span><span class="nv"> </span><span class="s">Lamp</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">vibration"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">event</span>
      <span class="na">event_type</span><span class="pi">:</span> <span class="s">xiaomi_aqara.movement</span>
      <span class="na">event_data</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.vibration_xxxx000000</span>
        <span class="na">movement_type</span><span class="pi">:</span> <span class="s">vibrate</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.toggle</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">light.living_room_lamp</span>
<span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Turn</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">Living</span><span class="nv"> </span><span class="s">Room</span><span class="nv"> </span><span class="s">Lamp</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">tilt"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">event</span>
      <span class="na">event_type</span><span class="pi">:</span> <span class="s">xiaomi_aqara.movement</span>
      <span class="na">event_data</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.vibration_xxxx000000</span>
        <span class="na">movement_type</span><span class="pi">:</span> <span class="s">tilt</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.toggle</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">light.living_room_lamp</span>
</code></pre></div></div>
<h3>Sensors <a class="title-link" name="sensors" href="#sensors"></a>
</h3>
<p>The sensor entity allows you to read data from your <a href="https://www.mi.com/en/" rel="external nofollow">Xiaomi<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> sensors.</p>
<p>The following sensor types are supported:</p>
<ul>
<li>Battery level (in percentage)</li>
<li>Bed activity / vibration (in micrometers)</li>
<li>Coordination</li>
<li>Humidity (in percentage)</li>
<li>Illumination (in lux)</li>
<li>Power consumed (in kWh)</li>
<li>Power load (in Watt)</li>
<li>Pressure (in hPa)</li>
<li>Temperature (depends on UI settings, Celsius or Fahrenheit)</li>
<li>Tilt angle</li>
</ul>
<h2>Switches <a class="title-link" name="switches" href="#switches"></a>
</h2>
<p>The switch entity allows you to get data from your <a href="https://www.mi.com/en/" rel="external nofollow">Xiaomi aqara<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a> switches and to switch between states.</p>
<h2>Actions <a class="title-link" name="actions" href="#actions"></a>
</h2>
<p>The gateway provides the following actions:</p>
<h3>Action xiaomi_aqara.play_ringtone <a class="title-link" name="action-xiaomi_aqaraplay_ringtone" href="#action-xiaomi_aqaraplay_ringtone"></a>
</h3>
<p>Play a specific ringtone. The version of the gateway firmware must be <code>1.4.1_145</code> at least. Take a look at the examples below.</p>
<table>
<thead>
<tr>
<th>Data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gw_mac</code></td>
<td>no</td>
<td>MAC address of the Xiaomi Aqara Gateway</td>
</tr>
<tr>
<td><code>ringtone_id</code></td>
<td>no</td>
<td>One of the allowed ringtone ids</td>
</tr>
<tr>
<td><code>ringtone_vol</code></td>
<td>yes</td>
<td>The volume in percent</td>
</tr>
</tbody>
</table>
<p>Allowed values of the <code>ringtone_id</code> are:</p>
<ul>
<li>Alarms
<ul>
<li>0 - Police car 1</li>
<li>1 - Police car 2</li>
<li>2 - Accident</li>
<li>3 - Countdown</li>
<li>4 - Ghost</li>
<li>5 - Sniper rifle</li>
<li>6 - Battle</li>
<li>7 - Air raid</li>
<li>8 - Bark</li>
</ul>
</li>
<li>Doorbells
<ul>
<li>10 - Doorbell</li>
<li>11 - Knock at a door</li>
<li>12 - Amuse</li>
<li>13 - Alarm clock</li>
</ul>
</li>
<li>Alarm clock
<ul>
<li>20 - MiMix</li>
<li>21 - Enthusiastic</li>
<li>22 - GuitarClassic</li>
<li>23 - IceWorldPiano</li>
<li>24 - LeisureTime</li>
<li>25 - ChildHood</li>
<li>26 - MorningStreamLiet</li>
<li>27 - MusicBox</li>
<li>28 - Orange</li>
<li>29 - Thinker</li>
</ul>
</li>
<li>Custom ringtones (uploaded by the Mi Home app) starting from 10001</li>
</ul>
<h3>Action xiaomi_aqara.stop_ringtone <a class="title-link" name="action-xiaomi_aqarastop_ringtone" href="#action-xiaomi_aqarastop_ringtone"></a>
</h3>
<p>Stops a playing ringtone immediately.</p>
<table>
<thead>
<tr>
<th>Data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gw_mac</code></td>
<td>no</td>
<td>MAC address of the Xiaomi Aqara Gateway</td>
</tr>
</tbody>
</table>
<h3>Action xiaomi_aqara.add_device <a class="title-link" name="action-xiaomi_aqaraadd_device" href="#action-xiaomi_aqaraadd_device"></a>
</h3>
<p>Enables the join permission of the Xiaomi Aqara Gateway for 30 seconds. A new device can be added afterwards by pressing the pairing button once.</p>
<table>
<thead>
<tr>
<th>Data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gw_mac</code></td>
<td>no</td>
<td>MAC address of the Xiaomi Aqara Gateway</td>
</tr>
</tbody>
</table>
<h3>Action xiaomi_aqara.remove_device <a class="title-link" name="action-xiaomi_aqararemove_device" href="#action-xiaomi_aqararemove_device"></a>
</h3>
<p>Removes a specific device. The removal is required if a device shall be paired with another gateway.</p>
<table>
<thead>
<tr>
<th>Data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gw_mac</code></td>
<td>no</td>
<td>MAC address of the Xiaomi Aqara Gateway</td>
</tr>
<tr>
<td><code>device_id</code></td>
<td>no</td>
<td>Hardware address of the device to remove</td>
</tr>
</tbody>
</table>
<h2>Examples <a class="title-link" name="examples" href="#examples"></a>
</h2>
<h3>Long press on smart button 1st generation <a class="title-link" name="long-press-on-smart-button-1st-generation" href="#long-press-on-smart-button-1st-generation"></a>
</h3>
<p>This example plays the sound of a dog barking when the button is held down and stops the sound when the button is pressed once. Only works for the round button of the 1st generation.</p>
<p><em>Note: The sound will stop playing automatically when it has ended.</em></p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Let</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">dog</span><span class="nv"> </span><span class="s">bark</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">long</span><span class="nv"> </span><span class="s">press"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">event</span>
      <span class="na">event_type</span><span class="pi">:</span> <span class="s">xiaomi_aqara.click</span>
      <span class="na">event_data</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.switch_158d000xxxxxc2</span>
        <span class="na">click_type</span><span class="pi">:</span> <span class="s">long_click_press</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">xiaomi_aqara.play_ringtone</span>
      <span class="na">data</span><span class="pi">:</span>
        <span class="na">gw_mac</span><span class="pi">:</span> <span class="s">xxxxxxxxxxxx</span>
        <span class="na">ringtone_id</span><span class="pi">:</span> <span class="m">8</span>
        <span class="na">ringtone_vol</span><span class="pi">:</span> <span class="m">8</span>

<span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Stop</span><span class="nv"> </span><span class="s">barking</span><span class="nv"> </span><span class="s">immediately</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">single</span><span class="nv"> </span><span class="s">click"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">event</span>
      <span class="na">event_type</span><span class="pi">:</span> <span class="s">xiaomi_aqara.click</span>
      <span class="na">event_data</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.switch_158d000xxxxxc2</span>
        <span class="na">click_type</span><span class="pi">:</span> <span class="s">single</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">xiaomi_aqara.stop_ringtone</span>
      <span class="na">data</span><span class="pi">:</span>
        <span class="na">gw_mac</span><span class="pi">:</span> <span class="s">xxxxxxxxxxxx</span>
</code></pre></div></div>
<h3>Double click on smart button <a class="title-link" name="double-click-on-smart-button" href="#double-click-on-smart-button"></a>
</h3>
<p>This example toggles the living room lamp on a double click of the button.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="yaml"><span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Double</span><span class="nv"> </span><span class="s">Click</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">toggle</span><span class="nv"> </span><span class="s">living</span><span class="nv"> </span><span class="s">room</span><span class="nv"> </span><span class="s">lamp"</span>
  <span class="na">triggers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">trigger</span><span class="pi">:</span> <span class="s">event</span>
      <span class="na">event_type</span><span class="pi">:</span> <span class="s">xiaomi_aqara.click</span>
      <span class="na">event_data</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">binary_sensor.switch_158d000xxxxxc2</span>
        <span class="na">click_type</span><span class="pi">:</span> <span class="s">double</span>
  <span class="na">actions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">light.toggle</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">light.living_room_lamp</span>
</code></pre></div></div>
<h2>Troubleshooting <a class="title-link" name="troubleshooting" href="#troubleshooting"></a>
</h2>
<h3>Initial setup problem <a class="title-link" name="initial-setup-problem" href="#initial-setup-problem"></a>
</h3>
<p>If you run into trouble initializing the gateway with your app, try another smartphone. E.g., it didn’t work on an OnePlus 3, but it worked with a Nexus 5.</p>
<h3>Connection problem <a class="title-link" name="connection-problem" href="#connection-problem"></a>
</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="bash">2017-08-20 16:51:19 ERROR <span class="o">(</span>SyncWorker_0<span class="o">)</span> <span class="o">[</span>homeassistant.components.xiaomi] No gateway discovered
2017-08-20 16:51:20 ERROR <span class="o">(</span>MainThread<span class="o">)</span> <span class="o">[</span>homeassistant.setup] Setup failed <span class="k">for </span>xiaomi: Component failed to initialize.
</code></pre></div></div>
<p>That means that Home Assistant is not getting any response from your Xiaomi gateway. Might be a local network problem or your firewall.</p>
<ul>
<li>Make sure you have <a href="https://www.domoticz.com/wiki/Xiaomi_Gateway_(Aqara)#Adding_the_Xiaomi_Gateway_to_Domoticz" rel="external nofollow">enabled LAN access<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>.</li>
<li>Turn off the firewall on the system where Home Assistant is running.</li>
<li>Ensure your router supports multicast as this is a requirement of the Xiaomi Gateway.</li>
<li>Try to disable and then enable LAN access.</li>
<li>Hard reset the gateway: Press the button of the gateway 30 seconds and start again from scratch.</li>
<li>If you are using Home Assistant in <a href="/docs/installation/docker/">Docker</a>, make sure to use <code>--net=host</code>.</li>
<li>If you receive an <code>{"error":"Invalid key"}</code> in your log while trying to control the gateway light
<ul>
<li>You should generate the key again using an Android Phone or alternatively an emulator such as <a href="https://www.bluestacks.com" rel="external nofollow">bluestacks<iconify-icon inline="true" icon="tabler:external-link" class="external-link"></iconify-icon></a>. In some instances, there is an issue with keys being generated using the iOS application.</li>
<li>You need to make sure to have multicast support on your network. If you are running Home Assistant in a virtual machine (like Proxmox), try <code>echo 0 &gt;/sys/class/net/vmbr0/bridge/multicast_snooping</code> on the host and restart the service or reboot the host.</li>
</ul>
</li>
</ul>
<p>If your gateway’s MAC address starts with <code>04:CF:8C</code> or <code>7C:49:EB</code>, there is a good chance that the required port <code>9898</code> is closed on your gateway and thus, this method doesn’t work. There are workarounds available online, however this requires soldering and working with electricity.</p>


  


  
<div class="material-card text feedback">
  <h4>
<iconify-icon inline icon="mdi:feedback" title="Feedback"></iconify-icon> <b> Help us improve our documentation</b><a href="#feedback_section" class="title-link" name="feedback_section"></a>
</h4>
  Suggest an edit to this page, or provide/view feedback for this page.
  <div class="links">
    <ul aria-label="Page feedback options">
    <li><a href="https://github.com/home-assistant/home-assistant.io/tree/current/source/_integrations/xiaomi_aqara.markdown" target="_blank" title="Edit this page"><iconify-icon inline icon="mdi:edit"></iconify-icon> Edit</a></li>
    
    <li><a href="https://github.com/home-assistant/home-assistant.io/issues/new?template=feedback.yml&amp;url=https%3A%2F%2Fivangrod.github.io%2Fintegrations%2Fxiaomi_aqara%2F&amp;version=2025.9.4&amp;labels=current,integration%3A%20xiaomi_aqara" target="_blank" title="Provide feedback on this page"><iconify-icon inline icon="mdi:comment-edit-outline"></iconify-icon> Provide feedback</a></li>
    <li><a href="https://github.com/home-assistant/home-assistant.io/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3A%22integration%3A+xiaomi_aqara%22" target="_blank" title="View pending feedback for this page"><iconify-icon inline icon="mdi:comment-text-multiple-outline"></iconify-icon> View pending feedback</a></li>
    
  </ul>
  </div>
</div>


</article>

            
          </div>


          
            
              <aside id="integration-sidebar" class="grid__item one-third desk-wide-one-quarter lap-one-whole palm-one-whole">
              
            <div class="grid">
  




  


<section class="aside-module grid__item one-whole lap-one-half">
  <div class='brand-logo-container section'>
      <img src='https://brands.home-assistant.io/_/xiaomi_aqara//logo.png' srcset='https://brands.home-assistant.io/_/xiaomi_aqara/logo@2x.png 2x' /><a href='https://my.home-assistant.io/redirect/config_flow_start?domain=xiaomi_aqara' class='my badge' target='_blank'><img src='https://my.home-assistant.io/badges/config_flow_start.svg' /></a></div>

  <div class='section'>The Xiaomi Gateway (Aqara)  integration  was introduced in Home Assistant 0.57, and it's used by <a title="Open analytics.home-assistant.io" href="https://analytics.home-assistant.io/integrations" target="_blank" rel="noopener">
        
          2603</a> active installations.
        
      
    
  </div>
    <div class='section'>
      <iconify-icon icon='mdi:upload-network-outline'></iconify-icon>&nbsp;Its IoT class is <a href='/blog/2016/02/12/classifying-the-internet-of-things/#classifiers'>Local Push.</a>
    </div>
  <div class='section'>
    <a href="https://github.com/home-assistant/core/tree/dev/homeassistant/components/xiaomi_aqara" target="_blank"><iconify-icon inline icon='simple-icons:github' title='Github'></iconify-icon> View source on GitHub</a><br />
    <a href="https://github.com/home-assistant/core/issues?q=is%3Aissue+is%3Aopen+label%3A%22integration%3A+xiaomi_aqara%22" target="_blank"><iconify-icon inline icon='mdi:bug' title='Bug'></iconify-icon> View known issues</a>
  </div></section>

<section class="aside-module grid__item one-whole lap-one-half">
  <div class='section'>
    <h1 class="title epsilon"><iconify-icon inline icon='mdi:person-heart' title='Person heart'></iconify-icon> Integration owners</h1>
    
        
        

          
          <div class="section">
            We are incredibly grateful to the following contributors who currently maintain this integration:<br />
          </div>
          <div class="section"><a href="https://github.com/danielhiversen" target="_blank"><img class="codeowner-avatar" src="https://avatars.githubusercontent.com/danielhiversen?size=96" alt="@danielhiversen"/> @danielhiversen</a><br /><a href="https://github.com/syssi" target="_blank"><img class="codeowner-avatar" src="https://avatars.githubusercontent.com/syssi?size=96" alt="@syssi"/> @syssi</a><br /></div>
        
    
  </div>
</section>






  <section id="toc-module" class="aside-module grid__item one-whole lap-one-half">
        <div class='section'>
          <h1 class="title epsilon"><iconify-icon inline icon='mdi:toc' title='Toc'></iconify-icon> On this page</h1>
          <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#supported-devices">Supported devices</a></li>
<li class="toc-entry toc-h2"><a href="#unsupported-devices">Unsupported devices</a></li>
<li class="toc-entry toc-h2"><a href="#setup">Setup</a></li>
<li class="toc-entry toc-h2"><a href="#entities">Entities</a>
<ul>
<li class="toc-entry toc-h3"><a href="#covers">Covers</a></li>
<li class="toc-entry toc-h3"><a href="#lights">Lights</a></li>
<li class="toc-entry toc-h3"><a href="#locks">Locks</a></li>
<li class="toc-entry toc-h3"><a href="#binary-sensors">Binary sensors</a></li>
<li class="toc-entry toc-h3"><a href="#sensors">Sensors</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#switches">Switches</a></li>
<li class="toc-entry toc-h2"><a href="#actions">Actions</a>
<ul>
<li class="toc-entry toc-h3"><a href="#action-xiaomi_aqaraplay_ringtone">Action xiaomi_aqara.play_ringtone</a></li>
<li class="toc-entry toc-h3"><a href="#action-xiaomi_aqarastop_ringtone">Action xiaomi_aqara.stop_ringtone</a></li>
<li class="toc-entry toc-h3"><a href="#action-xiaomi_aqaraadd_device">Action xiaomi_aqara.add_device</a></li>
<li class="toc-entry toc-h3"><a href="#action-xiaomi_aqararemove_device">Action xiaomi_aqara.remove_device</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#examples">Examples</a>
<ul>
<li class="toc-entry toc-h3"><a href="#long-press-on-smart-button-1st-generation">Long press on smart button 1st generation</a></li>
<li class="toc-entry toc-h3"><a href="#double-click-on-smart-button">Double click on smart button</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#troubleshooting">Troubleshooting</a>
<ul>
<li class="toc-entry toc-h3"><a href="#initial-setup-problem">Initial setup problem</a></li>
<li class="toc-entry toc-h3"><a href="#connection-problem">Connection problem</a></li>
</ul>
</li>
</ul>
        </div>
      </section><section id="category-module" class="aside-module grid__item one-whole lap-one-half">
      <div class='section'>
        <h1 class="title epsilon"><iconify-icon inline icon='mdi:category' title='Category'></iconify-icon> Categories</h1>
        <ul class='divided'><li>
            <a href='/integrations/#hub'>Hub</a>
          </li></ul>
      </div>
    </section></div>

          </aside>
          
        </div>
      </div>

      <footer>
        <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="skyline grid">
        <div class="skyline grid__item one-whole">
          <div class="footer-skyline">
          </div>
        </div>
      </div>
      <div class="footer-nav grid">
        <div class="company grid__item one-quarter lap-one-half palm-one-whole">
          <div class="title">
            <img
              src="/needlehack-blog/images/footer-logo-text.svg"
              height="72"
              alt="Home Assistant"
            />
          </div>
          <p>
            Home Assistant is a project from the <a href="https://www.openhomefoundation.org/">Open Home Foundation</a>, sponsored by <a href="https://www.nabucasa.com/">Nabu Casa</a>.
          </p>
        </div>

        <div class="grid__item one-quarter lap-one-half palm-one-whole">
          <h3>Join us and contribute!</h3>
          <ul>
            <li><a class="external-link" href="https://github.com/home-assistant/">GitHub repo <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://developers.home-assistant.io">Developers Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://design.home-assistant.io">Design Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://data.home-assistant.io">Data Science Portal <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://community.home-assistant.io">Community Forum <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://creators.home-assistant.io/">Creator Network <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a class="external-link" href="https://works-with.home-assistant.io/">Works With Home Assistant <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></li>
            <li><a href="/needlehack-blog/community">Our community</li>
            <li><a href="/needlehack-blog/help/reporting_issues/">Reporting issues</a></li>
          </ul>
          <h3>System status</h3>
          <ul>
            <li>
              <a class="external-link"  href="https://alerts.home-assistant.io">Integration Alerts <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a>
            </li>
            <li><a href="/needlehack-blog/security/">Security Alerts</a></li>
            <li>
              <a class="external-link" href="https://status.home-assistant.io">System Status <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a>
            </li>
          </ul>
        </div>

        <div class="grid__item one-quarter lap-one-half palm-one-whole">
          <h3>Companion apps</h3>
          <ul>
            <li><a class="external-link" href="https://apps.apple.com/us/app/home-assistant/id1099568401">iOS and Apple devices</a></li>
            <li><a class="external-link" href="https://play.google.com/store/apps/details?id=io.homeassistant.companion.android">Android and Wear OS</a></li>
            <li><a class="external-link" href="https://companion.home-assistant.io/">...and more!</a></li>
          </ul>
          <h3>Governance</h3>
          <ul>
            <li><a href="/needlehack-blog/privacy/">Privacy Notices</a></li>
            <li><a href="/needlehack-blog/developers/cla/">Contributor License Agreement</a></li>
            <li><a href="/needlehack-blog/tos/">Terms of Service</a></li>
            <li><a href="/needlehack-blog/code_of_conduct/">Code of Conduct</a></li>
            <li><a href="/needlehack-blog/developers/credits/">Credits</a></li>
            <li><a href="/needlehack-blog/developers/license/">License</a></li>
          </ul>
        </div>

        <div class="socials grid__item one-quarter lap-one-half palm-one-whole">

          <h3>Follow us</h3>
          <p><a class="external-link" href='https://newsletter.openhomefoundation.org/#/portal'>Sign up for our newsletter <iconify-icon inline icon='tabler:external-link' title='External link'></iconify-icon></a></p>
          <div class="icons">
            <a
              rel="me"
              href="https://youtube.com/@home_assistant"
              title="YouTube"
              target="_blank"
              ><iconify-icon icon="simple-icons:youtube"></iconify-icon></a>
            <a
              rel="me"
              href="https://reddit.com/r/homeassistant"
              title="Reddit"
              target="_blank"
              ><iconify-icon icon="simple-icons:reddit"></iconify-icon></a>
            <a
              rel="me"
              href="https://github.com/home-assistant/home-assistant"
              title="GitHub"
              target="_blank"
              ><iconify-icon icon="simple-icons:github"></iconify-icon></a>
            <br />
            <a
              rel="me"
              href="https://fosstodon.org/@homeassistant"
              title="Mastodon"
              target="_blank"
              ><iconify-icon icon="simple-icons:mastodon"></iconify-icon></a>
            <a
              rel="me"
              href="https://bsky.app/profile/home-assistant.io"
              title="Bluesky"
              target="_blank"
             ><iconify-icon icon="simple-icons:bluesky"></iconify-icon></a>
            <a
              rel="me"
              href="https://x.com/home_assistant"
              title="X"
              target="_blank"
             ><iconify-icon icon="simple-icons:x"></iconify-icon></a>
            <br />
            <a
              rel="me"
              href="https://www.facebook.com/homeassistantio"
              title="Facebook"
              target="_blank"
              ><iconify-icon icon="simple-icons:facebook"></iconify-icon></a>
            <a
              rel="me"
              href="https://www.instagram.com/homeassistant/"
              title="Instagram"
              target="_blank"
              ><iconify-icon icon="simple-icons:instagram"></iconify-icon></a>
            <a
              rel="me"
              href="https://www.linkedin.com/company/home-assistant"
              title="LinkedIn"
              target="_blank"
              ><iconify-icon icon="simple-icons:linkedin"></iconify-icon></a>
          </div>

          <div class="web-notice">
            <p>
              For partnership inquiries please check out <a href="https://works-with.home-assistant.io/">Works With Home Assistant</a>. For media, get in touch <a href="mailto:media@openhomefoundation.org">here</a>. For other questions, you can contact us <a href="mailto:hello@home-assistant.io">here</a> (No technical support!)
            </p>
            <p>
              Website powered by <a href="https://jekyllrb.com/">Jekyll</a><br />
              Originally based on the <a href="https://github.com/coogie/oscailte">Oscailte theme</a>
            </p>
            <a href="https://www.netlify.com">
              <img
                src="/needlehack-blog/images/frontpage/netlify.svg"
                alt="Deploys by Netlify Badge"
              />
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

      </footer>

    </div>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@justinribeiro/lite-youtube@1.3.1/lite-youtube.js"></script>

<script src="/needlehack-blog/javascripts/terminology_tooltip.js' | cache_buster" type="text/javascript" defer></script>

<script src="/needlehack-blog/javascripts/prism.js' | cache_buster" type="text/javascript" defer></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@3/dist/umd/index.min.js"></script>
<script type="text/javascript">
  docsearch({
    container: '#docsearch',
    appId: 'FBHBYS3J0U',
    indexName: 'home-assistant',
    apiKey: "ba6f7e6d97b3d3d2f778978c742a47c6",
  });
  document.querySelector('.site-title').addEventListener('contextmenu', function (ev) {
    ev.preventDefault();
    document.location.assign("https://design.home-assistant.io/#brand/logo")
  });
</script>




<script type="text/javascript">
  {
    const article = document.querySelector("article.post");
    if (article) {
      const iframes = article.querySelectorAll("iframe[data-src]");
      let loaded = false;
      if (iframes) {
        document.addEventListener('mousemove', loadLazyFrames, { passive: true, once: true });
        document.addEventListener('touchmove', loadLazyFrames, { passive: true, once: true });
        document.addEventListener('scroll', loadLazyFrames, { passive: true, once: true });
  
        function loadLazyFrames() {
          if (loaded) return;
          loaded = true;
  
          iframes.forEach((iframe) => {
            const src = iframe.getAttribute("data-src");
            if (src) {
              iframe.setAttribute("src", src);
              iframe.removeAttribute("data-src");
            }
          });
        }
      }
    }
  }
</script>

  </body>
</html>
